/*
Copyright DHTMLX LTD. http://www.dhtmlx.com
You allowed to use this component or parts of it under GPL terms
To use it on other terms or get Professional edition of the component please contact us at sales@dhtmlx.com
*/
window.dhx||(dhx={});dhx.version="3.0";dhx.codebase="./";dhx.name="Core";dhx.copy=function(a){var b=dhx.copy.cf;b.prototype=a;return new b};dhx.copy.cf=function(){};dhx.extend=function(a,b,c){if(a.zb)a=a.zb[0];for(var d in b)if(!a[d]||c)a[d]=b[d];b.defaults&&dhx.extend(a.defaults,b.defaults);b.m&&b.m.call(a);return a};
dhx.fullCopy=function(a){var b=a.length?[]:{};if(arguments.length>1){b=arguments[0];a=arguments[1]}for(var c in a)if(typeof a[c]=="object"){b[c]=a[c].length?[]:{};dhx.fullCopy(b[c],a[c])}else b[c]=a[c];return b};dhx.single=function(a){var b=null,c=function(){b||(b=new a({}));b.Ud&&b.Ud.apply(b,arguments);return b};return c};
dhx.protoUI=function(){var a=arguments,b=a[0].name,c=function(d){if(a){for(var e=[a[0]],f=1;f<a.length;f++){e[f]=a[f];if(e[f].zb)e[f]=e[f].call(dhx);if(e[f].prototype&&e[f].prototype.name)dhx.ui[e[f].prototype.name]=e[f]}dhx.ui[b]=dhx.proto.apply(dhx,e);if(c.Za)for(f=0;f<c.Za.length;f++)dhx.Type(dhx.ui[b],c.Za[f]);c=a=null}return this!=dhx?new dhx.ui[b](d):dhx.ui[b]};c.zb=arguments;return dhx.ui[b]=c};
dhx.proto=function(){for(var a=arguments,b=a[0],c=!!b.m,d=[],e=a.length-1;e>0;e--){if(typeof a[e]=="function")a[e]=a[e].prototype;a[e].m&&d.push(a[e].m);if(a[e].defaults){var f=a[e].defaults;if(!b.defaults)b.defaults={};for(var g in f)if(dhx.isNotDefined(b.defaults[g]))b.defaults[g]=f[g]}if(a[e].type&&b.type)for(g in a[e].type)b.type[g]||(b.type[g]=a[e].type[g]);for(var h in a[e])b[h]||(b[h]=a[e][h])}c&&d.push(b.m);b.m=function(){for(var k=0;k<d.length;k++)d[k].apply(this,arguments)};var j=function(k){this.F=
[];this.m(k);this.fb&&this.fb(k,this.defaults);for(k=0;k<this.F.length;k++)this.F[k].call(this)};j.prototype=b;b=a=null;return j};dhx.bind=function(a,b){return function(){return a.apply(b,arguments)}};dhx.require=function(a){if(!dhx.Hd[a]){dhx.exec(dhx.ajax().sync().get(dhx.codebase+a).responseText);dhx.Hd[a]=true}};dhx.Hd={};dhx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};
dhx.wrap=function(a,b){if(!a)return b;return function(){var c=a.apply(this,arguments);b.apply(this,arguments);return c}};dhx.methodPush=function(a,b){return function(){var c=false;return c=a[b].apply(a,arguments)}};dhx.isNotDefined=function(a){return typeof a=="undefined"};dhx.delay=function(a,b,c,d){return window.setTimeout(function(){var e=a.apply(b,c);a=b=c=null;return e},d||1)};dhx.uid=function(){if(!this.Kc)this.Kc=(new Date).valueOf();this.Kc++;return this.Kc};
dhx.toNode=function(a){if(typeof a=="string")return document.getElementById(a);return a};dhx.toArray=function(a){return dhx.extend(a||[],dhx.PowerArray,true)};dhx.toFunctor=function(a){return typeof a=="string"?eval(a):a};dhx.D={};dhx.event=function(a,b,c,d){a=dhx.toNode(a);var e=dhx.uid();dhx.D[e]=[a,b,c];if(d)c=dhx.bind(c,d);if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent&&a.attachEvent("on"+b,c);return e};
dhx.eventRemove=function(a){if(a){var b=dhx.D[a];if(b[0].removeEventListener)b[0].removeEventListener(b[1],b[2],false);else b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]);delete this.D[a]}};
dhx.EventSystem={m:function(){this.D={};this.Da={};this.sa={}},blockEvent:function(){this.D.Xc=true},unblockEvent:function(){this.D.Xc=false},mapEvent:function(a){dhx.extend(this.sa,a,true)},callEvent:function(a,b){if(this.D.Xc)return true;a=a.toLowerCase();var c=this.D[a.toLowerCase()],d=true;if(c)for(var e=0;e<c.length;e++)if(c[e].apply(this,b||[])===false)d=false;if(this.sa[a]&&!this.sa[a].callEvent(a,b))d=false;return d},attachEvent:function(a,b,c){a=a.toLowerCase();c=c||dhx.uid();b=dhx.toFunctor(b);
var d=this.D[a]||dhx.toArray();d.push(b);this.D[a]=d;this.Da[c]={f:b,t:a};return c},detachEvent:function(a){if(this.Da[a]){var b=this.Da[a].t,c=this.Da[a].f;b=this.D[b];b.remove(c);delete this.Da[a]}},hasEvent:function(a){a=a.toLowerCase();return this.D[a]?true:false}};dhx.extend(dhx,dhx.EventSystem);
dhx.PowerArray={removeAt:function(a,b){if(a>=0)this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(!b&&b!==0)this.push(a);else{var c=this.splice(b,this.length-b);this[b]=a;this.push.apply(this,c)}},find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this}};dhx.env={};
(function(){if(navigator.userAgent.indexOf("Mobile")!=-1)dhx.env.mobile=true;if(dhx.env.mobile||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1)dhx.env.touch=true;if(navigator.userAgent.indexOf("Opera")!=-1)dhx.env.isOpera=true;else{dhx.env.isIE=!!document.all;dhx.env.isFF=!document.all;dhx.env.isWebKit=navigator.userAgent.indexOf("KHTML")!=-1;dhx.env.isSafari=dhx.env.isWebKit&&navigator.userAgent.indexOf("Mac")!=-1}if(navigator.userAgent.toLowerCase().indexOf("android")!=
-1)dhx.env.isAndroid=true;dhx.env.transform=false;dhx.env.transition=false;var a={};a.names=["transform","transition"];a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition","msTransition"];for(var b=document.createElement("DIV"),c=0;c<a.names.length;c++)for(var d=a[a.names[c]],e=0;e<d.length;e++)if(typeof b.style[d[e]]!="undefined"){dhx.env[a.names[c]]=d[e];break}b.style[dhx.env.transform]=
"translate3d(0,0,0)";dhx.env.translate=b.style[dhx.env.transform]?"translate3d":"translate";dhx.env.transformCSSPrefix=function(){var f;if(dhx.env.isOpera)f="-o-";else{f="";if(dhx.env.isFF)f="-Moz-";if(dhx.env.isWebKit)f="-webkit-";if(dhx.env.isIE)f="-ms-"}return f}();dhx.env.transformPrefix=dhx.env.transformCSSPrefix.replace(/-/gi,"");dhx.env.transitionEnd=dhx.env.transformCSSPrefix=="-Moz-"?"transitionend":dhx.env.transformPrefix+"TransitionEnd"})();
dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();
dhx.html={create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);if(b.style)d.style.cssText=b.style;if(b["class"])d.className=b["class"];if(c)d.innerHTML=c;return d},getValue:function(a){a=dhx.toNode(a);if(!a)return"";return dhx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){if(a)b&&b.parentNode?
b.parentNode.insertBefore(a,b):c.appendChild(a)},locate:function(a,b){if(a.tagName)var c=a;else{a=a||event;c=a.target||a.srcElement}for(;c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||
0,j=b.top+e-g,k=b.left+f-h;return{y:Math.round(j),x:Math.round(k)}}else{for(k=j=0;a;){j+=parseInt(a.offsetTop,10);k+=parseInt(a.offsetLeft,10);a=a.offsetParent}return{y:j,x:k}}},pos:function(a){a=a||event;if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=dhx.env.isIE&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault();dhx.html.stopEvent(a)},
stopEvent:function(a){(a||event).cancelBubble=true;return false},addCss:function(a,b){a.className+=" "+b},removeCss:function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")}};dhx.ready=function(a){this.Rf?a.call():this.Ob.push(a)};dhx.Ob=[];
(function(){var a=document.getElementsByTagName("SCRIPT");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhx.codebase=a.slice(0,a.length).join("/")+"/"}dhx.event(window,"load",function(){dhx.callEvent("onReady",[]);dhx.delay(function(){dhx.Rf=true;for(var b=0;b<dhx.Ob.length;b++)dhx.Ob[b].call();dhx.Ob=[]})})})();dhx.ui={};dhx.ui.zIndex=function(){return dhx.ui.Rc++};dhx.ui.Rc=1;
dhx.ready(function(){dhx.event(document.body,"click",function(a){dhx.callEvent("onClick",[a||event])})});
(function(){var a=dhx.Touch={config:{longTouchDelay:1E3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500},disable:function(){a.kc=true},enable:function(){a.kc=false},m:function(){if(dhx.env.touch){dhx.event(document.body,"touchstart",a.je);dhx.event(document.body,"touchmove",a.Qc);dhx.event(document.body,"touchend",a.ie)}else{a.Db=a.lf;dhx.event(document.body,"mousedown",a.je);dhx.event(document.body,"mousemove",a.Qc);dhx.event(document.body,"mouseup",a.ie);document.body.style.overflowX=
document.body.style.overflowY="hidden"}dhx.event(document.body,"dragstart",function(b){return dhx.html.preventEvent(b)});dhx.event(document.body,"touchstart",function(b){if(!a.kc)if(dhx.env.isSafari){if(b.srcElement.tagName=="SELECT")return true;return dhx.html.preventEvent(b)}});a.Ua()},Ua:function(){a.P=a.N=a.va=null;a.ga=a.M=a.B=null;a.X={$b:0,ac:0,lb:0};if(a.yb){dhx.html.removeCss(a.yb,"dhx_touch");a.yb=null}window.clearTimeout(a.Fd);a.qe=true;a.qb=true;a.rb=true;a.Tc||a.Ka()},ie:function(b){if(a.P){if(a.ga){var c=
a.td(a.M),d=c.e,e=c.f,f=a.config.finish,g=a.sd(b,true);if(g.lb){var h=d+a.config.gravity*g.$b/g.lb,j=e+a.config.gravity*g.ac/g.lb,k=a.I[0]?a.xb(h,false,false,a.B.dx,a.B.px):d,i=a.I[1]?a.xb(j,false,false,a.B.dy,a.B.py):e;if(h!=d||j!=e)f=Math.round(f*Math.max((k-d)/(h-d),(i-e)/(j-e)));c={e:k,f:i};var m=a.tc("onAfterScroll");m&&m.callEvent("onAfterScroll",[c]);f=Math.max(100,f);if(d!=c.e||e!=c.f){a.wa(a.M,c.e,c.f,f+"ms");a.be(c.e,c.f,f+"ms")}else a.Ka()}else a.Ka()}else if(a.rb&&!a.qb)a.Yb("onSwipeX");
else if(a.qb&&!a.rb)a.Yb("onSwipeY");else if(dhx.env.isSafari){var l=a.P.target;dhx.delay(function(){var n=document.createEvent("MouseEvents");n.initEvent("click",true,true);l.dispatchEvent(n)})}a.Ua()}dhx.callEvent("onTouchEnd",[b])},Qc:function(b){if(a.P){var c=a.sd(b);if(a.ga)a.ce(c);else{a.qb=a.Vc(c.sg,"x",a.qb);a.rb=a.Vc(c.Qa,"y",a.rb);if(a.ga){var d=a.tc("onBeforeScroll");if(d){var e={};d.callEvent("onBeforeScroll",[e]);if(e.update){a.config.speed=e.speed;a.config.scale=e.scale}}a.pf(c)}}return dhx.html.preventEvent(b)}},
ce:function(){if(a.M){var b=a.td(a.M),c=a.va||a.P;if(a.I[0])b.e=a.xb(b.e-c.x+a.N.x,true,b.e,a.B.dx,a.B.px);if(a.I[1])b.f=a.xb(b.f-c.y+a.N.y,true,b.f,a.B.dy,a.B.py);a.wa(a.M,b.e,b.f,"0ms");a.be(b.e,b.f,"0ms")}},be:function(b,c,d){var e=a.B.px/a.B.dx*-b,f=a.B.py/a.B.dy*-c;a.I[0]&&a.wa(a.I[0],e,0,d);a.I[1]&&a.wa(a.I[1],0,f,d)},wa:function(b,c,d,e){a.Tc=true;b.style[dhx.env.transformPrefix+"Transform"]=dhx.env.translate+"("+Math.round(c)+"px, "+Math.round(d)+"px"+(dhx.env.translate=="translate3d"?", 0":
"")+")";b.style[dhx.env.transformPrefix+"TransitionDuration"]=e},td:function(b){var c=window.getComputedStyle(b)[dhx.env.transformPrefix+"Transform"];if(c=="none")return{e:0,f:0};else{if(window.WebKitCSSMatrix)return new WebKitCSSMatrix(c);b=c.replace(/(matrix\()(.*)(\))/gi,"$2");b=b.replace(/\s/gi,"");b=b.split(",");for(var d={},e=["a","b","c","d","e","f"],f=0;f<e.length;f++)d[e[f]]=parseInt(b[f],10);return d}},xb:function(b,c,d,e,f){if(b===d)return b;var g=Math.abs(b-d),h=g/(b-d);if(b>0)return c?
d+h*Math.sqrt(g):0;var j=e-f;if(j+b<0)return c?d-Math.sqrt(-(b-d)):-j;return b},pf:function(){if(a.ga.indexOf("x")!=-1)a.I[0]=a.fd("x",a.B.dx,a.B.px,"width");if(a.ga.indexOf("y")!=-1)a.I[1]=a.fd("y",a.B.dy,a.B.py,"height");if(!a.M.scroll_enabled){a.M.scroll_enabled=true;a.M.parentNode.style.position="relative";var b=dhx.env.transformCSSPrefix;a.M.style.cssText+=b+"transition: "+b+"transform; "+b+"user-select:none; "+b+"transform-style:flat;";a.M.addEventListener(dhx.env.transitionEnd,a.Ka,false)}window.setTimeout(a.ce,
1)},fd:function(b,c,d,e){if(c-d<2)return a.ga="";var f=dhx.html.create("DIV",{"class":"dhx_scroll_"+b},"");f.style[e]=d*d/c-7+"px";a.M.parentNode.appendChild(f);return f},Vc:function(b,c,d){if(b>a.config.deltaStep){if(a.qe){a.vf();if((a.ga||"").indexOf(c)==-1)a.ga=""}return false}return d},Ka:function(){if(!a.ga){dhx.html.remove(a.I);a.I=[null,null]}a.Tc=false},vf:function(){window.clearTimeout(a.Fd);a.qe=false;a.Dd(a.P.target,"touch_scroll")},je:function(b){if(!a.kc){a.P=a.Db(b);a.Yb("onTouchStart");
if(a.I[0]||a.I[1])a.kg(b);a.Fd=window.setTimeout(a.wf,a.config.longTouchDelay);var c=dhx.ui.get(b);if(c&&c.touchable&&(!b.target.className||b.target.className.indexOf("dhx_view")!==0)){a.yb=c.getNode(b);dhx.html.addCss(a.yb,"dhx_touch")}}},wf:function(){a.Yb("onLongTouch");dhx.callEvent("onClick",[]);a.Ua()},kg:function(b){a.Dd();var c=a.I[0]||a.I[1];if(c&&(!a.M||c.parentNode!=a.M.parentNode)){a.Ua();a.Ka();a.P=a.Db(b)}a.Qc(b)},sd:function(b){a.va=a.N;a.N=a.Db(b);a.X.sg=Math.abs(a.P.x-a.N.x);a.X.Qa=
Math.abs(a.P.y-a.N.y);if(a.va){if(a.N.time-a.va.time<a.config.scrollDelay){a.X.$b=a.X.$b/1.3+a.N.x-a.va.x;a.X.ac=a.X.ac/1.3+a.N.y-a.va.y}else a.X.ac=a.X.$b=0;a.X.lb=a.X.lb/1.3+(a.N.time-a.va.time)}return a.X},Dd:function(){var b=a.P.target;if(!(!dhx.env.touch&&!dhx.env.transition&&!dhx.env.transform))for(;b&&b.tagName!="BODY";){if(b.getAttribute){var c=b.getAttribute("touch_scroll");if(c){a.ga=c;a.M=b;a.B={dx:b.offsetWidth,dy:b.offsetHeight,px:b.parentNode.offsetWidth,py:b.parentNode.offsetHeight};
return}}b=b.parentNode}},Yb:function(b){dhx.callEvent(b,[a.P,a.N]);var c=a.tc(b);c&&c.callEvent(b,[a.P,a.N])},tc:function(b){var c=dhx.ui.get(a.P);if(!c)return null;for(;c;){if(c.hasEvent&&c.hasEvent(b))return c;c=c.getParent()}return null},Db:function(b){if(!b.touches[0]){b=a.N;b.time=new Date;return b}return{target:b.target,x:b.touches[0].pageX,y:b.touches[0].pageY,time:new Date}},lf:function(b){return{target:b.target,x:b.pageX,y:b.pageY,time:new Date}}};dhx.TouchEvents={m:function(){this.attachEvent("onSwipeX",
this.lg);this.attachEvent("onBeforeSelect",this.unSwipe);this.attachEvent("onAfterDelete",this.unSwipe)},lg:function(b){if((b=this.locate(b))&&b!=this.xa){this.unSwipe();this.swipe(b)}},swipe:function(b){this.xa=b;this.item(this.xa).$template="Swipe";this.refresh(this.xa)},unSwipe:function(){if(this.xa){var b=this.item(this.xa);if(b){b.$template="";this.refresh(this.xa)}this.xa=null}}};dhx.ready(function(){a.m()})})();
dhx.RenderStack={m:function(){this.S=document.createElement("DIV");this.data.attachEvent("onIdChange",dhx.bind(this.Hc,this));this.attachEvent("onItemClick",this.De);if(!this.types){this.types={"default":this.type};this.type.name="default"}this.type=dhx.copy(this.types[this.type.name])},customize:function(a){dhx.Type(this,a)},type_setter:function(a){if(this.types[a]){this.type=dhx.copy(this.types[a]);if(this.type.css)this.k.className+=" "+this.type.css}else this.customize(a);return a},template_setter:function(a){this.type.template=
dhx.Template(a)},ya:function(a){this.callEvent("onItemRender",[a]);return this.type.templateStart(a,this.type)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type)+this.type.templateEnd(a,this.type)},Pc:function(a){this.S.innerHTML=this.ya(a);return this.S.firstChild},Hc:function(a,b){var c=this.fa(a);if(c){c.setAttribute(this.J,b);this.u[b]=this.u[a];delete this.u[a]}},De:function(){if(this.g.click){var a=dhx.toFunctor(this.g.click);a&&a.call&&a.apply(this,arguments)}},
fa:function(a){if(this.u)return this.u[a];this.u={};for(var b=this.i.childNodes,c=0;c<b.length;c++){var d=b[c].getAttribute(this.J);if(d)this.u[d]=b[c]}return this.fa(a)},locate:function(a){return dhx.html.locate(a,this.J)},showItem:function(a){var b=this.fa(a);if(b&&this.scrollTo){var c=this.i.scrollWidth-this.i.parentNode.offsetWidth;c=Math.abs(b.offsetLeft-this.i.offsetLeft);var d=this.i.scrollHeight-this.i.parentNode.offsetHeight;d=Math.abs(b.offsetTop-this.i.offsetTop);this.scrollTo(c,d);this.Zd&&
this.Zd(a)}},render:function(a,b,c){if(this.isVisible(this.g.id))if(a){var d=this.fa(a);switch(c){case "update":if(!d)return;b=this.u[a]=this.Pc(b);dhx.html.insertBefore(b,d);dhx.html.remove(d);break;case "delete":if(!d)return;dhx.html.remove(d);delete this.u[a];break;case "add":b=this.u[a]=this.Pc(b);dhx.html.insertBefore(b,this.fa(this.data.next(a)),this.i);break;case "move":this.render(a,b,"delete");this.render(a,b,"add");break;default:break}}else if(this.callEvent("onBeforeRender",[this.data])){(this.wg||
this.i).innerHTML=this.data.getRange().map(this.ya,this).join("");this.u=null;this.callEvent("onAfterRender",[])}}};
dhx.VirtualRenderStack={m:function(){this.u={};this.i.style.overflowY="scroll";dhx.event(this.i,"scroll",dhx.bind(this.Xd,this));dhx.event(window,"resize",dhx.bind(function(){this.render()},this));this.mb=[];this.attachEvent("onItemRender",function(a){a.$template=="loading"&&this.mb.push(this.data.id(a))})},fa:function(a){return this.u[a]},show:function(a){var b=this.rd(),c=this.data.indexById(a);a=Math.floor(c/b.oc)*b.Qa;this.i.scrollTop=a},render:function(a,b,c){if(a){var d=this.fa(a);switch(c){case "update":if(!d)return;
a=this.u[a]=this.Pc(b);dhx.html.insertBefore(a,d);dhx.html.remove(d);break;default:this.Vf();break}}else if(this.callEvent("onBeforeRender",[this.data])){this.u={};this.Xd(null,true);this.pe=false;this.callEvent("onAfterRender",[])}},Vf:function(){if(!this.pe){this.pe=true;window.setTimeout(dhx.bind(function(){this.render()},this),1)}},gc:function(a){var b=document.createElement("DIV");b.style.cssText="height:"+a+"px; width:100%; overflow:hidden;";return b},Xd:function(a,b){this.mb=[];var c=this.rd();
if(!this.i.firstChild||b){this.i.innerHTML="";this.i.appendChild(this.gc(c.yf));this.oa=[this.i.firstChild]}for(a=c.na;a<=c.vc;){for(;this.oa[a]&&this.oa[a].bf&&a<=c.vc;)a++;if(a>c.vc)break;for(var d=a;!this.oa[d];)d--;var e=this.oa[d],f=a*c.oc+(this.data.min||0);if(f>(this.data.max||Infinity))break;var g=Math.min(f+c.oc-1,this.data.max||Infinity),h=this.gc(c.Qa),j=this.data.getIndexRange(f,g);if(!j.length)break;h.innerHTML=j.map(this.ya,this).join("");for(var k=0;k<j.length;k++)this.u[this.data.idByIndex(f+
k)]=h.childNodes[k];var i=parseInt(e.style.height,10);j=(a-d)*c.Qa;var m=i-j-c.Qa;dhx.html.insertBefore(h,j?e.nextSibling:e,this.i);this.oa[a]=h;h.bf=true;if(j<=0&&m>0){e.style.height=m+"px";this.oa[a+1]=e}else{if(j<0)dhx.html.remove(e);else e.style.height=j+"px";if(m>0){var l=this.oa[a+1]=this.gc(m);dhx.html.insertBefore(l,h.nextSibling,this.i)}}a++}if(this.mb.length){var n=this.indexById(this.mb[0]),o=this.indexById(this.mb.pop())+1;if(o>n){if(!this.callEvent("onDataRequest",[n,o-n]))return false;
this.data.feed.call(this,n,o-n)}}},rd:function(){var a=this.i.scrollTop,b=Math.max(this.i.scrollWidth,this.i.offsetWidth)-18,c=this.i.offsetHeight,d=this.pc(),e=Math.floor(b/d.x)||1,f=Math.floor(a/d.y);c=Math.ceil((c+a)/d.y)-1;var g=this.data.max?this.data.max-this.data.min:this.data.dataCount(),h=Math.ceil(g/e)*d.y;return{na:f,vc:c,Na:a,yf:h,Qa:d.y,oc:e}}};
dhx.SelectionModel={m:function(){this.r=dhx.toArray();this.data.attachEvent("onStoreUpdated",dhx.bind(this.Pe,this));this.data.attachEvent("onStoreLoad",dhx.bind(this.Oe,this));this.data.attachEvent("onAfterFilter",dhx.bind(this.Ne,this))},Ne:function(){for(var a=this.r.length-1;a>=0;a--){if(this.data.indexById(this.r[a])<0)var b=this.r[a];var c=this.item(b);c&&delete c.$selected;this.r.splice(a,1);this.callEvent("onSelectChange",[b])}},Pe:function(a,b,c){if(c=="delete")this.r.remove(a);else if(!this.data.dataCount()&&
!this.data.R)this.r=dhx.toArray()},Oe:function(){this.g.select&&this.data.each(function(a){a.$selected&&this.select(a.id)},this)},Tb:function(a,b,c){if(!c&&!this.callEvent("onBeforeSelect",[a,b]))return false;this.data.item(a).$selected=b;if(c)c.push(a);else{b?this.r.push(a):this.r.remove(a);this.Fc(a)}return true},select:function(a,b,c){if(!a)return this.selectAll();if(a instanceof Array)for(var d=0;d<a.length;d++)this.select(a[d],b,c);else if(this.data.exists(a)){if(c&&this.r.length)return this.selectAll(this.r[this.r.length-
1],a);if(!b&&(this.r.length!=1||this.r[0]!=a)){this.de=true;this.unselectAll();this.de=false}if(this.isSelected(a))b&&this.unselect(a);else this.Tb(a,true)&&this.callEvent("onAfterSelect",[a])}},unselect:function(a){if(!a)return this.unselectAll();this.isSelected(a)&&this.Tb(a,false)},selectAll:function(a,b){var c=[];a=a||b?this.data.getRange(a||null,b||null):this.data.getRange();a.each(function(d){var e=this.data.item(d.id);if(!e.$selected){this.r.push(d.id);this.Tb(d.id,true,c)}return d.id},this);
this.Fc(c)},unselectAll:function(){var a=[];this.r.each(function(b){this.Tb(b,false,a)},this);this.r=dhx.toArray();this.Fc(a)},isSelected:function(a){return this.r.find(a)!=-1},getSelected:function(a){switch(this.r.length){case 0:return a?[]:"";case 1:return a?[this.r[0]]:this.r[0];default:return[].concat(this.r)}},rf:function(a){return a.length>100||a.length>this.data.dataCount/2},Fc:function(a){if(typeof a!="object")a=[a];if(a.length){if(this.rf(a))this.data.refresh();else for(var b=0;b<a.length;b++)this.render(a[b],
this.data.item(a[b]),"update");this.de||this.callEvent("onSelectChange",[a])}}};
dhx.EditAbility={m:function(){this.$a=this.da=null;this.attachEvent("onEditKeyPress",function(a,b,c){if(a==13&&!c)this.stopEdit();else a==27&&this.stopEdit(true)});this.attachEvent("onBeforeRender",function(){this.stopEdit()});this.data.attachEvent("onClearAll",dhx.bind(function(){this.$a=this.da=null},this))},isEdit:function(){return this.da},edit:function(a){if(this.stopEdit(false,a))if(this.callEvent("onBeforeEditStart",[a])){var b=this.data.item(a);if(!b.$template){b.$template="Edit";this.data.refresh(a);
this.da=a;this.Yf(a);this.$a(true,b);this.callEvent("onAfterEditStart",[a])}}},stopEdit:function(a,b){if(!this.da)return true;if(this.da==b)return false;if(!this.callEvent("onBeforeEditStop",[this.da]))return false;var c=this.data.item(this.da);c.$template=null;a||this.$a(false,c);a=this.da;this.$a=this.da=null;this.data.refresh(a);this.callEvent("onAfterEditStop",[a]);return true},Yf:function(a){a=this.fa(a);var b="",c="",d=[];if(a){var e=a.getElementsByTagName("*"),f="";for(a=0;a<e.length;a++)if(e[a].nodeType==
1&&(f=e[a].getAttribute("bind"))){b+="els["+d.length+"].value="+f+";";c+=f+"=els["+d.length+"].value;";d.push(e[a]);e[a].className+=" dhx_allow_selection";e[a].onselectstart=this.ze}e=null}b=Function("obj","els",b);c=Function("obj","els",c);this.$a=function(g,h){if(g){b(h,d);d.length&&d[0].select&&d[0].select()}else c(h,d)}},ze:function(a){return(a||event).cancelBubble=true}};dhx.keyPressTimeout=200;
dhx.KeyEvents={m:function(){dhx.event(this.k,"keyup",this.Ef,this)},Ef:function(a){a=a||event;var b=a.which||a.keyCode;this.callEvent(this.da?"onEditKeyPress":"onKeyPress",[b,a.ctrlKey,a.shiftKey,a]);dhx.Cd&&window.clearTimeout(dhx.Cd);dhx.Cd=window.setTimeout(dhx.bind(this.Ff,this),dhx.keyPressTimeout)},Ff:function(){this.callEvent("onTimedKeyPress",[])}};
dhx.MouseEvents={m:function(){this.on_click&&dhx.event(this.k,"click",this.Bf,this);this.on_context&&dhx.event(this.k,"contextmenu",this.Cf,this);this.on_dblclick&&dhx.event(this.k,"dblclick",this.Df,this);if(this.on_mouse_move){dhx.event(this.k,"mousemove",this.Nd,this);dhx.event(this.k,dhx.env.isIE?"mouseleave":"mouseout",this.Nd,this)}},Bf:function(a){return this.eb(a,this.on_click,"ItemClick")},Df:function(a){return this.eb(a,this.on_dblclick,"ItemDblClick")},Cf:function(a){if(this.eb(a,this.on_context,
"BeforeContextMenu")){this.eb(a,{},"AfterContextMenu");return dhx.html.preventEvent(a)}},Nd:function(a){if(dhx.env.isIE)a=document.createEventObject(event);this.Id&&window.clearTimeout(this.Id);this.callEvent("onMouseMoving",[a]);this.Id=window.setTimeout(dhx.bind(function(){a.type=="mousemove"?this.Gf(a):this.Hf(a)},this),500)},Gf:function(a){this.eb(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},Hf:function(a){this.callEvent("onMouseOut",[a||event])},eb:function(a,b,
c){a=a||event;for(var d=a.target||a.srcElement,e="",f=null,g=false;d&&d.parentNode;){if(!g&&d.getAttribute)if(f=d.getAttribute(this.J)){d.getAttribute("userdata")&&this.callEvent("onLocateData",[f,d]);if(!this.callEvent("on"+c,[f,a,d]))return;g=true}if(e=d.className){e=e.split(" ");e=e[0]||e[1];if(b[e]){var h=b[e].call(this,a,f||dhx.html.locate(a,this.J),d);if(typeof h!="undefined"&&h!==true)return}}d=d.parentNode}return g}};
dhx.DataMove={m:function(){},copy:function(a,b,c,d){var e=this.item(a);if(e){if(c)e=c.externalData(e);c=c||this;return c.add(c.externalData(e,d),b)}},move:function(a,b,c,d){if(a instanceof Array)for(var e=0;e<a.length;e++){var f=(c||this).indexById(this.move(a[e],b,c,d?d[e]:null));if(a[e+1])b=f+(this.indexById(a[e+1])<f?0:1)}else{var g=a;if(!(b<0))if(e=this.item(a)){if(!c||c==this)this.data.move(this.indexById(a),b);else{if(!d||c.item(d))d=dhx.uid();g=c.add(c.externalData(e,d),b);this.remove(a)}return g}}},
moveUp:function(a,b){return this.move(a,this.indexById(a)-(b||1))},moveDown:function(a,b){return this.moveUp(a,(b||1)*-1)},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.dataCount()-1)},externalData:function(a,b){var c=dhx.extend({},a);c.id=b||dhx.uid();c.$selected=c.$template=null;return c}};
dhx.DragControl={ca:dhx.toArray(["dummy"]),addDrop:function(a,b,c){a=dhx.toNode(a);a.dhx_drop=this.pd(b);if(c)a.dhx_master=true},pd:function(a){a=a||dhx.DragControl;var b=this.ca.find(a);if(b<0){b=this.ca.length;this.ca.push(a)}return b},addDrag:function(a,b){a=dhx.toNode(a);a.dhx_drag=this.pd(b);dhx.event(a,"mousedown",this.Mf,a)},Mf:function(a){if(dhx.DragControl.ha){dhx.DragControl.Cc();dhx.DragControl.destroyDrag()}dhx.DragControl.ha=this;dhx.DragControl.Xa=dhx.event(document.body,"mousemove",
dhx.DragControl.ig);dhx.DragControl.Ya=dhx.event(document.body,"mouseup",dhx.DragControl.Cc);a.cancelBubble=true;return false},Cc:function(){dhx.DragControl.Xa=dhx.eventRemove(dhx.DragControl.Xa);dhx.DragControl.Ya=dhx.eventRemove(dhx.DragControl.Ya)},ig:function(a){dhx.DragControl.Cc();if(dhx.DragControl.createDrag(a)){dhx.DragControl.sendSignal("start");dhx.DragControl.Xa=dhx.event(document.body,"mousemove",dhx.DragControl.Jd);dhx.DragControl.Ya=dhx.event(document.body,"mouseup",dhx.DragControl.jg);
dhx.DragControl.Jd(a)}},jg:function(a){dhx.DragControl.Xa=dhx.eventRemove(dhx.DragControl.Xa);dhx.DragControl.Ya=dhx.eventRemove(dhx.DragControl.Ya);if(dhx.DragControl.O){dhx.DragControl.onDrop(dhx.DragControl.ha,dhx.DragControl.O,this.Gb,a);dhx.DragControl.onDragOut(dhx.DragControl.ha,dhx.DragControl.O,null,a)}dhx.DragControl.destroyDrag();dhx.DragControl.sendSignal("stop")},Jd:function(a){var b=dhx.html.pos(a);dhx.DragControl.S.style.top=b.y+dhx.DragControl.top+"px";dhx.DragControl.S.style.left=
b.x+dhx.DragControl.left+"px";if(dhx.DragControl.ee)dhx.DragControl.ee=false;else dhx.DragControl.Ge(a.srcElement||a.target,a);a.cancelBubble=true;return false},Ge:function(a,b){for(;a&&a.tagName!="BODY";){if(a.dhx_drop){if(this.O&&(this.O!=a||a.dhx_master))this.onDragOut(this.ha,this.O,a,b);if(!this.O||this.O!=a||a.dhx_master){this.O=null;if(this.Gb=this.onDragIn(dhx.DragControl.ha,a,b))this.O=a;return}return}a=a.parentNode}if(this.O)this.O=this.Gb=this.onDragOut(this.ha,this.O,null,b)},sendSignal:function(a){dhx.DragControl.active=
a=="start"},getMaster:function(a){return this.ca[a.dhx_drag||a.dhx_drop]},getContext:function(){return this.Ab},getNode:function(){return this.S},createDrag:function(a){var b=dhx.DragControl.ha;dhx.DragControl.Ab={};var c=this.ca[b.dhx_drag],d;if(c.onDragCreate){d=c.onDragCreate(b,a);if(!d)return false;d.style.position="absolute";d.style.zIndex=dhx.ui.zIndex()}else{var e=dhx.DragControl.onDrag(b,a);if(!e)return false;d=document.createElement("DIV");d.innerHTML=e;d.className="dhx_drag_zone";document.body.appendChild(d)}d.onmousemove=
dhx.DragControl.hg;if(!dhx.DragControl.Ab.from)dhx.DragControl.Ab={source:b,from:b};dhx.DragControl.S=d;return true},hg:function(){dhx.DragControl.ee=true},destroyDrag:function(){var a=dhx.DragControl.ha,b=this.ca[a.dhx_drag];b&&b.onDragDestroy?b.onDragDestroy(a,dhx.DragControl.S):dhx.html.remove(dhx.DragControl.S);dhx.DragControl.Gb=dhx.DragControl.ha=dhx.DragControl.O=dhx.DragControl.S=null},top:5,left:5,onDragIn:function(a,b,c){var d=this.ca[b.dhx_drop];if(d.onDragIn&&d!=this)return d.onDragIn(a,
b,c);b.className+=" dhx_drop_zone";return b},onDragOut:function(a,b,c,d){var e=this.ca[b.dhx_drop];if(e.onDragOut&&e!=this)return e.onDragOut(a,b,c,d);b.className=b.className.replace("dhx_drop_zone","");return null},onDrop:function(a,b,c,d){var e=this.ca[b.dhx_drop];dhx.DragControl.Ab.from=dhx.DragControl.getMaster(a);if(e.onDrop&&e!=this)return e.onDrop(a,b,c,d);b.appendChild(a)},onDrag:function(a,b){var c=this.ca[a.dhx_drag];if(c.onDrag&&c!=this)return c.onDrag(a,b);return"<div style='"+a.style.cssText+
"'>"+a.innerHTML+"</div>"}};dhx.Movable={move_setter:function(a){if(a){this.Kb=dhx.copy(this.Kb);this.Kb.master=this;dhx.DragControl.addDrag(this.A,this.Kb)}},Kb:{onDragCreate:function(a,b){var c=dhx.html.offset(a);a=dhx.html.pos(b);dhx.DragControl.top=c.y-a.y;dhx.DragControl.left=c.x-a.x;return dhx.toNode(this.master.h)},onDragDestroy:function(){dhx.DragControl.top=dhx.DragControl.left=5}}};
dhx.Scrollable={m:function(a){if(a&&!a.scroll&&this.If)return this.i=this.i||this.k;(this.i||this.k).appendChild(dhx.html.create("DIV",{"class":"dhx_scroll_cont"},""));this.i=(this.i||this.k).firstChild},scrollSize:dhx.Touch?0:18,scroll_setter:function(a){if(!a)return false;if(dhx.Touch){a=a=="x"?"x":a=="xy"?"xy":"y";this.i.setAttribute("touch_scroll",a);this.attachEvent&&this.attachEvent("onAfterRender",dhx.bind(this.Sf,this));this.g.touch_scroll=true}else this.i.parentNode.style.overflowY=a?"scroll":
"";return a},scrollTo:function(a,b){if(dhx.Touch){b=Math.max(0,Math.min(b,this.i.offsetHeight-this.w));a=Math.max(0,Math.min(a,this.i.offsetWidth-this.q));dhx.Touch.wa(this.i,-a,-b,this.g.scrollSpeed||"100ms")}else{this.i.parentNode.scrollLeft=a;this.i.parentNode.scrollTop=b}},Sf:function(){if(this.g.scroll.indexOf("x")!=-1&&!this.nf){this.i.style.width=this.q+"px";this.i.style.width=this.i.scrollWidth+"px"}if(dhx.Touch&&this.g.touch_scroll){dhx.Touch.Ua();dhx.Touch.Ka();dhx.Touch.wa(this.i,0,0,0)}}};
dhx.ActiveContent={m:function(a){if(a.activeContent){this.F.push(this.of);this.ob={};this.pb={};this.Ra={};this.bc={};for(var b in a.activeContent){this[b]=this.we(b);if(a.activeContent[b].earlyInit){var c=dhx.L;dhx.L=null;this[b].call(this,{},this,a.activeContent);dhx.L=c}}}},of:function(){if(this.filter){for(var a in this.g.activeContent){this.type[a]=this[a];this[a]=this.uf(a)}this.type.masterUI=this}},uf:function(a){return function(b){var c=this.bc[a],d=c.g.id;b=this.fa(b).getElementsByTagName("DIV");
for(var e=0;e<b.length;e++)if(b[e].getAttribute("view_id")==d){c.h=c.i=b[e];break}return c}},kf:function(a,b,c){return function(d){if(d)for(d=d.target||d.srcElement;d;){if(d.getAttribute&&d.getAttribute("view_id")){a.i=a.h=d;if(c.locate){var e=c.locate(d.parentNode);e=c.Ra[b][e];a.g.value=e}return d}d=d.parentNode}return a.h}},dg:function(a,b){return function(c){var d=b.data;if(b.filter){var e=b.locate(this.h.parentNode);d=b.item(e);b.pb[a][e]=this.h.outerHTML||(new XMLSerializer).serializeToString(this.h);
b.Ra[a][e]=c}d[a]=c}},we:function(a){return function(b,c,d){var e=c.ob?c:c.masterUI;if(!e.ob[a]){var f=document.createElement("DIV");d=d||e.g.activeContent;var g=dhx.ui(d[a],f);g.getNode=e.kf(g,a,e);g.attachEvent("onChange",e.dg(a,e));e.bc[a]=g;e.ob[a]=f.innerHTML;e.pb[a]={};e.Ra[a]={}}if(e.filter&&b[a]!=e.Ra[a]&&!dhx.isNotDefined(b[a])){g=e.bc[a];g.blockEvent();g.setValue(b[a]);g.unblockEvent();e.Ra[a][b.id]=b[a];e.pb[a][b.id]=g.h.outerHTML||(new XMLSerializer).serializeToString(g.h)}return e.pb[a][b.id]||
e.ob[a]}}};
(function(){var a={};dhx.Template=function(b){if(typeof b=="function")return b;if(a[b])return a[b];b=(b||"").toString();if(b.indexOf("->")!=-1){b=b.split("->");switch(b[0]){case "html":b=dhx.html.getValue(b[1]);break;case "http":b=(new dhx.ajax).sync().get(b[1],{uid:dhx.uid()}).responseText;break;default:break}}b=(b||"").toString();b=b.replace(/(\r\n|\n)/g,"\\n");b=b.replace(/(\")/g,'\\"');b=b.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');b=b.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");
b=b.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj,common):"")+"');b=b.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\"");b=b.replace(/#([$a-z0-9_\[\]]+)#/gi,"\"+(obj.$1||'')+\"");b=b.replace(/\{obj\}/g,'"+obj+"');b=b.replace(/\{-obj/g,"{obj");b=b.replace(/\{-common/g,"{common");b='return "'+b+'";';try{Function("obj","common",b)}catch(c){debugger}return a[b]=Function("obj","common",b)};dhx.Template.empty=function(){return""};dhx.Template.bind=function(b){return dhx.bind(dhx.Template(b),
this)};dhx.Type=function(b,c){if(b.zb){if(!b.Za)b.Za=[];b.Za.push(c)}else{if(typeof b=="function")b=b.prototype;if(!b.types){b.types={"default":b.type};b.type.name="default"}var d=c.name,e=b.type;if(d)e=b.types[d]=dhx.copy(b.type);for(var f in c)e[f]=f.indexOf("template")===0?dhx.Template(c[f]):c[f];return d}}})();
dhx.AtomRender={ya:function(a){return this.g.template(a,this)},render:function(){if(this.isVisible(this.g.id)){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data)this.i.innerHTML=this.ya(this.data);this.callEvent&&this.callEvent("onAfterRender",[])}return true}return false},template_setter:dhx.Template};
dhx.SingleRender=dhx.proto({ya:function(a){return this.type.templateStart(a,this.type)+this.type.template(a,this.type)+this.type.templateEnd(a,this.type)},customize:function(a){dhx.Type(this,a)}},dhx.AtomRender);dhx.ajax=function(a,b,c){if(arguments.length!==0){var d=new dhx.ajax;if(c)d.master=c;d.get(a,null,b)}if(!this.getXHR)return new dhx.ajax;return this};
dhx.ajax.prototype={getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,b,c){var d=this.getXHR();if(typeof c=="function")c=[c];if(typeof b=="object"){var e=[];for(var f in b){var g=b[f];if(g===null||g===dhx.undefined)g="";e.push(f+"="+encodeURIComponent(g))}b=e.join("&")}if(b&&!this.post){a=a+(a.indexOf("?")!=-1?"&":"?")+b;b=null}d.open(this.post?"POST":"GET",a,!this.ng);this.post&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var h=this;d.onreadystatechange=function(){if(!d.readyState||d.readyState==4){if(c&&h)for(var j=0;j<c.length;j++)if(c[j])c[j].call(h.master||h,d.responseText,d.responseXML,d);c=h=h.master=null}};d.send(b||null);return d},get:function(a,b,c){this.post=false;return this.send(a,b,c)},post:function(a,b,c){this.post=true;return this.send(a,b,c)},sync:function(){this.ng=true;return this}};
dhx.AtomDataLoader={m:function(a){this.data={};this.g.datatype=a.datatype||"json";this.F.push(this.tf)},tf:function(){this.Td=true;this.g.url&&this.url_setter(this.g.url);this.g.data&&this.data_setter(this.g.data)},url_setter:function(a){if(!this.Td)return a;this.load(a,this.g.datatype);return a},data_setter:function(a){if(!this.Td)return a;this.parse(a,this.g.datatype);return true},load:function(a,b,c){this.callEvent("onXLS",[]);if(typeof b=="string"){this.data.driver=dhx.DataDriver[b];b=c}else this.data.driver=
dhx.DataDriver.json;dhx.ajax(a,[this.Mb,b],this)},parse:function(a,b){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[b||"json"];this.Mb(a,null)},Mb:function(a,b){var c=this.data.driver,d=c.getRecords(c.toObject(a,b))[0];this.data=c?c.getDetails(d):a;this.callEvent("onXLE",[])},ad:function(a){if(!this.g.dataFeed||this.zd||!a)return true;var b=this.g.dataFeed;b=b+(b.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a);this.callEvent("onXLS",[]);dhx.ajax(b,function(c){this.zd=
true;this.setValues(dhx.DataDriver.json.toObject(c)[0]);this.zd=false;this.callEvent("onXLE",[])},this);return false}};dhx.DataDriver={};dhx.DataDriver.json={toObject:function(a){a||(a="[]");if(typeof a=="string"){eval("dhx.temp="+a);return dhx.temp}return a},getRecords:function(a){if(a&&!(a instanceof Array))return[a];return a},getDetails:function(a){return a},getInfo:function(a){return{Ma:a.total_count||0,na:a.pos||0}}};
dhx.DataDriver.json_ext={toObject:function(a){a||(a="[]");if(typeof a=="string"){var b;eval("temp="+a);dhx.temp=[];var c=b.header;for(a=0;a<b.data.length;a++){for(var d={},e=0;e<c.length;e++)if(typeof b.data[a][e]!="undefined")d[c[e]]=b.data[a][e];dhx.temp.push(d)}return dhx.temp}return a},getRecords:function(a){if(a&&!(a instanceof Array))return[a];return a},getDetails:function(a){return a},getInfo:function(a){return{Ma:a.total_count||0,na:a.pos||0}}};
dhx.DataDriver.html={toObject:function(a){if(typeof a=="string"){var b=null;if(a.indexOf("<")==-1)b=dhx.toNode(a);if(!b){b=document.createElement("DIV");b.innerHTML=a}return b.getElementsByTagName(this.tag)}return a},getRecords:function(a){if(a.tagName)return a.childNodes;return a},getDetails:function(a){return dhx.DataDriver.xml.tagToObject(a)},getInfo:function(){return{Ma:0,na:0}},tag:"LI"};
dhx.DataDriver.jsarray={toObject:function(a){if(typeof a=="string"){eval("dhx.temp="+a);return dhx.temp}return a},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{Ma:0,na:0}}};
dhx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{Ma:0,na:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","};
dhx.DataDriver.xml={toObject:function(a,b){if(b&&(b=this.checkResponse(a,b)))return b;if(typeof a=="string")return this.fromString(a);return a},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{Ma:a.documentElement.getAttribute("total_count")||0,na:a.documentElement.getAttribute("pos")||0}},xpath:function(a,b){if(window.XPathResult){var c=a;if(a.nodeName.indexOf("document")==-1)a=a.ownerDocument;
var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null);for(a=e.iterateNext();a;){d.push(a);a=e.iterateNext()}return d}else{d=true;try{if(typeof a.selectNodes=="undefined")d=false}catch(f){}if(d)return a.selectNodes(b);else{d=b.split("/").pop();return a.getElementsByTagName(d)}}},tagToObject:function(a,b){b=b||{};var c=false,d=a.attributes;if(d&&d.length){for(var e=0;e<d.length;e++)b[d[e].name]=d[e].value;c=true}d=a.childNodes;for(e=0;e<d.length;e++)if(d[e].nodeType==1){var f=d[e].tagName;if(typeof b[f]!=
"undefined"){b[f]instanceof Array||(b[f]=[b[f]]);b[f].push(this.tagToObject(d[e],{}))}else b[d[e].tagName]=this.tagToObject(d[e],{});c=true}if(!c)return this.nodeValue(a);b.value=this.nodeValue(a);return b},nodeValue:function(a){if(a.firstChild)return a.firstChild.data;return""},fromString:function(a){if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");b.loadXML(a);return b}},checkResponse:function(a,b){if(b&&
b.firstChild&&b.firstChild.tagName!="parsererror")return b;if(a=this.fromString(a.replace(/^[\s]+/,"")))return a}};
dhx.Settings={m:function(){this.g=this.config={}},define:function(a,b){if(typeof a=="object")return this.Qd(a);return this.hd(a,b)},hd:function(a,b){var c=this[a+"_setter"];return this.g[a]=c?c.call(this,b,a):b},Qd:function(a){if(a)for(var b in a)this.hd(b,a[b])},fb:function(a,b){var c={};if(b)c=dhx.extend(c,b);typeof a=="object"&&!a.tagName&&dhx.extend(c,a,true);this.Qd(c)},H:function(a,b){for(var c in b)switch(typeof a[c]){case "object":a[c]=this.H(a[c]||{},b[c]);break;case "undefined":a[c]=b[c];
break;default:break}return a}};
dhx.DataLoader=dhx.proto({m:function(a){a=a||"";name="DataStore";this.data=a.datastore||new dhx.DataStore;this.Ec=this.data.attachEvent("onStoreLoad",dhx.bind(this.Ee,this))},load:function(a){dhx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed)this.data.feed=function(b,c){if(this.Ib)return this.Ib=[b,c];else this.Ib=true;this.load(a+(a.indexOf("?")==-1?"?":"&")+"posStart="+b+"&count="+c,function(){var d=this.Ib;this.Ib=false;typeof d=="object"&&this.data.feed.apply(this,d)})}},Mb:function(a,
b){this.data.Lf(this.data.driver.toObject(a,b));this.callEvent("onXLE",[]);if(this.Ec){this.data.detachEvent(this.Ec);this.Ec=null}},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhx.bind(function(b,c){if(this.g.dataFeed){var d={};if(b||d){if(typeof b=="function"){if(!c)return;b(c,d)}else d={text:c};this.clearAll();b=this.g.dataFeed;var e=[];for(var f in d)e.push("dhx_filter["+f+"]="+encodeURIComponent(d[f]));this.load(b+(b.indexOf("?")<0?"?":"&")+e.join("&"),this.g.datatype);
return false}}},this));return a},Ee:function(){if(this.g.ready){var a=dhx.toFunctor(this.g.ready);a&&a.call&&a.apply(this,arguments)}}},dhx.AtomDataLoader).prototype;dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhx.toArray()};
dhx.DataStore.prototype={setDriver:function(a){this.driver=dhx.DataDriver[a]},Lf:function(a){this.R&&this.filter();var b=this.driver.getInfo(a),c=this.driver.getRecords(a),d=(b.na||0)*1;if(d===0&&this.order[0])d=this.order.length;for(var e=0,f=0;f<c.length;f++){var g=this.driver.getDetails(c[f]),h=this.id(g);if(!this.pull[h]){this.order[e+d]=h;e++}this.pull[h]=g;this.extraParser&&this.extraParser(g)}for(f=0;f<b.Ma;f++)if(!this.order[f]){h=dhx.uid();g={id:h,$template:"loading"};this.pull[h]=g;this.order[f]=
h}this.callEvent("onStoreLoad",[this.driver,a]);this.refresh()},id:function(a){return a.id||(a.id=dhx.uid())},changeId:function(a,b){this.pull[b]=this.pull[a];this.pull[b].id=b;this.order[this.order.find(a)]=b;this.callEvent("onIdChange",[a,b]);this.Hc&&this.Hc(a,b)},item:function(a){return this.pull[a]},update:function(a,b){if(this.callEvent("onBeforeUpdate",[a,b])===false)return false;this.pull[a]=b;this.refresh(a)},refresh:function(a){this.fe||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],
"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a){this.fe=true;a.call(this);this.fe=false},getRange:function(a,b){a=a?this.indexById(a):this.startOffset||0;if(b)b=this.indexById(b);else{b=Math.min(this.endOffset||Infinity,this.dataCount()-1);if(b<0)b=0}if(a>b){var c=b;b=a;a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(b||Infinity,this.dataCount()-1);var c=dhx.toArray();for(a=a||0;a<=b;a++)c.push(this.item(this.order[a]));return c},dataCount:function(){return this.order.length},
exists:function(a){return!!this.pull[a]},move:function(a,b){if(!(a<0||b<0)){var c=this.idByIndex(a),d=this.item(c);this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,b));this.callEvent("onStoreUpdated",[c,d,"move"])}},scheme:function(a){this.kb=a},sync:function(a,b,c){if(typeof b!="function"){c=b;b=null}if(dhx.debug_bind)this.debug_sync_master=a;if(a.name!="DataStore")a=a.data;var d=dhx.bind(function(){this.order=dhx.toArray([].concat(a.order));this.R=null;this.pull=a.pull;b&&
this.silent(b);this.Pd&&this.Pd();if(c)c=false;else this.refresh()},this);a.attachEvent("onStoreUpdated",d);d()},add:function(a,b){if(this.kb){a=a||{};for(var c in this.kb)a[c]=a[c]||this.kb[c];this.kb.$init&&this.kb.$init(a)}c=this.id(a);var d=this.dataCount();if(dhx.isNotDefined(b)||b<0)b=d;if(b>d)b=Math.min(this.order.length,b);if(this.callEvent("onBeforeAdd",[c,a,b])===false)return false;if(this.exists(c))return null;this.pull[c]=a;this.order.insertAt(c,b);if(this.R){var e=this.R.length;if(!b&&
this.order.length)e=0;this.R.insertAt(c,e)}this.callEvent("onafterAdd",[c,b]);this.callEvent("onStoreUpdated",[c,a,"add"]);return c},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===false)return false;if(!this.exists(a))return null;b=this.item(a);this.order.remove(a);this.R&&this.R.remove(a);delete this.pull[a];this.callEvent("onafterdelete",[a]);this.callEvent("onStoreUpdated",[a,b,"delete"])}},clearAll:function(){this.pull=
{};this.order=dhx.toArray();this.R=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){return this.order[a]},indexById:function(a){return a=this.order.find(a)},next:function(a,b){return this.order[this.indexById(a)+(b||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,b){return this.order[this.indexById(a)-(b||1)]},sort:function(a,b,c){var d=a;if(typeof a=="function")d={as:a,dir:b};else if(typeof a=="string")d=
{by:a,dir:b,as:c};var e=[d.by,d.dir,d.as];if(this.callEvent("onbeforesort",e)){if(this.order.length){var f=dhx.sort.create(d),g=this.getRange(this.first(),this.last());g.sort(f);this.order=g.map(function(h){return this.id(h)},this)}this.refresh();this.callEvent("onaftersort",e)}},filter:function(a,b){if(this.callEvent("onBeforeFilter",[a,b])){if(this.R){this.order=this.R;delete this.R}if(this.order.length){if(a){var c=a;b=b||"";if(typeof a=="string"){a=dhx.Template(a);b=b.toString().toLowerCase();
c=function(g,h){return a(g).toLowerCase().indexOf(h)!=-1}}for(var d=dhx.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];c(this.item(f),b)&&d.push(f)}this.R=this.order;this.order=d}this.refresh();this.callEvent("onAfterFilter",[])}}},each:function(a,b){for(var c=0;c<this.order.length;c++)a.call(b||this,this.item(this.order[c]))},provideApi:function(a,b){this.debug_bind_master=a;b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});
for(var c=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync"],d=0;d<c.length;d++)a[c[d]]=dhx.methodPush(this,c[d])},serialize:function(){for(var a=this.order,b=[],c=0;c<a.length;c++)b.push(this.pull[a[c]]);return b}};
dhx.sort={create:function(a){return dhx.sort.dir(a.dir,dhx.sort.by(a.by,a.as))},as:{"int":function(a,b){a*=1;b*=1;return a>b?1:a<b?-1:0},string_strict:function(a,b){a=a.toString();b=b.toString();return a>b?1:a<b?-1:0},string:function(a,b){a=a.toString().toLowerCase();b=b.toString().toLowerCase();return a>b?1:a<b?-1:0}},by:function(a,b){if(!a)return b;if(typeof b!="function")b=dhx.sort.as[b||"string"];a=dhx.Template(a);return function(c,d){return b(a(c),a(d))}},dir:function(a,b){if(a=="asc")return b;
return function(c,d){return b(c,d)*-1}}};
dhx.BaseBind={bind:function(a,b,c){if(typeof a=="string")a=dhx.ui.get(a);a.getBindData||dhx.extend(a,dhx.BindSource);if(!this.xe){var d=this.render;if(this.filter){var e=this.g.id;this.data.Pd=function(){a.tb[e]=false}}this.render=function(){if(!this.Ad){this.Ad=true;this.callEvent("onBindRequest");this.Ad=false;return d.call(this)}};if(this.getValue||this.getValues)this.save=function(){this.validate&&!this.validate()||a.setBindData(this.getValue?this.getValue:this.getValues(),this.g.id)};this.xe=
true}a.addBind(this.g.id,b,c);this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){a.getBindData(this.g.id)});this.isVisible(this.g.id)&&this.refresh()}};
dhx.BindSource={m:function(){this.sb={};this.tb={};this.xc={};this.ye(this)},setBindData:function(a,b){if(b)this.xc[b]=true;if(this.setValue)this.setValue(a);else this.setValues?this.setValues(a):this.update(this.getCursor(),a);this.save&&this.save();if(b)this.xc[b]=false},getBindData:function(a,b){if(!this.tb[a]){var c=dhx.ui.get(a);if(c.isVisible(c.g.id)){this.tb[a]=true;this.cc(c,this.sb[a][0],this.sb[a][1]);b&&c.filter&&c.refresh()}}},addBind:function(a,b,c){this.sb[a]=[b,c]},ye:function(a){if(a.filter)dhx.extend(this,
dhx.CollectionBind);else a.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},Zb:function(){for(var a in this.sb)if(!this.xc[a]){this.tb[a]=false;this.getBindData(a,true)}},Wc:function(a,b,c){if(a.setValue)a.setValue(c?c[b]:c);else if(a.filter)a.data.silent(function(){this.filter(b,c)});else if(!c&&a.clear)a.clear();else a.ad(c)&&a.setValues(dhx.copy(c))}};
dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return true},m:function(a){a=(this.data=a)&&a.id?a.id:dhx.uid();this.g={id:a};dhx.ui.views[a]=this},setValue:function(a){this.data=a;this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);
dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return true},m:function(a){this.data=a||{};a=a&&a.id?a.id:dhx.uid();this.g={id:a};dhx.ui.views[a]=this},getValues:function(){return this.data},setValues:function(a){this.data=a;this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);
dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return true},m:function(a){this.data.provideApi(this,true);a=a&&a.id?a.id:dhx.uid();this.g.id=a;dhx.ui.views[a]=this},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.DataLoader,dhx.BaseBind,dhx.Settings);
dhx.ValueBind={m:function(){this.attachEvent("onChange",this.Zb)},cc:function(a,b,c){var d=this.getValue()||"";if(c)d=c(d);if(a.setValue)a.setValue(d);else if(a.filter)a.data.silent(function(){this.filter(b,d)});else{var e={};e[b]=d;a.ad(d)&&a.setValues(e)}}};dhx.RecordBind={m:function(){this.attachEvent("onChange",this.Zb)},cc:function(a,b){var c=this.getValues()||null;this.Wc(a,b,c)}};
dhx.CollectionBind={m:function(){this.Wa=null;this.attachEvent("onSelectChange",function(){this.setCursor(this.getSelected())});this.attachEvent("onAfterCursorChange",this.Zb);this.data.attachEvent("onStoreUpdated",dhx.bind(function(a){a&&a==this.getCursor()&&this.Zb()},this))},setCursor:function(a){if(a!=this.Wa){this.callEvent("onBeforeCursorChange",[this.Wa]);this.Wa=a;this.callEvent("onAfterCursorChange",[a])}},getCursor:function(){return this.Wa},cc:function(a,b){var c=this.item(this.getCursor())||
null;this.Wc(a,b,c)}};
dhx.Destruction={m:function(){dhx.destructors.push(this)},destructor:function(){this.destructor=function(){};if(this.j)for(var a=0;a<this.j.length;a++)this.j[a].destructor();delete dhx.ui.views[this.g.id];this.oa=this.u=null;this.S&&document.body.appendChild(this.S);this.S=null;if(this.k){this.k.innerHTML="";this.k.u=null}this.k=this.i=null;if(this.g.container&&this.h.parentNode)this.h.parentNode.parentNode.removeChild(this.h.parentNode);else this.h&&this.h.parentNode&&this.h.parentNode.removeChild(this.h);this.data=
null;this.D=this.Da={}}};dhx.destructors=[];dhx.event(window,"unload",function(){for(var a=0;a<dhx.destructors.length;a++)dhx.destructors[a].destructor();dhx.destructors=[];for(var b in dhx.D){a=dhx.D[b];if(a[0].removeEventListener)a[0].removeEventListener(a[1],a[2],false);else a[0].detachEvent&&a[0].detachEvent("on"+a[1],a[2]);delete dhx.D[b]}});
dhx.IdSpace={m:function(){var a=dhx.Ca;this.elements={};dhx.Ca=this;this.ke={};this.getTopParent=dhx.bind(function(){return this},this);this.F.push(function(){dhx.Ca=a;for(var b in this.elements){this.elements[b].mapEvent&&!this.elements[b].touchable&&this.elements[b].mapEvent({onbeforetabclick:this,onaftertabclick:this,onitemclick:this});this.elements[b].getTopParent=this.getTopParent}})},$$:function(a){return this.elements[a]},innerId:function(a){return this.ke[a]}};
(function(){var a=[],b=dhx.ui=function(c,d,e){var f=c;f=dhx.toNode(c.container||d||document.body);var g=c.g||f.j&&!e?c:b.Pa(c);if(f.appendChild){f.appendChild(g.h);!g.setPosition&&f==document.body&&a.push(g);c.skipResize||g.resize()}else if(f.Jc){g.getParent&&g.getParent&&g.getParent().Vd(g);f.Jc(g,e)}return g};dhx.ui.me=function(c){return c+(this.Kd[c]=(this.Kd[c]||0)+1)};dhx.ui.Kd={};dhx.ui.resize=function(){if(!dhx.ui.od)for(var c=0;c<a.length;c++)a[c].resize()};dhx.event(window,"resize",dhx.ui.resize);
b.jc={};b.delay=function(c){dhx.ui.jc[c.id]=c};dhx.ui.zIndex=function(){return dhx.ui.Rc++};dhx.ui.Rc=1;b.Pa=function(c){if(c.view){var d=c.view;delete c.view;return new b[d](c)}else return c.rows||c.cols?new b.layout(c):c.cells?new b.multiview(c):new b.template(c)};b.views={};b.get=function(c){if(!c)return null;if(b.views[c])return b.views[c];if(b.jc[c])return dhx.ui(b.jc[c]);var d=c;if(typeof c=="object")d=c.target||c.srcElement||c;return b.views[dhx.html.locate({target:dhx.toNode(d)},"view_id")]};
if(dhx.isNotDefined(window.$$))$$=b.get;dhx.protoUI({name:"baseview",m:function(c){if(!c.id)c.id=dhx.ui.me(this.name);this.L=dhx.L;dhx.L=null;this.k=this.h=dhx.html.create("DIV",{"class":"dhx_view"})},defaults:{width:-1,height:-1,gravity:1},getNode:function(){return this.h},getParent:function(){return this.L||null},isVisible:function(c){if(this.g.hidden&&c){if(!this.Ea){this.Ea=[];this.wc={}}if(!this.wc[c]){this.wc[c]=true;this.Ea.push(c)}return false}var d=this.getParent();if(d)return d.isVisible(c,
this.g.id);return true},container_setter:function(){return true},css_setter:function(c){this.h.className+=" "+c;return c},id_setter:function(c){if(dhx.Ca&&dhx.Ca!=this){var d=c;dhx.Ca.elements[c]=this;c=dhx.ui.me(this.name);dhx.Ca.ke[c]=d}b.views[c]=this;this.h.setAttribute("view_id",c);return c},l:function(c,d){if(this.Z&&this.Z[0]==c&&this.Z[1]==d)return false;this.Z=[c,d];this.q=c;this.q=c-(this.g.scroll?dhx.Scrollable.scrollSize:0);this.w=d;this.h.style.width=c+"px";this.h.style.height=d+"px";
return true},n:function(){var c=this.g.width,d=this.g.height,e,f;e=f=this.g.gravity;if(c==-1)c=0;else{e=0;c+=this.g.scroll?dhx.Scrollable.scrollSize:0}if(d==-1)d=0;else f=0;return[e,c,f,d]},show:function(c){if(this.getParent()){var d=this.getParent();if(!c&&this.g.animate)if(d.g.animate)c=dhx.extend(d.g.animate?dhx.extend({},d.g.animate):{},this.g.animate,true);var e=arguments.length<2;if(e?d.La:d.bb)(e?d.La:d.bb).call(d,this,c)}},hidden_setter:function(c){c&&this.hide();return this.g.hidden},hide:function(){this.show(null,
true)},resize:function(){var c=this.h;if(!this.L)c=c.parentNode;if(!this.h.parentNode)return false;var d=this.h.parentNode.offsetWidth,e=this.h.parentNode.offsetHeight,f=this.n();d=f[0]?Math.max(d,f[1]):Math.max(f[1],d);e=f[2]?Math.max(e,f[3]):Math.max(f[3],e);this.l(d,e)}},dhx.Settings,dhx.Destruction,dhx.BaseBind);dhx.protoUI({name:"baselayout",m:function(){this.F.push(this.T);this.i=this.k},rows_setter:function(c){this.s=1;this.gd="";this.W=c},cols_setter:function(c){this.s=0;this.gd="left";this.W=
c},Vd:function(c){dhx.PowerArray.removeAt.call(this.j,dhx.PowerArray.find.call(this.j,c));this.jb()},Jc:function(c,d){if(dhx.isNotDefined(d)){for(var e=0;e<this.j.length;e++)this.j[e].destructor();this.W=c;this.T()}else{if(typeof d=="number"){if(d<0||d>this.j.length)d=this.j.length;var f=(this.j[d]||{}).h;dhx.PowerArray.insertAt.call(this.j,c,d);dhx.html.insertBefore(c.h,f,this.i)}else{e=dhx.ui.get(d);d=dhx.PowerArray.find.call(this.j,e);e.h.parentNode.insertBefore(c.h,e.h);e.destructor();this.j[d]=
c}c.h.style.cssFloat=this.gd;this.j[d].L=this}this.jb()},reconstruct:function(){for(var c=0;c<this.j.length;c++)dhx.html.remove(this.j[c].h);this.T();this.l(this.Z[0],this.Z[1])},bb:function(c,d,e){if(!c.g.hidden){c.g.hidden=true;dhx.html.remove(c.h);this.Fb++;e||this.jb()}},jb:function(){if(this.Z){this.n();this.l(this.h.offsetWidth,this.h.offsetHeight)}},index:function(c){if(c.g)c=c.g.id;for(var d=0;d<this.j.length;d++)if(this.j[d].g.id==c)return d;return-1},La:function(c,d,e){if(c.g.hidden){c.g.hidden=
false;dhx.html.insertBefore(c.h,(this.j[this.index(c)+1]||{}).h,this.i||this.h);this.Fb--;e||this.jb()}},showBatch:function(c){if(this.g.visibleBatch!=c){this.g.visibleBatch=c;for(var d=[],e=0;e<this.j.length;e++){this.j[e].g.batch||d.push(this.j[e]);this.j[e].g.batch==c?d.push(this.j[e]):this.bb(this.j[e],null,true)}for(e=0;e<d.length;e++)this.La(d[e],null,true);this.jb()}},T:function(c){c=this.W||c;this.W=null;this.j=[];this.h.style.verticalAlign="top";for(var d=0;d<c.length;d++){dhx.L=this;this.j[d]=
b.Pa(c[d],this);if(!this.s)this.j[d].h.style.cssFloat="left";if(this.g.visibleBatch&&this.g.visibleBatch!=this.j[d].g.batch&&this.j[d].g.batch)this.j[d].g.hidden=true;this.j[d].g.hidden||(this.i||this.k).appendChild(this.j[d].h)}},n:function(){var c=0,d=0,e=0,f=0;this.ka=[];for(var g=0;g<this.j.length;g++)if(!this.j[g].g.hidden){var h=this.ka[g]=this.j[g].n();if(this.s){c=Math.max(c,h[1]);e=Math.max(e,h[0]);d+=h[3];f+=h[2]}else{d=Math.max(d,h[3]);f=Math.max(f,h[2]);c+=h[1];e+=h[0]}}this.Jb=[e,c,f,
d];if(this.g.height>-1){d=this.g.height;f=0}if(this.g.width>-1){c=this.g.width;e=0}if(this.s){if(c)e=0;if(f)d=0}else{if(d)f=0;if(e)c=0}return[e,c,f,d]},l:function(c,d){dhx.ui.baseview.prototype.l.call(this,c,d);this.Xb(c,d)},Xb:function(c,d){for(var e=c-this.Jb[1],f=d-this.Jb[3],g=this.Jb[0],h=this.Jb[2],j=this.j.length-1,k=0;k<this.j.length;k++)if(!this.j[k].g.hidden){if(this.s){var i=c,m;if(this.ka[k][2]){m=Math.round(this.ka[k][2]*f/h);f-=m;h-=this.ka[k][2]}else{m=this.ka[k][3];if(k==j&&f>0)m+=
f}}else{m=d;if(this.ka[k][0]){i=Math.round(this.ka[k][0]*e/g);e-=i;g-=this.ka[k][0]}else{i=this.ka[k][1];if(k==j&&e>0)i+=e}}this.j[k].l(i,m)}}},dhx.ui.baseview);dhx.protoUI({name:"view",m:function(){this.k.style.border="1px solid #AEAEAE"},n:function(){var c=this.g.p,d=dhx.ui.baseview.prototype.n.call(this);if(!c)return d;var e=(c.left?0:1)+(c.right?0:1);c=(c.top?0:1)+(c.bottom?0:1);if(d[1]&&e)d[1]+=e;if(d[3]&&c)d[3]+=c;return d},l:function(c,d){var e=this.g.p;if(e){c-=(e.left?0:1)+(e.right?0:1);
d-=(e.top?0:1)+(e.bottom?0:1)}else this.k.style.border="0px solid #AEAEAE";return dhx.ui.baseview.prototype.l.call(this,c,d)}},dhx.ui.baseview);dhx.protoUI({name:"layout",m:function(){this.Fb=0},T:function(){this.h.className+=" dhx_layout_"+(this.g.type||"");var c=this.W;if(!this.g.p)this.g.p={top:true,left:true,right:true,bottom:true};for(var d=0;d<c.length;d++)c[d].p=dhx.copy(this.g.p);var e=false;if(this.g.type=="clean")e=true;if(this.s){for(d=1;d<c.length-1;d++)c[d].p.top=c[d].p.bottom=e;if(c.length>
1){if(this.g.type!="head")c[0].p.bottom=e;c[c.length-1].p.top=e}}else{for(d=1;d<c.length-1;d++)c[d].p.left=c[d].p.right=e;if(c.length>1){if(this.g.type!="head")c[0].p.right=e;c[c.length-1].p.left=e}}b.baselayout.prototype.T.call(this,c);for(d=0;d<c.length;d++){var f=this.j[d];e=f.g.p;if(e.top)f.h.style.borderTopWidth="0px";if(e.left)f.h.style.borderLeftWidth="0px";if(e.right)f.h.style.borderRightWidth="0px";if(e.bottom)f.h.style.borderBottomWidth="0px"}if(this.s)for(d=1;d<c.length;d++)this.j[d].h.style.marginTop=
this.db+"px";else for(d=1;d<c.length;d++)this.j[d].h.style.marginLeft=this.db+"px"},n:function(){var c=dhx.ui.baselayout.prototype.n.call(this),d=this.db*(this.j.length-this.Fb-1);if(this.s){if(c[3])c[3]+=d}else if(c[1])c[1]+=d;return c},l:function(c,d){dhx.ui.baseview.prototype.l.call(this,c,d);var e=this.db*(this.j.length-this.Fb-1);if(this.s)d-=e;else c-=e;b.baselayout.prototype.Xb.call(this,c,d)},type_setter:function(c){this.db=this.xf[c];return c},xf:{wide:4,clean:0,head:4,line:0},db:-1},dhx.ui.baselayout);
dhx.protoUI({name:"template",m:function(){this.attachEvent("onXLE",this.render);this.F.push(this.Sd)},setValues:function(c){this.data=c;this.render()},defaults:{template:dhx.Template.empty,loading:true},Sd:function(){this.Bc||this.render()},src_setter:function(c){this.Bc=true;this.callEvent("onXLS",[]);dhx.ajax(c,dhx.bind(function(d){this.g.template=dhx.Template(d);this.Bc=false;this.Sd();this.callEvent("onXLE",[])},this));return c},content_setter:function(c){if(c){this.Bc=true;this.i.appendChild(dhx.toNode(c))}},
refresh:function(){this.render()},waitMessage_setter:function(c){dhx.extend(this,dhx.ui.overlay);return c},If:true},dhx.Scrollable,dhx.AtomDataLoader,dhx.AtomRender,dhx.EventSystem,b.view);dhx.protoUI({name:"iframe",defaults:{loading:true},m:function(){this.i=this.k;this.k.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' src='about:blank'></iframe>"},load:function(c){this.src_setter(c)},src_setter:function(c){this.k.childNodes[0].src=c;this.callEvent("onXLS",[]);dhx.delay(this.cg,
this);return c},cg:function(){try{dhx.event(this.getWindow(),"load",dhx.bind(function(){this.callEvent("onXLS",[])},this))}catch(c){this.callEvent("onXLE",[])}},getWindow:function(){return this.k.childNodes[0].contentWindow},waitMessage_setter:function(c){dhx.extend(this,dhx.ui.overlay);return c}},b.view,dhx.EventSystem);dhx.ui.overlay={m:function(){if(dhx.isNotDefined(this.ua)&&this.attachEvent){this.attachEvent("onXLS",this.showOverlay);this.attachEvent("onXLE",this.hideOverlay);this.ua=null}},
showOverlay:function(){if(!this.ua){this.ua=dhx.html.create("DIV",{"class":"dhx_loading_overlay"},"");dhx.html.insertBefore(this.ua,this.h.firstChild,this.h)}},hideOverlay:function(){if(this.ua){dhx.html.remove(this.ua);this.ua=null}}};dhx.protoUI({name:"scrollview",defaults:{scroll:"x",scrollSpeed:"0ms"},m:function(){this.h.className+=" dhx_scrollview"},content_setter:function(c){this.Ba=dhx.ui.Pa(c);this.Ba.L=this;this.i.appendChild(this.Ba.h)},n:function(){this.Aa=this.Ba.n();if(this.g.scroll==
"x"&&this.Aa[3]>0)this.g.height=this.Aa[3];else if(this.g.scroll=="y"&&this.Aa[1]>0)this.g.width=this.Aa[1];return dhx.ui.view.prototype.n.call(this)},l:function(c,d){if(dhx.ui.view.prototype.l.call(this,c,d)){this.Ba.l(Math.max(this.Aa[1],this.q),Math.max(this.Aa[3],this.w));this.i.style.width=this.Ba.q+"px";this.i.style.height=this.Ba.w+"px"}}},dhx.Scrollable,b.view)})();dhx.ui.view.call(dhx);dhx.ui.layout.call(dhx);
dhx.protoUI({name:"proto",m:function(){this.data.provideApi(this,true);this.i=this.k;this.data.attachEvent("onStoreUpdated",dhx.bind(function(){this.render.apply(this,arguments)},this))},l:function(){dhx.ui.view.prototype.l.apply(this,arguments)&&this.render()}},dhx.RenderStack,dhx.DataLoader,dhx.ui.view,dhx.EventSystem,dhx.Settings);
dhx.protoUI({name:"dataview",m:function(){this.k.className+=" dhx_dataview";this.data.provideApi(this,true)},la:function(){this.g.height!="auto"&&dhx.extend(this,dhx.VirtualRenderStack)},defaults:{edit:false,select:"multiselect",type:"default",scroll:true},J:"dhx_f_id",on_click:{dhx_dataview_item:function(a,b){if(this.stopEdit(false,b))if(this.g.select)this.g.select=="multiselect"?this.select(b,a.ctrlKey,a.shiftKey):this.select(b)}},on_dblclick:{dhx_dataview_item:function(a,b){this.g.edit&&this.edit(b)}},
on_mouse_move:{},dragMarker:function(a){var b=this.fa(a.target);if(this.type.drag_marker){if(this.lc){this.lc.style.backgroundImage="";this.lc.style.backgroundRepeat=""}if(b){b.style.backgroundImage="url("+(dhx.image_path||"")+this.type.drag_marker+")";b.style.backgroundRepeat="no-repeat";this.lc=b}}if(b&&this.g.auto_scroll){var c=b.offsetTop,d=b.offsetHeight;b=this.i.scrollTop;var e=this.i.offsetHeight;if(c-d>0&&c-d*0.75<b)b=Math.max(c-d,0);else if(c+d/0.75>b+e)b+=d;this.i.scrollTop=b}return true},
type:{css:"default",template:"<div style='padding:10px; white-space:nowrap; overflow:hidden;'>#value#</div>",templateEdit:dhx.Template("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='#text#'></textarea></div>"),templateLoading:dhx.Template("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:139,height:22,margin:"0",padding:10,border:1,widthSize:function(a,b){return b.width+(b.width>-1?"px":"")},
heightSize:function(a,b){return b.height+(b.height>-1?"px":"")},templateStart:dhx.Template("<div dhx_f_id='#id#' class='dhx_dataview_item dhx_dataview_{common.css}_item{obj.$selected?_selected:}' style='width:{common.widthSize()}; height:{common.heightSize()}; padding:{common.padding}px; margin:{common.margin}px; float:left; overflow:hidden;'>"),templateEnd:dhx.Template("</div>")},xCount_setter:function(a){var b=this.pc();this.i.style.width=b.x*a+(this.g.height!="auto"?18:0)+"px";return a},yCount_setter:function(a){var b=
this.pc();this.i.style.height=b.y*a+"px";return a},pc:function(){var a=this.type,b=(a.border||0)+(a.padding||0)*2+(a.margin||0)*2;return{x:a.width+b,y:a.height+b}}},dhx.MouseEvents,dhx.KeyEvents,dhx.SelectionModel,dhx.EditAbility,dhx.Scrollable,dhx.ui.proto);dhx.Type(dhx.ui.dataview,{name:"FreeSize",css:"FreeSize",width:"auto",height:"auto"});dhx.ui.Map=function(a){this.J="map_"+dhx.uid();this.sf=a;this.sa=[]};
dhx.ui.Map.prototype={addRect:function(a,b,c){this.ed(a,"RECT",b,c)},addPoly:function(a,b){this.ed(a,"POLY",b)},ed:function(a,b,c,d){var e="";if(arguments.length==4)e="userdata='"+d+"'";this.sa.push("<area "+this.sf+"='"+a+"' shape='"+b+"' coords='"+c.join()+"' "+e+"></area>")},addSector:function(a,b,c,d,e,f,g){var h=[];h.push(d);h.push(Math.floor(e*g));for(var j=b;j<c;j+=Math.PI/18){h.push(Math.floor(d+f*Math.cos(j)));h.push(Math.floor((e+f*Math.sin(j))*g))}h.push(Math.floor(d+f*Math.cos(c)));h.push(Math.floor((e+
f*Math.sin(c))*g));h.push(d);h.push(Math.floor(e*g));return this.addPoly(a,h)},render:function(a){var b=dhx.html.create("DIV");b.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";a.appendChild(b);var c=dhx.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";b.innerHTML="<map id='"+this.J+"' name='"+this.J+"'>"+this.sa.join("\n")+"</map><img "+c+" class='dhx_map_img' usemap='#"+this.J+"'>";a.u=b;this.sa=
[]}};dhx.math={};dhx.math.pg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];dhx.math.toHex=function(a,b){a=parseInt(a,10);for(var c="";a>0;){c=this.pg[a%16]+c;a=Math.floor(a/16)}for(;c.length<b;)c="0"+c;return c};dhx.math.toFixed=function(a){if(a<10)return"0"+a;return a};dhx.chart={};
dhx.chart.area={pvt_render_area:function(a,b,c,d,e,f){var g=this.vb(a,b,c,d,e),h=Math.floor(g.cellWidth/2);if(b.length){a.globalAlpha=this.g.alpha.call(this,b[0]);a.fillStyle=this.g.color.call(this,b[0]);var j=this.ra(b[0],c,d,g),k=this.g.offset?c.x+g.cellWidth*0.5:c.x;a.beginPath();a.moveTo(k,d.y);a.lineTo(k,j);f.addRect(b[0].id,[k-h,j-h,k+h,j+h]);this.g.yAxis||this.renderTextAt(false,!this.g.offset?false:true,k,j-this.g.labelOffset,this.g.label(b[0]));for(var i=1;i<b.length;i++){var m=k+Math.floor(g.cellWidth*
i)-0.5,l=this.ra(b[i],c,d,g);a.lineTo(m,l);f.addRect(b[i].id,[m-h,l-h,m+h,l+h]);this.g.yAxis||this.renderTextAt(false,!this.g.offset&&i==b.length-1?"left":"center",m,l-this.g.labelOffset,this.g.label(b[i]))}a.lineTo(k+Math.floor(g.cellWidth*[b.length-1]),d.y);a.lineTo(k,d.y);a.fill()}}};
dhx.chart.stackedArea={pvt_render_stackedArea:function(a,b,c,d,e,f){var g=this.vb(a,b,c,d,e),h=Math.floor(g.cellWidth/2),j=[];if(b.length){a.globalAlpha=this.g.alpha.call(this,b[0]);a.fillStyle=this.g.color.call(this,b[0]);var k=e?b[0].$startY:d.y,i=this.g.offset?c.x+g.cellWidth*0.5:c.x,m=this.ra(b[0],c,d,g)-(e?d.y-k:0);j[0]=m;a.beginPath();a.moveTo(i,k);a.lineTo(i,m);f.addRect(b[0].id,[i-h,m-h,i+h,m+h]);this.g.yAxis||this.renderTextAt(false,true,i,m-this.g.labelOffset,this.g.label(b[0]));for(var l=
1;l<b.length;l++){var n=i+Math.floor(g.cellWidth*l)-0.5,o=this.ra(b[l],c,d,g)-(e?d.y-b[l].$startY:0);j[l]=o;a.lineTo(n,o);f.addRect(b[l].id,[n-h,o-h,n+h,o+h]);this.g.yAxis||this.renderTextAt(false,true,n,o-this.g.labelOffset,this.g.label(b[l]))}a.lineTo(i+Math.floor(g.cellWidth*[b.length-1]),k);if(e)for(l=b.length-1;l>=0;l--){n=i+Math.floor(g.cellWidth*l)-0.5;var r=b[l].$startY;a.lineTo(n,r)}else a.lineTo(i+Math.floor(g.cellWidth*(length-1))-0.5,k);a.lineTo(i,k);a.fill();for(l=0;l<b.length;l++)b[l].$startY=
j[l]}}};
dhx.chart.spline={pvt_render_spline:function(a,b,c,d,e){var f=this.vb(a,b,c,d,e);Math.floor(f.cellWidth/2);var g=[];if(b.length){var h=this.g.offset?c.x+f.cellWidth*0.5:c.x;for(e=0;e<b.length;e++){var j=!e?h:Math.floor(f.cellWidth*e)-0.5+h,k=this.ra(b[e],c,d,f);g.push({x:j,y:k})}var i=this.jf(g);for(e=0;e<g.length-1;e++){var m=g[e].x;c=g[e].y;var l=g[e+1].x,n=g[e+1].y;for(d=m;d<l;d++)this.C(a,d,this.rc(d,m,e,i.a,i.b,i.c,i.d),d+1,this.rc(d+1,m,e,i.a,i.b,i.c,i.d),this.g.line.color(b[e]),this.g.line.width);this.C(a,
l-1,this.rc(d,m,e,i.a,i.b,i.c,i.d),l,n,this.g.line.color(b[e]),this.g.line.width);this.mc(a,m,c,b[e],this.g.label(b[e]))}this.mc(a,l,n,b[e],this.g.label(b[e]))}},jf:function(a){var b,c,d,e,f,g,h,j,k;b=[];e=[];k=a.length;for(var i=0;i<k-1;i++){b[i]=a[i+1].x-a[i].x;e[i]=(a[i+1].y-a[i].y)/b[i]}c=[];d=[];c[0]=0;c[1]=2*(b[0]+b[1]);d[0]=0;d[1]=6*(e[1]-e[0]);for(i=2;i<k-1;i++){c[i]=2*(b[i-1]+b[i])-b[i-1]*b[i-1]/c[i-1];d[i]=6*(e[i]-e[i-1])-b[i-1]*d[i-1]/c[i-1]}e=[];e[k-1]=e[0]=0;for(i=k-2;i>=1;i--)e[i]=(d[i]-
b[i]*e[i+1])/c[i];f=[];g=[];h=[];j=[];for(i=0;i<k-1;i++){f[i]=a[i].y;g[i]=-b[i]*e[i+1]/6-b[i]*e[i]/3+(a[i+1].y-a[i].y)/b[i];h[i]=e[i]/2;j[i]=(e[i+1]-e[i])/(6*b[i])}return{a:f,b:g,c:h,d:j}},rc:function(a,b,c,d,e,f,g){return d[c]+(a-b)*(e[c]+(a-b)*(f[c]+(a-b)*g[c]))}};
dhx.chart.barH={pvt_render_barH:function(a,b,c,d,e,f){var g,h,j,k,i=d.x-c.x,m=!!this.g.yAxis,l=this.qc("h");g=l.max;h=l.min;var n=Math.floor((d.y-c.y)/b.length);e||this.jd(a,b,c,d,h,g,n);if(m){g=parseFloat(this.g.xAxis.end);h=parseFloat(this.g.xAxis.start)}var o=this.ab(h,g);k=o[0];j=o[1];var r=k?i/k:10;if(!m){var u=10;r=k?(i-u)/k:10}var q=parseInt(this.g.barWidth,10);if(q*this.z.length+4>n)q=n/this.z.length-4;var w=Math.floor((n-q*this.z.length)/2),p=typeof this.g.radius!="undefined"?parseInt(this.g.radius,
10):Math.round(q/5);if(q/2<p)p=q/2;var t=false,s=this.g.gradient;if(s&&typeof s!="function"){t=s;s=false}else if(s){s=a.createLinearGradient(c.x,c.y,d.x,c.y);this.g.gradient(s)}m||this.C(a,c.x-0.5,c.y,c.x-0.5,d.y,"#000000",1);for(d=0;d<b.length;d++){var v=parseFloat(this.g.value(b[d]));if(v>g)v=g;v-=h;v*=j;var x=c.x,y=c.y+w+d*n+(q+1)*e;if(v<0||this.g.yAxis&&v===0)this.renderTextAt(true,true,x+Math.floor(q/2),y,this.g.label(b[d]));else{m||(v+=u/r);var B=s||this.g.color.call(this,b[d]);if(this.g.border){a.beginPath();
a.fillStyle=B;this.qa(a,x,y,q,p,r,v,0);a.lineTo(x,0);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;a.beginPath();this.qa(a,x,y,q,p,r,v,0);a.fill()}a.globalAlpha=this.g.alpha.call(this,b[d]);a.fillStyle=s||this.g.color.call(this,b[d]);a.beginPath();var z=this.qa(a,x,y,q,p,r,v,this.g.border?1:0);if(s&&!t)a.lineTo(c.x+i,y+(this.g.border?1:0));a.fill();a.globalAlpha=1;if(t!==false){var A=this.Ub(a,c.x,y+q,c.x+r*v+2,y,t,B,"x");a.fillStyle=A.gradient;a.beginPath();z=this.qa(a,x,y+A.offset,q-A.offset*
2,p,r,v,A.offset);a.fill();a.globalAlpha=1}this.renderTextAt("middle",false,z[0]+3,parseInt(y+(z[1]-y)/2,10),this.g.label(b[d]));f.addRect(b[d].id,[x,y,z[0],z[1]],e)}}},qa:function(a,b,c,d,e,f,g,h){var j=0;if(e>f*g){var k=(e-f*g)/e;j=-Math.asin(k)+Math.PI/2}a.moveTo(b,c+h);var i=b+f*g-e-(e?0:h);e<f*g&&a.lineTo(i,c+h);f=c+e;e&&a.arc(i,f,e-h,-Math.PI/2+j,0,false);var m=c+d-e-(e?0:h),l=i+e-(e?h:0);a.lineTo(l,m);var n=i;e&&a.arc(n,m,e-h,0,Math.PI/2-j,false);var o=c+d-h;a.lineTo(b,o);a.lineTo(b,c+h);return[l,
o]},jd:function(a,b,c,d,e,f,g){this.Ue(a,b,c,d,e,f);this.Ve(a,b,c,d,g)},Ve:function(a,b,c,d,e){if(this.g.yAxis){var f=c.x-0.5,g=d.y+0.5,h=c.y;this.C(a,f,g,f,h,this.g.yAxis.color,1);for(a=0;a<b.length;a++)this.renderTextAt("middle",0,0,h+e/2+a*e,this.g.yAxis.template(b[a]),"dhx_axis_item_y",c.x-5);this.$d(c,d)}},Ue:function(a,b,c,d,e,f){var g,h={},j=this.g.xAxis;if(j){b=d.y+0.5;var k=c.x-0.5,i=d.x-0.5;this.C(a,k,b,i,b,j.color,1);if(j.step)g=parseFloat(j.step);if(typeof j.step=="undefined"||typeof j.start==
"undefined"||typeof j.end=="undefined"){h=this.Zc(e,f);e=h.start;f=h.end;g=h.step;this.g.xAxis.end=f;this.g.xAxis.start=e;this.g.xAxis.step=g}if(g!==0){for(var m=(i-k)*g/(f-e),l=0,n=e;n<=f;n+=g){if(h.fixNum)n=parseFloat((new Number(n)).toFixed(h.fixNum));var o=Math.floor(k+l*m)+0.5;n!=e&&j.lines&&this.C(a,o,b,o,c.y,this.g.xAxis.color,0.2);this.renderTextAt(false,true,o,b+2,j.template(n.toString()),"dhx_axis_item_x");l++}this.renderTextAt(true,false,k,d.y+this.g.padding.bottom-3,this.g.xAxis.title,
"dhx_axis_title_x",d.x-c.x);j.lines&&this.C(a,k,c.y-0.5,i,c.y-0.5,this.g.xAxis.color,0.2)}}}};
dhx.chart.stackedBarH={pvt_render_stackedBarH:function(a,b,c,d,e,f){var g,h,j,k,i=d.x-c.x,m=!!this.g.yAxis;h=this.sc(b);g=h.max;h=h.min;var l=Math.floor((d.y-c.y)/b.length);e||this.jd(a,b,c,d,h,g,l);if(m){g=parseFloat(this.g.xAxis.end);h=parseFloat(this.g.xAxis.start)}j=this.ab(h,g);k=j[0];j=j[1];var n=k?i/k:10;if(!m){var o=10;n=k?(i-o)/k:10}k=parseInt(this.g.barWidth,10);if(k+4>l)k=l-4;var r=Math.floor((l-k)/2),u=0,q=false,w=this.g.gradient;q=false;if(w=this.g.gradient)q=true;m||this.C(a,c.x-0.5,
c.y,c.x-0.5,d.y,"#000000",1);for(d=0;d<b.length;d++){if(!e)b[d].$startX=c.x;var p=parseFloat(this.g.value(b[d]));if(p>g)p=g;p-=h;p*=j;var t=c.x,s=c.y+r+d*l;if(e)t=b[d].$startX;if(p<0||this.g.yAxis&&p===0)this.renderTextAt(true,true,t+Math.floor(k/2),s,this.g.label(b[d]));else{m||(p+=o/n);var v=this.g.color.call(this,b[d]);if(this.g.border){a.beginPath();a.fillStyle=v;this.qa(a,t,s,k,u,n,p,0);a.lineTo(t,0);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;a.beginPath();this.qa(a,t,s,k,u,n,p,0);a.fill()}a.globalAlpha=
1;a.globalAlpha=this.g.alpha.call(this,b[d]);a.fillStyle=this.g.color.call(this,b[d]);a.beginPath();var x=this.qa(a,t,s,k,u,n,p,this.g.border?1:0);if(w&&!q)a.lineTo(c.x+i,s+(this.g.border?1:0));a.fill();if(q!==false){v=this.Ub(a,t,s+k,t,s,q,v,"x");a.fillStyle=v.gradient;a.beginPath();x=this.qa(a,t,s,k,u,n,p,0);a.fill();a.globalAlpha=1}this.renderTextAt("middle",true,b[d].$startX+(x[0]-b[d].$startX)/2-1,s+(x[1]-s)/2,this.g.label(b[d]));f.addRect(b[d].id,[b[d].$startX,s,x[0],x[1]],e);b[d].$startX=x[0]}}}};
dhx.chart.stackedBar={pvt_render_stackedBar:function(a,b,c,d,e,f){var g,h,j,k=d.y-c.y;j=!!this.g.yAxis;var i=!!this.g.xAxis;h=this.sc(b);g=h.max;h=h.min;var m=Math.floor((d.x-c.x)/b.length);e||this.nc(a,b,c,d,h,g,m);if(j){g=parseFloat(this.g.yAxis.end);h=parseFloat(this.g.yAxis.start)}g=this.ab(h,g);j=g[0];g=g[1];j=j?k/j:10;var l=parseInt(this.g.barWidth,10);if(l+4>m)l=m-4;var n=Math.floor((m-l)/2),o=this.g.gradient?this.g.gradient:false;i||this.C(a,c.x,d.y+0.5,d.x,d.y+0.5,"#000000",1);for(i=0;i<
b.length;i++){var r=parseFloat(this.g.value(b[i]));if(r){e||(r-=h);r*=g;var u=c.x+n+i*m,q=d.y;if(e)q=b[i].$startY;if(!(q<c.y+1))if(r<0||this.g.yAxis&&r===0)this.renderTextAt(true,true,u+Math.floor(l/2),q,this.g.label(b[i]));else{var w=this.g.color.call(this,b[i]);if(this.g.border){a.beginPath();a.fillStyle=w;this.Wb(a,u-1,q,l+2,j,r,0,c.y);a.lineTo(u,q);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;a.beginPath();this.Wb(a,u-1,q,l+2,j,r,0,c.y);a.fill()}a.globalAlpha=this.g.alpha.call(this,b[i]);
a.fillStyle=this.g.color.call(this,b[i]);a.beginPath();var p=this.Wb(a,u,q,l,j,r,this.g.border?1:0,c.y);a.fill();a.globalAlpha=1;if(o){w=this.Ub(a,u,q,u+l,p[1],o,w,"y");a.fillStyle=w.gradient;a.beginPath();p=this.Wb(a,u+w.offset,q,l-w.offset*2,j,r,this.g.border?1:0,c.y);a.fill();a.globalAlpha=1}this.renderTextAt(false,true,u+Math.floor(l/2),p[1]+(q-p[1])/2-7,this.g.label(b[i]));f.addRect(b[i].id,[u,p[1],p[0],b[i].$startY||q],e);b[i].$startY=this.g.border?p[1]+1:p[1]}}}},Wb:function(a,b,c,d,e,f,g,
h){a.moveTo(b,c);f=c-e*f+g;if(f<h)f=h;a.lineTo(b,f);e=b+d;f=f;a.lineTo(e,f);var j=b+d;a.lineTo(j,c);a.lineTo(b,c);return[j,f-2*g]}};
dhx.chart.line={pvt_render_line:function(a,b,c,d,e,f){e=this.vb(a,b,c,d,e);var g=Math.floor(e.cellWidth/2);if(b.length)for(var h=this.ra(b[0],c,d,e),j=this.g.offset?c.x+e.cellWidth*0.5:c.x,k=j,i=1;i<=b.length;i++){var m=Math.floor(e.cellWidth*i)-0.5+k;if(b.length!=i){var l=this.ra(b[i],c,d,e);this.C(a,j,h,m,l,this.g.line.color(b[i-1]),this.g.line.width)}this.mc(a,j,h,b[i-1],!!this.g.offset);f.addRect(b[i-1].id,[j-g,h-g,j+g,h+g]);h=l;j=m}},mc:function(a,b,c,d,e){var f=parseInt(this.g.item.radius,10);
a.lineWidth=parseInt(this.g.item.borderWidth,10);a.fillStyle=this.g.item.color(d);a.strokeStyle=this.g.item.borderColor(d);a.beginPath();a.arc(b,c,f,0,Math.PI*2,true);a.fill();a.stroke();e&&this.renderTextAt(false,true,b,c-f-this.g.labelOffset,this.g.label(d))},ra:function(a,b,c,d){var e=d.minValue,f=d.maxValue,g=d.unit,h=d.valueFactor;a=this.g.value(a);h=(parseFloat(a)-e)*h;this.g.yAxis||(h+=d.startValue/g);d=c.y-Math.floor(g*h);if(h<0)d=c.y;if(a>f)d=b.y;if(a<e)d=c.y;return d},vb:function(a,b,c,
d,e){var f={};f.totalHeight=d.y-c.y;f.cellWidth=Math.round((d.x-c.x)/(!this.g.offset?b.length-1:b.length));var g=!!this.g.yAxis,h=this.g.type.indexOf("stacked")!=-1?this.sc(b):this.qc();f.maxValue=h.max;f.minValue=h.min;e||this.nc(a,b,c,d,f.minValue,f.maxValue,f.cellWidth);if(g){f.maxValue=parseFloat(this.g.yAxis.end);f.minValue=parseFloat(this.g.yAxis.start)}b=this.ab(f.minValue,f.maxValue);a=b[0];f.valueFactor=b[1];f.unit=a?f.totalHeight/a:10;f.startValue=0;if(!g){f.startValue=f.unit>10?f.unit:
10;f.unit=a?(f.totalHeight-f.startValue)/a:10}return f}};
dhx.chart.bar={pvt_render_bar:function(a,b,c,d,e,f){var g,h,j,k,i=d.y-c.y,m=!!this.g.yAxis,l=!!this.g.xAxis;h=this.qc();g=h.max;h=h.min;var n=Math.floor((d.x-c.x)/b.length);!e&&!(this.g.origin!="auto"&&!m)&&this.nc(a,b,c,d,h,g,n);if(m){g=parseFloat(this.g.yAxis.end);h=parseFloat(this.g.yAxis.start)}j=this.ab(h,g);k=j[0];j=j[1];var o=k?i/k:k;if(!m&&!(this.g.origin!="auto"&&l)){var r=10;o=k?(i-r)/k:r}!e&&this.g.origin!="auto"&&!m&&this.g.origin>h&&this.nd(a,b,c,d,n,d.y-o*(this.g.origin-h));i=parseInt(this.g.barWidth,
10);if(this.z&&i*this.z.length+4>n)i=n/this.z.length-4;k=Math.floor((n-i*this.z.length)/2);var u=typeof this.g.radius!="undefined"?parseInt(this.g.radius,10):Math.round(i/5);if(i/2<u)u=i/2;var q=false,w=this.g.gradient;if(w&&typeof w!="function"){q=w;w=false}else if(w){w=a.createLinearGradient(0,d.y,0,c.y);this.g.gradient(w)}l||this.C(a,c.x,d.y+0.5,d.x,d.y+0.5,"#000000",1);for(var p=0;p<b.length;p++){var t=parseFloat(this.g.value(b[p])||0);if(t>g)t=g;t-=h;t*=j;var s=c.x+k+p*n+(i+1)*e,v=d.y;if(t<0||
this.g.yAxis&&t===0&&!(this.g.origin!="auto"&&this.g.origin>h))this.renderTextAt(true,true,s+Math.floor(i/2),v,this.g.label(b[p]));else{if(!m&&!(this.g.origin!="auto"&&l))t+=r/o;var x=w||this.g.color.call(this,b[p]);this.g.border&&this.Se(a,s,v,i,h,u,o,t,x);a.globalAlpha=this.g.alpha.call(this,b[p]);var y=this.Re(a,c,s,v,i,h,u,o,t,x,w,q);a.globalAlpha=1;q&&this.Te(a,s,v,i,h,u,o,t,x,q);y[0]!=s?this.renderTextAt(false,true,s+Math.floor(i/2),y[1],this.g.label(b[p])):this.renderTextAt(true,true,s+Math.floor(i/
2),y[3],this.g.label(b[p]));f.addRect(b[p].id,[s,y[3],y[2],y[1]],e)}}},ec:function(a,b,c,d,e,f,g){var h=this.g.xAxis,j=c;if(h&&this.g.origin!="auto"&&this.g.origin>g){c-=(this.g.origin-g)*e;j=c;d-=this.g.origin-g;if(d<0){d*=-1;a.translate(b+f,c);a.rotate(Math.PI);c=b=0}c-=0.5}return{value:d,x0:b,y0:c,start:j}},Re:function(a,b,c,d,e,f,g,h,j,k,i,m){a.save();a.fillStyle=k;var l=this.ec(a,c,d,j,h,e,f);e=this.Vb(a,l.x0,l.y0,e,g,h,l.value,this.g.border?1:0);if(i&&!m)a.lineTo(l.x0+(this.g.border?1:0),b.y);
a.fill();a.restore();a=l.x0;b=l.x0!=c?c+e[0]:e[0];d=l.x0!=c?l.start-e[1]:d;c=l.x0!=c?l.start:e[1];return[a,d,b,c]},Se:function(a,b,c,d,e,f,g,h,j){a.save();b=this.ec(a,b,c,h,g,d,e);a.fillStyle=j;this.Vb(a,b.x0,b.y0,d,f,g,b.value,0);a.lineTo(b.x0,0);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;this.Vb(a,b.x0,b.y0,d,f,g,b.value,0);a.fill();a.restore()},Te:function(a,b,c,d,e,f,g,h,j,k){a.save();b=this.ec(a,b,c,h,g,d,e);j=this.Ub(a,b.x0,b.y0,b.x0+d,b.y0-g*b.value+2,k,j,"y");a.fillStyle=j.gradient;
this.Vb(a,b.x0+j.offset,b.y0,d-j.offset*2,f,g,b.value,j.offset);a.fill();a.restore()},Vb:function(a,b,c,d,e,f,g,h){a.beginPath();var j=0;if(e>f*g){var k=(e-f*g)/e;if(k<=1&&k>=-1)j=-Math.acos(k)+Math.PI/2}a.moveTo(b+h,c);var i=c-Math.floor(f*g)+e+(e?0:h);e<f*g&&a.lineTo(b+h,i);f=b+e;e&&e>0&&a.arc(f,i,e-h,-Math.PI+j,-Math.PI/2,false);g=b+d-e-(e?0:h);f=i-e+(e?h:0);a.lineTo(g,f);i=i;e&&e>0&&a.arc(g,i,e-h,-Math.PI/2,0-j,false);d=b+d-h;a.lineTo(d,c);a.lineTo(b+h,c);return[d,f]}};
dhx.chart.pie={pvt_render_pie:function(a,b,c,d,e,f){this.Wd(a,b,c,d,1,f)},Wd:function(a,b,c,d,e,f){var g=0,h=this.hf(c,d);c=this.g.radius?this.g.radius:h.radius;this.data.max(this.g.value);for(var j=[],k=[],i=0,m=0;m<b.length;m++)g+=parseFloat(this.g.value(b[m]));for(m=0;m<b.length;m++){k[m]=parseFloat(this.g.value(b[m]));j[m]=Math.PI*2*(g?(k[m]+i)/g:1/b.length);i+=k[m]}d=this.g.x?this.g.x:h.x;var l=this.g.y?this.g.y:h.y;e==1&&this.g.shadow&&this.se(a,d,l,c);l/=e;var n=-Math.PI/2;a.scale(1,e);for(m=
0;m<b.length;m++)if(k[m]){a.lineWidth=2;a.beginPath();a.moveTo(d,l);var o=-Math.PI/2+j[m]-1.0E-4;a.arc(d,l,c,n,o,false);a.lineTo(d,l);var r=this.g.color.call(this,b[m]);a.fillStyle=r;a.strokeStyle=this.g.lineColor(b[m]);a.stroke();a.fill();this.g.pieInnerText&&this.ld(d,l,5*c/6,n,o,e,this.g.pieInnerText(b[m],g),true);this.g.label&&this.ld(d,l,c+this.g.labelOffset,n,o,e,this.g.label(b[m]));if(e!=1){this.dd(a,d,l,n,o,c,true);a.fillStyle="#000000";a.globalAlpha=0.2;this.dd(a,d,l,n,o,c,false);a.globalAlpha=
1;a.fillStyle=r}f.addSector(b[m].id,n,o,d,l,c,e);n=o}if(this.g.gradient){b=e!=1?d+c/3:d;f=e!=1?l+c/3:l;this.eg(a,d,l,c,b,f)}a.scale(1,1/e)},hf:function(a,b){var c=b.x-a.x,d=b.y-a.y;b=a.x+c/2;a=a.y+d/2;c=Math.min(c/2,d/2);return{x:b,y:a,radius:c}},dd:function(a,b,c,d,e,f,g){a.lineWidth=1;if(d<=0&&e>=0||d>=0&&e<=Math.PI||d<=Math.PI&&e>=Math.PI){if(d<=0&&e>=0){d=0;g=false;this.md(a,b,c,f,d,e)}if(d<=Math.PI&&e>=Math.PI){e=Math.PI;g=false;this.md(a,b,c,f,d,e)}var h=(this.g.pieHeight||Math.floor(f/4))/
this.g.cant;a.beginPath();a.arc(b,c,f,d,e,false);a.lineTo(b+f*Math.cos(e),c+f*Math.sin(e)+h);a.arc(b,c+h,f,e,d,true);a.lineTo(b+f*Math.cos(d),c+f*Math.sin(d));a.fill();g&&a.stroke()}},md:function(a,b,c,d,e,f){a.beginPath();a.arc(b,c,d,e,f,false);a.stroke()},se:function(a,b,c,d){for(var e=["#676767","#7b7b7b","#a0a0a0","#bcbcbc","#d1d1d1","#d6d6d6"],f=e.length-1;f>-1;f--){a.beginPath();a.fillStyle=e[f];a.arc(b+2,c+2,d+f,0,Math.PI*2,true);a.fill()}},gf:function(a){a.addColorStop(0,"#ffffff");a.addColorStop(0.7,
"#7a7a7a");a.addColorStop(1,"#000000");return a},eg:function(a,b,c,d,e,f){a.globalAlpha=0.3;a.beginPath();var g;if(typeof this.g.gradient!="function"){g=a.createRadialGradient(e,f,d/4,b,c,d);g=this.gf(g)}else g=this.g.gradient(g);a.fillStyle=g;a.arc(b,c,d,0,Math.PI*2,true);a.fill();a.globalAlpha=1},ld:function(a,b,c,d,e,f,g,h){if(g=this.renderText(0,0,g,0,1)){var j=g.scrollWidth;g.style.width=j+"px";if(j>a)j=a;var k=8;if(h)k=j/1.8;var i=d+(e-d)/2;c-=(k-8)/2;var m=-k,l=-8,n="left";if(i>=Math.PI/2&&
i<Math.PI){m=-j-m+1;n="right"}if(i<=3*Math.PI/2&&i>=Math.PI){m=-j-m+1;n="right"}d=(b+Math.floor(c*Math.sin(i)))*f+l;k=a+Math.floor((c+k/2)*Math.cos(i))+m;var o=e<Math.PI/2+0.01,r=i<Math.PI/2;if(r&&o)k=Math.max(k,a+3);else if(!r&&!o)k=Math.min(k,a-j);if(!h&&f<1&&d>b*f)d+=this.g.pieHeight||Math.floor(c/4);g.style.top=d+"px";g.style.left=k+"px";g.style.width=j+"px";g.style.textAlign=n;g.style.whiteSpace="nowrap"}}};dhx.chart.pie3D={pvt_render_pie3D:function(a,b,c,d,e,f){this.Wd(a,b,c,d,this.g.cant,f)}};
dhx.Group={m:function(){this.attachEvent("onBeforeRender",function(a){if(this.g.sort){a.blockEvent();a.sort(this.g.sort);a.unblockEvent()}});this.attachEvent("onBeforeSort",function(){this.g.sort=null});this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.g.group&&this.group(this.g.group,false)},this));this.data.attachEvent("onClearAll",dhx.bind(function(){this.ungroup(false)},this));dhx.extend(this.data,dhx.GroupStore)},group:function(a,b){this.data.ungroup(false);this.data.group(a);b!==
false&&this.render()},ungroup:function(a){this.data.ungroup();a!==false&&this.render()},group_setter:function(a){return a},sort_setter:function(a){if(typeof a!="object")a={by:a};this.H(a,{as:"string",dir:"asc"});return a}};
dhx.GroupStore={sum:function(a,b){a=dhx.Template(a);b=b||this;var c=0;b.each(function(d){c+=a(d)*1});return c},min:function(a,b){a=dhx.Template(a);b=b||this;var c=Infinity;b.each(function(d){if(a(d)*1<c)c=a(d)*1});return c*1},max:function(a,b){a=dhx.Template(a);b=b||this;var c=-Infinity;b.each(function(d){if(a(d)*1>c)c=a(d)*1});return c},Uc:function(a,b){a=dhx.Template(a);return a(b[0])},ungroup:function(){if(this.Ac){this.order=this.Ac;this.pull=this.Ld;this.Ld=this.Ac=null}this.callEvent("onStoreUpdated",
[])},group:function(a){var b=dhx.Template(a.by);a.map[b]||(a.map[b]=[b,this.Uc]);var c={},d=[];this.each(function(h){var j=b(h);if(!c[j]){d.push({id:j});c[j]=dhx.toArray()}c[j].push(h)});for(var e in a.map){var f=a.map[e][1]||this.Uc;if(typeof f!="function")f=this[f];for(var g=0;g<d.length;g++)d[g][e]=f.call(this,a.map[e][0],c[d[g].id])}this.Ac=this.order;this.Ld=this.pull;this.order=dhx.toArray();this.pull={};for(g=0;g<d.length;g++){e=this.id(d[g]);this.pull[e]=d[g];this.order.push(e)}this.callEvent("onStoreUpdated",
[])}};
dhx.Canvas={m:function(){this.wb=[]},Nf:function(a){this.ba=dhx.html.create("canvas",{width:a.offsetWidth,height:a.offsetHeight});a.appendChild(this.ba);return this.ba},getCanvas:function(a){return(this.ba||this.Nf(this.k)).getContext(a||"2d")},Yd:function(){if(this.ba){this.ba.setAttribute("width",this.ba.parentNode.offsetWidth);this.ba.setAttribute("height",this.ba.parentNode.offsetHeight)}},renderText:function(a,b,c,d,e){if(c){if(e)e=Math.max(e,0);if(b)b=Math.max(b,0);a=dhx.html.create("DIV",{"class":"dhx_canvas_text"+
(d?" "+d:""),style:"left:"+a+"px; top:"+b+"px;"},c);this.k.appendChild(a);this.wb.push(a);if(e)a.style.width=e+"px";return a}},renderTextAt:function(a,b,c,d,e,f,g){if(e=this.renderText.call(this,c,d,e,f,g)){if(a)e.style.top=a=="middle"?parseInt(d-e.offsetHeight/2,10)+"px":d-e.offsetHeight+"px";if(b)e.style.left=b=="left"?c-e.offsetWidth+"px":parseInt(c-e.offsetWidth/2,10)+"px"}return e},clearCanvas:function(){for(var a=0;a<this.wb.length;a++)this.k.removeChild(this.wb[a]);this.wb=[];if(this.k.u){this.k.u.parentNode.removeChild(this.k.u);
this.k.u=null}this.getCanvas().clearRect(0,0,this.ba.offsetWidth,this.ba.offsetHeight)}};
dhx.protoUI({name:"chart",m:function(){for(var a in dhx.chart)dhx.extend(this,dhx.chart[a]);this.z=[this.g];this.Hb=[];this.k.className+=" dhx_chart";this.F.push(this.la);this.attachEvent("onLocateData",this.mg);this.data.provideApi(this,true)},la:function(){this.data.attachEvent("onStoreUpdated",dhx.bind(function(){this.render()},this))},defaults:{color:"RAINBOW",alpha:"1",label:false,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:0.5,barWidth:15,line:{},item:{},shadow:true,gradient:false,
border:true,labelOffset:20,origin:"auto"},J:"dhx_area_id",on_click:{},on_dblclick:{},on_mouse_move:{},resize:function(){dhx.ui.view.prototype.resize.call(this);this.Yd();this.render()},l:function(a,b){if(dhx.ui.view.prototype.l.call(this,a,b)){this.Yd();this.render()}},type_setter:function(a){if(typeof this.g.offset=="undefined")this.g.offset=a=="area"||a=="stackedArea"?false:true;return a},render:function(){if(this.isVisible(this.g.id))if(this.callEvent("onBeforeRender",[this.data])){if(this.cb)for(var a=
0;a<this.Hb.length;a++)this.cb.removeChild(this.Hb[a]);this.Hb=[];this.clearCanvas();this.g.legend&&this.We(this.getCanvas(),this.data.getRange(),this.q,this.w);var b=this.df(this.q,this.w),c=new dhx.ui.Map(this.J),d=this.g;for(a=0;a<this.z.length;a++){this.g=this.z[a];this["pvt_render_"+this.g.type](this.getCanvas(),this.data.getRange(),b.start,b.end,a,c)}c.render(this.k);this.g=d}},series_setter:function(a){if(typeof a=="object"){this.fb(!a.length?a:a[0],{});for(var b=1;b<a.length;b++)this.addSeries(a[b])}return a},
value_setter:dhx.Template,alpha_setter:dhx.Template,label_setter:dhx.Template,lineColor_setter:dhx.Template,pieInnerText_setter:dhx.Template,gradient_setter:function(a){if(typeof a!="function"&&a&&(a===true||a!="3d"))a="light";return a},colormap:{RAINBOW:function(a){a=Math.floor(this.indexById(a.id)/this.dataCount()*1536);if(a==1536)a-=1;return this.Qf[Math.floor(a/256)](a%256)}},color_setter:function(a){return this.colormap[a]||dhx.Template(a)},legend_setter:function(a){if(typeof a!="object")a={template:a};
this.H(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",marker:{type:"square",width:25,height:15}});a.template=dhx.Template(a.template);return a},item_setter:function(a){if(typeof a!="object")a={color:a,borderColor:a};this.H(a,{radius:4,color:"#000000",borderColor:"#000000",borderWidth:2});a.color=dhx.Template(a.color);a.borderColor=dhx.Template(a.borderColor);return a},line_setter:function(a){if(typeof a!="object")a={color:a};this.H(a,{width:3,color:"#d4d4d4"});a.color=
dhx.Template(a.color);return a},padding_setter:function(a){if(typeof a!="object")a={left:a,right:a,top:a,bottom:a};this.H(a,{left:50,right:20,top:35,bottom:40});return a},xAxis_setter:function(a){if(!a)return false;if(typeof a!="object")a={template:a};this.H(a,{title:"",color:"#000000",template:"{obj}",lines:false});if(a.template)a.template=dhx.Template(a.template);return a},yAxis_setter:function(a){this.H(a,{title:"",color:"#000000",template:"{obj}",lines:true});if(a.template)a.template=dhx.Template(a.template);
return a},nc:function(a,b,c,d,e,f,g){e=this.$e(a,b,c,d,e,f);this.nd(a,b,c,d,g,e);return e},nd:function(a,b,c,d,e,f){if(this.g.xAxis){var g=c.x-0.5;f=parseInt(f?f:d.y,10)+0.5;var h=d.x,j,k=true;this.C(a,g,f,h,f,this.g.xAxis.color,1);for(var i=0;i<b.length;i++){if(this.g.offset===true)j=g+e/2+i*e;else{j=g+i*e;k=!!i}var m=this.g.origin!="auto"&&this.g.type=="bar"&&parseFloat(this.g.value(b[i])||0)<this.g.origin;this.Ye(j,f,b[i],k,m);this.g.type_setter!="bar"&&this.Ze(a,j,d.y,c.y)}this.renderTextAt(true,
false,g,d.y+this.g.padding.bottom-3,this.g.xAxis.title,"dhx_axis_title_x",d.x-c.x);this.g.xAxis.lines&&this.g.offset&&this.C(a,h+0.5,d.y,h+0.5,c.y+0.5,this.g.xAxis.color,0.2)}},$e:function(a,b,c,d,e,f){var g;b={};if(this.g.yAxis){var h=c.x-0.5,j=d.y,k=c.y,i=d.y;this.C(a,h,j,h,k,this.g.yAxis.color,1);if(this.g.yAxis.step)g=parseFloat(this.g.yAxis.step);if(typeof this.g.yAxis.step=="undefined"||typeof this.g.yAxis.start=="undefined"||typeof this.g.yAxis.end=="undefined"){b=this.Zc(e,f);e=b.start;f=
b.end;g=b.step;this.g.yAxis.end=f;this.g.yAxis.start=e}if(g!==0){k=(j-k)*g/(f-e);for(var m=0,l=e;l<=f;l+=g){if(b.fixNum)l=parseFloat((new Number(l)).toFixed(b.fixNum));var n=Math.floor(j-m*k)+0.5;!(l==e&&this.g.origin=="auto")&&this.g.yAxis.lines&&this.C(a,h,n,d.x,n,this.g.yAxis.color,0.2);if(l==this.g.origin)i=n;this.renderText(0,n-5,this.g.yAxis.template(l.toString()),"dhx_axis_item_y",c.x-5);m++}this.$d(c,d);return i}}},$d:function(a,b){if(a=this.renderTextAt("middle",false,0,parseInt((b.y-a.y)/
2+a.y,10),this.g.yAxis.title,"dhx_axis_title_y"))a.style.left=(dhx.env.transform?(a.offsetHeight-a.offsetWidth)/2:0)+"px"},Zc:function(a,b){var c,d,e;c=(b-a)/8||1;var f=Math.floor(this.Ed(c)),g=Math.pow(10,f),h=c/g;h=h>5?10:5;c=parseInt(h,10)*g;if(c>Math.abs(a))d=a<0?-c:0;else{var j=Math.abs(a),k=Math.floor(this.Ed(j)),i=j/Math.pow(10,k);d=Math.ceil(i*10)/10*Math.pow(10,k)-c;if(a<0)d=-d-2*c}for(e=d;e<b;){e+=c;e=parseFloat((new Number(e)).toFixed(Math.abs(f)))}return{start:d,end:e,step:c,fixNum:Math.abs(f)}},
qc:function(a){var b,c;if((c=arguments.length&&a=="h"?this.g.xAxis:this.g.yAxis)&&typeof c.end!="undefined"&&typeof c.start!="undefined"&&c.step){b=parseFloat(c.end);c=parseFloat(c.start)}else{b=this.data.max(this.z[0].value);c=this.data.min(this.z[0].value);if(this.z.length>1)for(var d=1;d<this.z.length;d++){var e=this.data.max(this.z[d].value),f=this.data.min(this.z[d].value);if(e>b)b=e;if(f<c)c=f}}return{max:b,min:c}},Ed:function(a){var b="log";return Math.floor(Math[b](a)/Math.LN10)},Ye:function(a,
b,c,d,e){this.g.xAxis&&this.renderTextAt(e,d,a,b,this.g.xAxis.template(c),"dhx_axis_item_x")},Ze:function(a,b,c,d){this.g.xAxis&&this.g.xAxis.lines&&this.C(a,b,c,b,d,this.g.xAxis.color,0.2)},C:function(a,b,c,d,e,f,g){a.strokeStyle=f;a.lineWidth=g;a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.stroke()},ab:function(a,b){var c=1;if(b!=a){a=b-a;if(Math.abs(a)<1)for(;Math.abs(a)<1;){c*=10;a*=c}}else a=a;return[a,c]},Qf:[function(a){return"#FF"+dhx.math.toHex(a/2,2)+"00"},function(a){return"#FF"+dhx.math.toHex(a/
2+128,2)+"00"},function(a){return"#"+dhx.math.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+dhx.math.toHex(a,2)},function(a){return"#00"+dhx.math.toHex(255-a,2)+"FF"},function(a){return"#"+dhx.math.toHex(a,2)+"00FF"}],addSeries:function(a){var b=this.g;this.g=dhx.extend({},b);this.fb(a,{});this.z.push(this.g);this.g=b},mg:function(a,b){this.Sc=b.getAttribute("userdata");if(this.z[this.Sc]){for(a=0;a<this.z.length;a++){var c=this.z[a].tooltip;c&&c.disable()}(c=this.z[this.Sc].tooltip)&&c.enable()}},
We:function(a,b){var c=0,d=0,e=this.g.legend,f,g,h=this.g.legend.layout!="x"?"width:"+e.width+"px":"";this.cb&&this.cb.parentNode.removeChild(this.cb);var j=dhx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+c+"px; top:"+d+"px;"+h},"");this.cb=j;this.k.appendChild(j);var k=[];if(e.values)for(i=0;i<e.values.length;i++)k.push(this.kd(j,e.values[i].text));else for(var i=0;i<b.length;i++)k.push(this.kd(j,e.template(b[i])));if(j.offsetWidth===0)j.style.width="auto";g=j.offsetWidth;f=j.offsetHeight;
this.g.legend.width=g;this.g.legend.height=f;if(g<this.k.offsetWidth){if(e.layout=="x"&&e.align=="center")c=(this.k.offsetWidth-g)/2;if(e.align=="right")c=this.k.offsetWidth-g}if(f<this.k.offsetHeight)if(e.valign=="middle"&&e.align!="center"&&e.layout!="x")d=(this.k.offsetHeight-f)/2;else if(e.valign=="bottom")d=this.k.offsetHeight-f;j.style.left=c+"px";j.style.top=d+"px";for(i=0;i<k.length;i++){var m=k[i],l=e.values?e.values[i].color:this.g.color.call(this,b[i]);this.Xe(a,m.offsetLeft+c,m.offsetTop+
d,l)}k=null},kd:function(a,b){var c="";if(this.g.legend.layout=="x")c="float:left;";b=dhx.html.create("DIV",{style:c+"padding-left:"+(10+this.g.legend.marker.width)+"px","class":"dhx_chart_legend_item"},b);this.Hb.push(b);a.appendChild(b);return b},Xe:function(a,b,c,d){var e=this.g.legend;a.strokeStyle=a.fillStyle=d;a.lineWidth=e.marker.height;a.lineCap=e.marker.type;a.beginPath();b+=a.lineWidth/2+5;c+=a.lineWidth/2+3;a.moveTo(b,c);b=b+e.marker.width-e.marker.height+1;a.lineTo(b,c);a.stroke()},df:function(a,
b){var c,d,e,f;c=this.g.padding.left;d=this.g.padding.top;e=a-this.g.padding.right;f=b-this.g.padding.bottom;if(this.g.legend){a=this.g.legend;b=this.g.legend.width;var g=this.g.legend.height;if(a.layout=="x")if(a.valign=="center")if(a.align=="right")e-=b;else{if(a.align=="left")c+=b}else if(a.valign=="bottom")f-=g;else d+=g;else if(a.align=="right")e-=b;else if(a.align=="left")c+=b}return{start:{x:c,y:d},end:{x:e,y:f}}},sc:function(a){var b,c;if(this.g.yAxis&&typeof this.g.yAxis.end!="undefined"&&
typeof this.g.yAxis.start!="undefined"&&this.g.yAxis.step){b=parseFloat(this.g.yAxis.end);c=parseFloat(this.g.yAxis.start)}else{for(var d=0;d<a.length;d++){a[d].$sum=0;a[d].$min=Infinity;for(b=0;b<this.z.length;b++){c=parseFloat(this.z[b].value(a[d])||0);if(!isNaN(c)){a[d].$sum+=c;if(c<a[d].$min)a[d].$min=c}}}b=-Infinity;c=Infinity;for(d=0;d<a.length;d++){if(a[d].$sum>b)b=a[d].$sum;if(a[d].$min<c)c=a[d].$min}if(c>0)c=0}return{max:b,min:c}},Ub:function(a,b,c,d,e,f,g,h){if(f=="light"){a=h=="x"?a.createLinearGradient(b,
c,d,c):a.createLinearGradient(b,c,b,e);a.addColorStop(0,"#FFFFFF");a.addColorStop(0.9,g);a.addColorStop(1,g);g=2}else{a.globalAlpha=0.37;g=0;a=h=="x"?a.createLinearGradient(b,e,b,c):a.createLinearGradient(b,c,d,c);a.addColorStop(0,"#000000");a.addColorStop(0.5,"#FFFFFF");a.addColorStop(0.6,"#FFFFFF");a.addColorStop(1,"#000000")}return{gradient:a,offset:g}}},dhx.Group,dhx.DataLoader,dhx.MouseEvents,dhx.ui.view,dhx.Destruction,dhx.Canvas,dhx.EventSystem,dhx.Settings);
dhx.jsonp=function(a,b,c,d){var e="dhx_jsonp_"+dhx.uid(),f=document.createElement("script");f.id=e;f.type="text/javascript";var g=document.getElementsByTagName("head")[0];b||(b={});b.jsonp="dhx.jsonp."+e;dhx.jsonp[e]=function(){c.apply(d||window,arguments);f.parentNode.removeChild(f);c=g=d=f=null;delete dhx.jsonp[e]};var h=[];for(var j in b)h.push(j+"="+encodeURIComponent(b[j]));a+=(a.indexOf("?")==-1?"?":"&")+h.join("&");f.src=a;g.appendChild(f)};
dhx.ValidateData={validate:function(a){var b=true,c=this.g.rules;if(c){var d=c.$obj;if(!a&&this.getValues)a=this.getValues();if(d&&!d.call(this,a))return false;var e=c.$all;for(var f in c)if(f.indexOf("$")!==0)if(c[f].call(this,a[f],a,f)&&(!e||e.call(this,a[f],a,f)))this.callEvent("onValidationSuccess",[f,a])&&this.bd&&this.bd(f,a);else{b=false;this.callEvent("onValidationError",[f,a])&&this.Gd&&this.Gd(f,a)}}return b}};
dhx.rules={isNumber:function(a){return parseFloat(a)==a},isNotEmpty:function(a){return a=="0"||a}};dhx.dp=function(a){if(typeof a=="object"&&a.g)a=a.g.id;if(dhx.dp.Dc[a])return dhx.dp.Dc[a];if(typeof a=="string"||typeof a=="number")a={master:dhx.ui.get(a)};var b=new dhx.DataProcessor(a);return dhx.dp.Dc[b.g.master.g.id]=b};dhx.dp.Dc={};
dhx.DataProcessor=dhx.proto({defaults:{autoupdate:true,mode:"post"},m:function(){this.Oa=[];this.tg=[];this.Mc=[];this.Wa=null;this.Fa=false;this.name="DataProcessor";this.F.push(this.la)},master_setter:function(a){var b=a;if(a.name!="DataStore")b=a.data;this.g.store=b;return a},la:function(){this.g.store.attachEvent("onStoreUpdated",dhx.bind(this.Od,this))},ignore:function(a,b){var c=this.Fa;this.Fa=true;a.call(b||this);this.Fa=c},off:function(){this.Fa=true},on:function(){this.Fa=false},Le:function(a){var b=
{};for(var c in a)if(c.indexOf("$")!==0)b[c]=a[c];return b},save:function(a,b){b=b||"update";this.Od(a,this.g.store.item(a),b)},Od:function(a,b,c){if(this.Mc.length)for(var d=0;d<this.Mc.length;d++)this.xg.apply(this,this.Mc[d]);if(this.Fa===true||!c)return true;a={id:a,data:this.Le(b)};switch(c){case "update":a.operation="update";break;case "add":a.operation="insert";break;case "delete":a.operation="delete";break;default:return true}if(a.operation!="delete"&&!this.validate(a.data))return false;this.Oa.push(a);
this.g.autoupdate&&this.send();return true},send:function(){this.$f()},$f:function(){if(this.g.url){for(var a=this.Oa,b=[],c=0;c<a.length;c++){var d=a[c].id,e=a[c].operation;if(this.g.store.exists(d))a[c].data=this.g.store.item(d);this.callEvent("onBefore"+e,[d,a[c].data])&&b.push(a[c])}b.length&&this.callEvent("onBeforeDataSend",[b])&&this.Zf(this.g.url,this.qg(b),this.g.mode)}},qg:function(a){for(var b={},c=[],d=0;d<a.length;d++){var e=a[d];c.push(e.id);b[e.id+"_!nativeeditor_status"]=e.operation;
for(var f in e.data)if(f.indexOf("$")!==0)b[e.id+"_"+f]=e.data[f]}b.ids=c.join(",");return b},Zf:function(a,b,c){if(typeof a=="function")return a(b);a+=a.indexOf("?")==-1?"?":"&";a+="editing=true";dhx.ajax()[c](a,b,dhx.bind(this.Pf,this))},Pf:function(a,b,c){this.callEvent("onBeforeSync",[f,a,b,c]);var d=dhx.DataDriver.xml;b=d.toObject(a,d);for(var e=d.xpath(b,"//action"),f=[],g=0;g<e.length;g++){var h=d.tagToObject(e[g]);f.push(h);for(var j=-1,k=0;k<this.Oa.length;){if(this.Oa[k].id==h.sid)j=k;break}if(h.type==
"error"||h.type=="invalid")if(!this.callEvent("onDBError",[h,this.Oa[j]]))continue;j>=0&&this.Oa.splice(j,1);h.tid!=h.sid&&this.g.store.changeId(h.sid,h.tid);this.callEvent("onAfter"+h.type,[h])}this.callEvent("onAfterSync",[f,a,b,c])},escape:function(a){return this.g.escape?this.g.escape(a):encodeURIComponent(a)}},dhx.Settings,dhx.EventSystem,dhx.ValidateData);
dhx.animate=function(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++){if(b.type=="slide"){if(b.subtype=="out"&&c===0)continue;if(b.subtype=="in"&&c==1)continue}if(b.type=="flip"){var d=dhx.copy(b);if(c===0)d.type="flipback";if(c==1)d.callback=null;dhx.animate(a[c],d)}else dhx.animate(a[c],b)}else{c=dhx.toNode(a);c.Eb?dhx.animate.end(c,b):dhx.animate.start(c,b)}};
dhx.animate.end=function(a,b){a.style[dhx.env.transformPrefix+"TransitionDuration"]="1ms";a.Eb=null;dhx.oe&&window.clearTimeout(dhx.oe);dhx.oe=dhx.delay(dhx.animate,dhx,[a,b],10)};dhx.animate.isSupported=function(){return dhx.env.transform&&dhx.env.transition};
dhx.animate.formLine=function(a,b,c){var d=c.direction;b.parentNode.style.position="relative";b.style.position="absolute";a.style.position="absolute";if(d=="top"||d=="bottom"){a.style.left="0px";a.style.top=(d=="top"?1:-1)*b.offsetHeight+"px"}else{a.style.top="0px";a.style.left=(d=="left"?1:-1)*b.offsetWidth+"px"}b.parentNode.appendChild(a);if(c.type=="slide"&&c.subtype=="out"){a.style.left=0;a.style.top=0;b.parentNode.removeChild(b);a.parentNode.appendChild(b)}return[a,b]};
dhx.animate.breakLine=function(a){dhx.html.remove(a[1]);dhx.animate.clear(a[0]);dhx.animate.clear(a[1]);a[0].style.position=""};dhx.animate.clear=function(a){a.style[dhx.env.transformPrefix+"Transform"]="";a.style[dhx.env.transformPrefix+"Transition"]="";a.style.top=a.style.left=""};
dhx.animate.start=function(a,b){if(typeof b=="string")b={type:b};b=dhx.Settings.H(b,{type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0});var c=dhx.env.transformPrefix,d=a.Eb=b;switch(d.type=="slide"&&d.direction){case "right":d.x=a.offsetWidth;break;case "left":d.x=-a.offsetWidth;break;case "top":d.y=-a.offsetHeight;break;case "bottom":default:d.y=a.offsetHeight;break}if(d.type=="flip"||d.type=="flipback"){var e=[0,0],f="scaleX";if(d.subtype=="vertical"){e[0]=20;f="scaleY"}else e[1]=
20;if(d.direction=="right"||d.direction=="bottom"){e[0]*=-1;e[1]*=-1}}var g=d.duration+"ms "+d.timing+" "+d.delay+"ms",h=c+"TransformStyle: preserve-3d;",j="",k="";switch(d.type){case "fade":j="opacity "+g;h="opacity: 0;";break;case "show":j="opacity "+g;h="opacity: 1;";break;case "flip":g=d.duration/2+"ms "+d.timing+" "+d.delay+"ms";k="skew("+e[0]+"deg, "+e[1]+"deg) "+f+"(0.00001)";j="all "+g;break;case "flipback":d.delay+=d.duration/2;g=d.duration/2+"ms "+d.timing+" "+d.delay+"ms";a.style[c+"Transform"]=
"skew("+-1*e[0]+"deg, "+-1*e[1]+"deg) "+f+"(0.00001)";a.style.left="0";k="skew(0deg, 0deg) "+f+"(1)";j="all "+g;break;case "slide":b=d.x+"px";var i=d.y+"px";k=dhx.env.translate+"("+b+", "+i+(dhx.env.translate=="translate3d"?", 0":"")+")";j=dhx.env.transformCSSPrefix+"transform "+g;break;default:break}dhx.delay(function(){a.style[c+"Transition"]=j;dhx.delay(function(){if(h)a.style.cssText+=h;if(k)a.style[c+"Transform"]=k;var m=false,l=dhx.event(a,dhx.env.transitionEnd,function(n){a.Eb=null;if(d.callback)d.callback.call(d.master||
window,a,d,n);m=true;dhx.eventRemove(l)});window.setTimeout(function(){if(!m){a.Eb=null;if(d.callback)d.callback.call(d.master||window,a,d);m=true;dhx.eventRemove(l)}},(d.duration*1+d.delay*1)*1.3)})})};dhx.Modality={modal_setter:function(a){if(a){if(!this.Ha){this.Ha=dhx.html.create("div",{"class":a=="rich"?"dhx_modal_rich":"dhx_modal"});this.Ha.style.zIndex=dhx.ui.zIndex();this.h.style.zIndex=dhx.ui.zIndex();document.body.appendChild(this.Ha)}}else{this.Ha&&dhx.html.remove(this.Ha);this.Ha=null}return a}};
dhx.protoUI({name:"window",m:function(a){this.h.innerHTML="<div class='dhx_win_content'><div class='dhx_win_head'></div><div class='dhx_win_body'></div></div>";this.k=this.h.firstChild;this.A=this.k.childNodes[0];this.Q=this.k.childNodes[1];this.h.className+=" dhx_window";this.ea=this.o=null;this.g.p={top:false,left:false,right:false,bottom:false};if(!a.id)a.id=dhx.uid()},Vd:function(){this.o={destructor:function(){}}},Jc:function(a){this.o.destructor();this.o=a;this.o.L=this;this.Q.appendChild(this.o.h);
this.resize()},show:function(a,b,c){this.g.hidden=false;this.h.style.zIndex=dhx.ui.zIndex();this.g.modal&&this.modal_setter(true);var d,e,f;if(a){if(typeof a=="object"&&!a.tagName){d={x:a.clientX-this.Z[0]/2,y:a.clientY};e=document.body.offsetWidth;f=1}else a=dhx.toNode(a);var g=document.body.offsetWidth,h=document.body.offsetHeight;e=e||a.offsetWidth;f=f||a.offsetHeight;var j=this.Z;d=d||dhx.html.offset(a);var k=a=6,i=6;c="top";var m=0,l=0,n=0,o=0;if(b=="right"){o=d.x+a+e;k=-f;c="left";m=Math.round(d.y+
f/2);l=o-i}else if(b=="left"){o=d.x-a-j[0]-1;k=-f;c="right";m=Math.round(d.y+f/2);l=o+j[0]+1}else{o=g-d.x>j[0]?d.x:g-a-j[0];l=Math.round(d.x+e/2);if(l>o+j[0])l=o+j[0]/2}if(h-f-d.y-k>j[1]){n=f+d.y+k;if(!m){c="top";m=n-i}}else{n=d.y-k-j[1];if(n<0){n=0;c=false}else if(!m){c="bottom";n--;m=n+j[1]+1}}this.setPosition(o,n);c&&this.ae&&this.ae(c,l,m)}this.fg=new Date;this.h.style.display="block";if(this.Ea){for(b=0;b<this.Ea.length;b++)dhx.ui.get(this.Ea[b]).render();this.Ea=[];this.wc={}}this.callEvent("onShow",
[])},hidden_setter:function(a){a?this.hide():this.show();return!!a},hide:function(){if(!this.g.hidden)if(!(new Date-this.fg<100)){this.g.modal&&this.modal_setter(false);this.g.position=="top"?dhx.animate(this.h,{type:"slide",x:0,y:0,duration:300,callback:this.xd,master:this}):this.xd()}},xd:function(){this.h.style.display="none";this.g.hidden=true;this.callEvent("onHide",[])},close:function(){this.define("modal",false);dhx.html.remove(this.h);this.destructor()},body_setter:function(a){if(typeof a!=
"object")a={template:a};this.o=dhx.ui.Pa(a);this.o.L=this;this.Q.appendChild(this.o.h);return a},head_setter:function(a){if(a===false)return a;if(typeof a!="object")a={template:a,css:"dhx_alert_template"};this.ea=dhx.ui.Pa(a);this.ea.L=this;this.A.appendChild(this.ea.h);return a},getBody:function(){return this.o},getHead:function(){return this.ea},resize:function(){var a=this.n();this.l(a[1]||this.g.width,a[3]||this.g.height);this.bg(this.g.left,this.g.top)},bg:function(a,b){if(this.g.position){a=
Math.round((document.body.offsetWidth-this.g.width)/2);b=Math.round((document.body.offsetHeight-this.g.height)/2);if(this.g.position=="top")b=dhx.animate.isSupported()?-1*this.g.height:10;this.setPosition(a,b);this.g.position=="top"&&dhx.animate(this.h,{type:"slide",x:0,y:this.g.height,duration:300})}else this.setPosition(a,b)},setPosition:function(a,b){this.h.style.top=b+"px";this.h.style.left=a+"px";this.g.left=a;this.g.top=b},n:function(){var a=this.o.n();if(this.ea){var b=this.ea.n();if(b[3])this.g.headHeight=
b[3]}if(a[3]){a[3]+=this.g.head!==false?this.g.headHeight:0;this.g.height=a[3]}if(a[1])this.g.width=a[1];if(a[0]||a[2])this.g.gravity=Math.max(a[0],a[2]);return dhx.ui.view.prototype.n.call(this)},l:function(a,b){if(dhx.ui.view.prototype.l.call(this,a,b)){a=this.q;b=this.w;if(this.g.head===false){this.A.style.display="none";this.o.l(a,b)}else{this.ea.l(a,this.g.headHeight);this.o.l(a,b-this.g.headHeight)}}},defaults:{headHeight:43,width:300,height:200,top:100,left:100,body:"",head:""}},dhx.ui.view,
dhx.Movable,dhx.Modality,dhx.EventSystem);
dhx.protoUI({name:"popup",m:function(){this.g.head=false;dhx.event(this.k,"click",dhx.bind(this.Je,this));dhx.attachEvent("onClick",dhx.bind(this.bb,this));this.attachEvent("onHide",this.yd)},Je:function(){this.gg=new Date},bb:function(){if(new Date-(this.gg||0)>250)this.hide()},n:function(){var a=this.o.n();if(a[3])this.g.height=a[3]+this.g.padding*2;if(a[1])this.g.width=a[1]+this.g.padding*2;if(a[0]||a[2])this.g.gravity=Math.max(a[0],a[2]);return dhx.ui.view.prototype.n.call(this)},l:function(a,
b){if(dhx.ui.view.prototype.l.call(this,a,b)){a=this.q-this.g.padding*2;b=this.w-this.g.padding*2;this.k.style.padding=this.g.padding+"px";this.A.style.display="none";this.o.l(a,b)}},body_setter:function(a){a=dhx.ui.window.prototype.body_setter.call(this,a);this.o.g.p={top:false,left:false,right:false,bottom:false};return a},defaults:{padding:8},head_setter:null,ae:function(a,b,c){this.yd();document.body.appendChild(this.gb=dhx.html.create("DIV",{"class":"dhx_point_"+a},""));this.gb.style.zIndex=
dhx.ui.zIndex();this.gb.style.top=c+"px";this.gb.style.left=b+"px"},yd:function(){this.gb=dhx.html.remove(this.gb)}},dhx.ui.window);
dhx.protoUI({name:"alert",defaults:{position:"center",head:{template:"Info",css:"dhx_alert_template"},height:170,modal:true,callback:null,body:{type:"clean",rows:[{template:"<div class='dhx_alert_text'>#text#</div>",data:{text:"You have forgot to define the text :) "}},{view:"button",height:60,id:"dhx_alert_ok",css:"BigButton",label:"Ok",click:function(){this.getParent().getParent().dc(true)}}]}},m:function(){this.h.parentNode||document.body.appendChild(this.h);this.F.push(this.resize)},Ud:function(a){if(typeof a==
"string")a={title:this.defaults.head.template,message:a};dhx.extend(a,this.defaults);delete a.head;delete a.body;this.fb(a,{});this.resize();this.show()},title_setter:function(a){this.ea.define("template",a);this.ea.render()},message_setter:function(a){var b=this.o.j[0];b.data={text:a};b.render()},labelOk_setter:function(a){var b=this.o.j[1];b.config.label=a;b.render()},labelCancel_setter:function(a){var b=this.o.j[2];b.config.label=a;b.render()},dc:function(a){this.hide();this.g.callback&&dhx.toFunctor(this.g.callback).call(this,
a,this.g.details)}},dhx.ui.window);dhx.alert=dhx.single(dhx.ui.alert);
dhx.protoUI({name:"confirm",defaults:{height:210,body:{type:"clean",rows:[{id:"dhx_confirm_message",template:"<div class='dhx_alert_text'>#text#</div>",data:{text:"You have forgot to define the text :) "}},{height:53,view:"button",css:"BigButton",id:"dhx_confirm_ok",label:"Ok",click:function(){this.getParent().getParent().dc(true)}},{height:55,view:"button",type:"round",css:"BigButton",id:"dhx_confirm_cancel",label:"Cancel",click:function(){this.getParent().getParent().dc(false)}}]}}},dhx.ui.alert);
dhx.confirm=dhx.single(dhx.ui.confirm);
dhx.notice=function(a){if(typeof a!="object")a={message:a};a=dhx.Settings.H(a,{message:"Sample notice message.",css:"",width:240,height:70,delay:3500,top:9,right:9});if(dhx.notice.Na)a.top+=dhx.notice.Na;dhx.notice.Na=a.top+a.height;var b=dhx.html.create("div",{"class":"dhx_notice "+a.css},"<span class='dhx_notice_content'>"+a.message+"</span>");b.style.cssText="width:"+a.width+"px; height:"+a.height+"px; top:"+a.top+"px; right:"+a.right+"px";document.body.appendChild(b);dhx.delay(dhx.notice.He,b,
[dhx.notice.Na],a.delay)};dhx.notice.He=function(a){if(dhx.notice.Na==a)dhx.notice.Na=0;dhx.html.remove(this)};
dhx.CarouselPanel={hb:function(){var a,b,c;a=this.g.panel;dhx.html.remove(this.ia);b="z-index:"+dhx.ui.zIndex()+";";if(a.align=="bottom"||a.align=="top"){b+="height:"+a.size+"px; left:0px;";c=0;if(a.align=="bottom")c=this.w-this.g.panel.size;b+="top:"+c+"px"}else if(a.align=="right"||a.align=="left"){b+="width:"+a.size+"px;top:0px;";c=0;if(a.align=="right")c=this.q-this.g.panel.size;b+="left:"+c+"px"}this.ia=dhx.html.create("DIV",{"class":"dhx_carousel_panel",style:b},"");this.h.appendChild(this.ia);
this.Pb()},Pb:function(){var a,b;b=this.g.panel;this.ia?this.Ie():this.hb();var c=this.j?this.j.length:this.data.order.length;if(c>1){for(var d=0;d<c;d++){a=dhx.html.create("DIV",{"class":"dhx_item dhx_carousel_"+(d==this.v?"active":"inactive"),style:b.align=="left"||b.align=="right"?"float:none;":""},"");this.ia.appendChild(a)}a=c*this.g.panel.itemSize;if(b.align=="bottom"||b.align=="top"){this.ia.style.left=(this.q-a)/2+this.h.scrollLeft+"px";this.ia.style.width=a+"px"}else this.ia.style.top=(this.w-
a)/2+this.h.scrollTop+"px"}},Ie:function(){if(this.ia)for(var a=this.ia.childNodes,b=a.length-1;b>=0;b--)dhx.html.remove(a[b])}};
dhx.protoUI({name:"carousel",defaults:{scrollSpeed:"100"},m:function(){this.h.className+=" dhx_carousel";this.h.appendChild(dhx.html.create("DIV",{"class":"dhx_scroll_carousel"},""));this.k=this.h.firstChild;this.i=null;this.v=0;this.F.push(this.la)},la:function(){this.k.setAttribute("touch_scroll",this.s?"y":"x");this.attachEvent("onAfterScroll",this.fc)},fc:function(a){var b=this.s?this.w:this.q,c;if(this.s){c=Math.round(a.f/b);a.f=c*b}else{c=Math.round(a.e/b);a.e=c*b}this.v=-c;this.g.panel&&this.Pb();
return true},La:function(a){var b,c;c=-1;for(b=0;b<this.j.length;b++)if(this.j[b]==a){c=b;break}if(!(c<0||c==this.v)){this.v=c;b=this.s?this.w:this.q;a=-(this.s?0:c*b);c=-(this.s?c*b:0);this.scrollTo(a,c);this.hb()}},scrollTo:function(a,b){if(dhx.Touch)dhx.Touch.wa(this.k,a,b,this.g.scrollSpeed||"100ms");else{this.k.parentNode.scrollLeft=-a;this.k.parentNode.scrollTop=-b}},panel_setter:function(a){this.H(a,{size:16,itemSize:16,align:"bottom"});return a},n:function(){return dhx.ui.layout.prototype.n.call(this)},
l:function(a,b){var c=this.j.length,d=this.s?c:1,e=this.s?1:c;dhx.ui.view.prototype.l.call(this,a,b);this.k.style.height=b*d+"px";this.k.style.width=a*e+"px";this.Xb(a*e,b*d);this.hb()},getActive:function(){return this.j[this.v].g.id}},dhx.CarouselPanel,dhx.ui.baselayout,dhx.EventSystem);
dhx.protoUI({name:"grid",m:function(){this.k.innerHTML="<div class='dhx_grid_header' style='width:100%;height:"+this.g.headerHeight+"px;'></div><div class='dhx_grid_body'></div>";this.k.className+=" dhx_grid";this.Q=this.i=this.k.childNodes[1];dhx.extend(this,dhx.Scrollable);this.data.provideApi(this,true);this.data.attachEvent("onStoreUpdated",dhx.bind(this.render,this));this.attachEvent("onBeforeRender",this.Wf);this.Nc=null},header_setter:function(a){this.Q.previousSibling.style.display=a?"":"none";
return a},defaults:{select:true,type:"default",sorting:true,header:true,scroll:true,headerHeight:30},J:"dhx_f_id",on_click:{dhx_grid_row:function(a,b){if(this.g.select)this.g.select=="multiselect"?this.select(b,a.ctrlKey,a.shiftKey):this.select(b)},dhx_grid_header:function(a,b){if(this.g.sorting){b=dhx.html.locate(a,"column_id");if(b!==null){this.Nc=b;a=this.g.fields[b].sort;this.sort(a);a.dir=a.dir=="desc"?"asc":"desc"}}}},fields_setter:function(a){for(var b={},c=0;c<a.length;c++){if(typeof a[c].id==
"undefined")a[c].id="f"+c;var d=a[c].id;this.H(a[c],{width:100,label:d,template:"#"+a[c].id+"#",css:this.type.css,sort:{by:"#"+d+"#",dir:"asc",as:"string"},align:"left"});a[c].template=dhx.Template(a[c].template);b[d]=a[c]}return this.type.fields=b},Wf:function(){if(this.g.header){var a=this.g.fields,b=this.Q.previousSibling,c="<table style='width:0px;height:100%' cellspacing='0' cellpadding='0'><tr>";for(var d in a)c+=this.Tf(a[d].label,a[d].width,d);c+="</tr></table>";b.innerHTML=c}},Tf:function(a,
b,c){var d="<td class='dhx_grid_header_td' ";dhx.isNotDefined(c)||(d+="column_id='"+c+"'");d+="><div style='width:"+b+"px;'>"+(a===""?"&nbsp;":a);if(c&&c==this.Nc){a=this.g.fields[this.Nc].sort.dir;d+="<div class='dhx_sort_"+a+"' style='left:"+(b-this.type.sortImgWidth)+"px'></div>"}d+="</div></td>";return d},l:function(){if(dhx.ui.view.prototype.l.apply(this,arguments)){this.Q.style.height=this.w-(this.g.header?this.g.headerHeight:0)+"px";this.Q.style.width=this.q+"px";this.Q.previousSibling.style.width=
this.q+"px"}},type:{template:function(a,b){var c="";for(var d in b.fields){var e=b.fields[d];c+="<td style='' class='dhx_td' ><div align='"+e.align+"' style='width:"+e.width+"px;height:"+b.height+"px;line-height:"+b.height+"px' class='dhx_cell "+e.css+"'>"+e.template(a)+"</div></td>"}return c},align:"left",height:42,css:"",sortImgWidth:20,type:"text",templateStart:function(a,b){return"<table dhx_f_id='"+a.id+"' class='dhx_grid_row"+(a.$selected?"_selected":"")+" "+b.templateCss(a,b)+"' cellpadding='0' cellspacing='0'><tr>"},
templateCss:dhx.Template(""),templateEnd:dhx.Template("</tr></table>")}},dhx.SelectionModel,dhx.MouseEvents,dhx.RenderStack,dhx.DataLoader,dhx.ui.view,dhx.EventSystem,dhx.Settings);dhx.Type(dhx.ui.grid,{name:"dummy"});
dhx.protoUI({name:"video",m:function(a){if(!a.id)a.id=dhx.uid();this.F.push(this.qf)},qf:function(){var a=this.g;this.k=dhx.html.create("video",{"class":"dhx_view_video",style:"width:100%;height:100%;",src:a.src,autobuffer:"autobuffer"},"");if(a.poster)this.k.poster=a.poster;this.k.addEventListener&&this.k.addEventListener("click",function(b){return function(){b.play()}}(this.k),false);if(a.controls)this.k.controls=true;if(a.autoplay)this.k.autoplay=true;this.h.appendChild(this.k)},getVideo:function(){return this.k},
defaults:{src:"",controls:true,autoplay:true}},dhx.ui.view);
dhx.protoUI({name:"googlemap",m:function(a){if(!a.id)a.id=dhx.uid();this.h.innerHTML="<div class='dhx_map_content' style='width:100%;height:100%'></div>";this.k=this.h.firstChild;this.map=null;this.F.push(this.render)},render:function(){var a=this.g,b={zoom:a.zoom,center:a.center,mapTypeId:a.mapType};this.map=new google.maps.Map(this.k,b)},center_setter:function(a){if(typeof a!="object")a={};this.H(a,{x:48.724,y:8.215});a=new google.maps.LatLng(a.x,a.y);this.map&&this.map.setCenter(a);return a},mapType_setter:function(a){a=
google.maps.MapTypeId[a];this.map&&this.map.setMapTypeId(a);return a},zoom_setter:function(a){this.map&&this.map.setZoom(a);return a},defaults:{zoom:5,center:{},mapType:"ROADMAP"},l:function(){dhx.ui.view.prototype.l.apply(this,arguments);google.maps.event.trigger(this.map,"resize")}},dhx.ui.view);
dhx.Values={m:function(){this.elements={}},focus:function(a){this.elements[a].focus()},setValues:function(a){if(this.isVisible(this.g.id)){this.ne=dhx.copy(a);for(var b in this.elements)this.elements[b]&&this.elements[b].isVisible()&&!dhx.isNotDefined(a[b])&&this.elements[b].setValue(a[b]);this.callEvent("onChange",[])}else this.Oc=a},getValues:function(){var a=this.ne?dhx.copy(this.ne):{};for(var b in this.elements)a[b]=this.elements[b].getValue();return a},clear:function(){var a={};for(var b in this.elements)if(this.elements[b].ue)a[b]=
this.elements[b].g.defaultValue||"";this.setValues(a)},Mb:function(a,b){var c=this.data.driver;b=c.getRecords(c.toObject(a,b))[0];this.setValues(c?c.getDetails(b):a);this.callEvent("onXLE",[])},Gd:function(a){dhx.html.addCss(this.elements[a].i.firstChild,"invalid")},bd:function(a){dhx.html.removeCss(this.elements[a].i.firstChild,"invalid")}};dhx.CanvasMgr=function(a){var b=dhx.CanvasMgr.prototype.Yc;if(!(b[a]||!document.getCSSCanvasContext)){b[a]=true;dhx.CanvasMgr.prototype[a](b)}};
dhx.CanvasMgr.prototype={buttonGrd:["#fefefe","#e0e0e0","#e5e5e5","#e0e0e0",32],Yc:[],nb:function(a,b,c,d,e){var f=document.getCSSCanvasContext("2d",d,18,c);d=f.createLinearGradient(0,0,0,c);d.addColorStop(0,a);d.addColorStop(1,b);f.fillStyle=d;f.strokeStyle="#93B0BA";f.lineWidth=2;if(e){f.moveTo(0,0.5);f.lineTo(17.5,c/2+0.5);f.lineTo(0,c-0.5);f.lineTo(0,0.5)}else{f.moveTo(18,0.5);f.lineTo(0.5,c/2+0.5);f.lineTo(18,c-0.5);f.lineTo(18,0.5)}f.stroke();f.fill()},dhxArrowLeftT:function(){this.nb(this.buttonGrd[2],
this.buttonGrd[3],this.buttonGrd[4],"dhxArrowLeftT")},dhxArrowRightT:function(){this.nb(this.buttonGrd[2],this.buttonGrd[3],this.buttonGrd[4],"dhxArrowRightT",true)},dhxArrowLeft:function(){this.nb(this.buttonGrd[0],this.buttonGrd[1],this.buttonGrd[4],"dhxArrowLeft");dhx.CanvasMgr("dhxArrowLeftT")},dhxArrowRight:function(){this.nb(this.buttonGrd[0],this.buttonGrd[1],this.buttonGrd[4],"dhxArrowRight",true);dhx.CanvasMgr("dhxArrowRightT")}};
dhx.attachEvent("onClick",function(a){var b=dhx.ui.get(a);if(b&&b.touchable){b.getNode(a);var c=a.target||a.srcElement,d="";if(!(c.className&&c.className.indexOf("dhx_view")===0)){for(;c&&c.parentNode;){if(c.getAttribute){if(c.getAttribute("view_id"))break;if(d=c.className){d=d.split(" ");d=d[0]||d[1];if(b.on_click[d]){d=b.on_click[d].call(b,a,b.g.id,c);if(d===false)return}}}c=c.parentNode}if(b.g.click)(c=dhx.toFunctor(b.g.click))&&c.call&&c.call(b,b.g.id,a);if(b.g.multiview)(c=dhx.ui.get(b.g.multiview))&&
c.show&&c.show();if(b.g.popup){var e=dhx.ui.get(b.g.popup);e.g.master=b.g.id;e.show(b.getInput()||b.getNode(),e.o.g.align||"bottom",true)}b.callEvent("onItemClick",[b.g.id,a])}}});
dhx.protoUI({name:"button",touchable:true,defaults:{template:"<div class='dhx_el_button'><input type='button' style='width:100%;' value='#label#'></div>",height:42,label:"label",G:10},m:function(a){this.data=this.g;this.i=this.h;if(dhx.Ja){dhx.Ja.elements[a.name||a.id]=this;this.mapEvent({onbeforetabclick:dhx.Ja,onaftertabclick:dhx.Ja,onitemclick:dhx.Ja})}a.type=="prev"&&dhx.CanvasMgr("dhxArrowLeft");a.type=="next"&&dhx.CanvasMgr("dhxArrowRight")},type_setter:function(a){this.g.template=dhx.Template(this.le[a][0]);
var b=this.le[a][1];if(b)this.g.G=b},le:{round:["<div class='dhx_el_roundbutton'><input type='button' style='width:100%;' value='#label#'></div>"],"default":["<div class='dhx_el_defaultbutton'><input type='button' style='width:100%;' value='#label#'></div>"],form:[function(a){return"<div class='dhx_el_formbutton'><div style='width:100%;text-align:"+a.align+"'><input type='button' class='dhx_inp_form_button' style='text-align: "+a.inputAlign+"; width: "+(a.inputWidth?a.inputWidth+"px":"100%")+";' value='"+
(a.label||a.value)+"' /></div></div>"}],prev:["<div class='dhx_el_prevbutton'><div class='dhx_el_prevbutton_arrow'></div><div class='dhx_el_prevbutton_input_cont'><input type='button' value='#label#' /></div></div>",28],next:["<div class='dhx_el_nextbutton'><div class='dhx_el_nextbutton_input_cont'><input type='button' value='#label#' /></div><div class='dhx_el_nextbutton_arrow'></div></div>",28]},l:function(a,b){dhx.ui.view.prototype.l.call(this,a,b)&&this.render()},V:function(a){this.g.label=a;
this.getInput().value=a},setValue:function(a){var b=this.g.value;this.g.value=a;if(this.i.childNodes.length>0){this.Me=a;this.V(a);this.callEvent("onChange",[a,b])}},focus:function(){},getValue:function(){return this.g.label||""},getInput:function(){return this.i.getElementsByTagName("input")[0]},Y:function(){return this.getInput()},ja:function(){if(this.g.inputWidth)this.Y().style.width=this.g.inputWidth-this.g.G+"px";else this.Y().style.width=this.q-this.g.G+"px"},render:function(){if(dhx.AtomRender.render.call(this)){this.ja();
if(this.g.align)switch(this.g.align){case "right":this.i.firstChild.style.cssFloat="right";break;case "center":this.i.firstChild.style.display="inline-block";this.i.firstChild.parentNode.style.textAlign="center";break;case "middle":this.i.firstChild.style.marginTop=Math.round((this.w-40)/2)+"px";break;case "bottom":this.i.firstChild.style.marginTop=this.w-40+"px";break;case "left":this.i.firstChild.parentNode.style.textAlign="left";break;default:break}this.Sa&&this.Sa(this.data);this.Me!=this.g.value&&
this.setValue(this.g.value)}},refresh:function(){this.render()},on_click:{uc:function(a,b){if((a=dhx.html.locate(a,"button_id"))&&this.callEvent("onBeforeTabClick",[b,a])){this.g.selected=a;this.refresh();if(this.g.multiview){var c=dhx.ui.get(a);c&&c.show&&c.show()}this.callEvent("onAfterTabClick",[b,a])}},dhx_el_segmented:function(a,b){this.on_click.uc.call(this,a,b)},dhx_el_tabbar:function(a,b){this.on_click.uc.call(this,a,b)},dhx_inp_counter_next:function(){this.next(this.g.step,this.g.min,this.g.max)},
dhx_inp_counter_prev:function(){this.prev(this.g.step,this.g.min,this.g.max)},dhx_inp_toggle_left_off:function(){var a=this.g.options;this.setValue(a[0].value)},dhx_inp_toggle_right_off:function(){var a=this.g.options;this.setValue(a[1].value)},dhx_inp_combo:function(a,b,c){c.focus()},dhx_inp_checkbox_border:function(){this.toggle()},dhx_inp_checkbox_label:function(){this.toggle()},dhx_inp_radio_border:function(a){a=dhx.html.locate(a,"radio_id");this.setValue(a)},dhx_inp_radio_label:function(a,b,
c){c=c.parentNode.getElementsByTagName("input")[0];return this.on_click.dhx_inp_radio_border.call(this,c,b,c)}},Ta:function(a){for(var b=0;b<a.length;b++)if(typeof a[b]=="string")a[b]={value:a[b],label:a[b]};else if(a[b].value){if(!a[b].label)a[b].label=a[b].value}else a[b].value=a[b].label}},dhx.ui.view,dhx.AtomRender,dhx.Settings,dhx.EventSystem);
dhx.protoUI({name:"imagebutton",defaults:{template:"<div class='dhx_el_imagebutton'><span><img src='#src#'/>&nbsp;#label#</span></div>",label:""},ja:function(){}},dhx.ui.button);dhx.protoUI({name:"label",defaults:{template:"<div class='dhx_el_label'>#label#</div>"},Y:function(){return this.i.firstChild},V:function(a){this.g.label=a;this.i.firstChild.innerHTML=a}},dhx.ui.button);
dhx.protoUI({name:"icon",defaults:{template:"<div class='dhx_el_icon'><div class='dhx_el_icon_#icon#'></div></div>",width:42},ja:function(){}},dhx.ui.button);
dhx.protoUI({name:"segmented",defaults:{template:function(a,b){var c=a.options,d="",e;b.Ta(c);if(!a.selected)a.selected=c[0].value;for(var f=0;f<c.length;f++){e=c[f].width||a.inputWidth?"width: "+((c[f].width||Math.round(a.inputWidth/c.length))-b.g.G)+"px;":"";d+="<div style='"+e+"' class='"+(a.selected==c[f].value?"selected ":"")+"segment_"+(f==c.length-1?"N":f>0?1:0)+"' button_id='"+c[f].value+"'>"+c[f].label+"</div>"}return"<div class='dhx_el_segmented'>"+d+"</div>"},G:28,Nb:0},V:function(a){if(this.i&&
this.i.firstChild)for(var b=this.i.firstChild.childNodes,c=0;c<b.length;c++)if(dhx.html.locate(b[c],"button_id")==a){this.on_click.uc.call(this,b[c],this.g.options[c]);return true}},getValue:function(){return this.g.selected},ja:function(){}},dhx.ui.button);
dhx.protoUI({name:"tabbar",defaults:{height:49,template:function(a,b){var c=a.options;b.Ta(c);for(var d="",e,f=0;f<c.length;f++){var g="",h=c[f].src;if(c[f].value==a.selected){g=" class='selected'";h=c[f].srcSelected||c[f].src}if(c[f].css)g+=" "+c[f].css;e=a.optionWidth||c[f].width||a.inputWidth?"width: "+(c[f].width||Math.ceil(a.inputWidth/c.length)-b.g.G)+"px;":"";d+="<div"+g+" button_id='"+c[f].value+"' style='"+e+"'>";d+=h?"<img src='"+h+"'/><span>"+c[f].label+"</span>":"<div style='height:26px'></div><span>"+
c[f].label+"</span>";d+="</div>"}return"<div class='dhx_el_tabbar'>"+d+"</div>"},G:4},V:function(){dhx.ui.segmented.setValue.apply(this,arguments)},getValue:function(){return dhx.ui.segmented.getValue.call(this)},ja:function(){}},dhx.ui.button);
dhx.protoUI({name:"text",ue:true,Ic:function(a,b,c){if(c.labelPosition=="left")a+=b;else a=b+a;return"<div class='dhx_el_"+this.name+"'>"+a+"</div>"},Qb:function(a,b,c,d){var e=a.inputAlign||"left",f=a.labelAlign||"left",g=dhx.uid(),h="<div class='dhx_inp_text_border'>";h+="<div class='dhx_inp_text_label' style='width: "+this.g.labelWidth+"px; text-align: "+f+";'><label onclick='' for='"+g+"' class='dhx_inp_label_for_text'>"+(a.label||"")+"</label></div>";var j=this.g.inputWidth-this.g.labelWidth-
18;if(j<0)j=0;h+=d?"<div class='dhx_inp_"+b+"' onclick='' style='width: "+j+"px; text-align: "+e+";' >"+(a.text||a.value||"")+"</div>":"<input id='"+g+"' type='"+(a.type||this.name)+"' value='"+(a.text||a.value||"")+"' "+(c||a.readonly?"readonly='true' ":"")+(a.maxlength?"maxlength='"+a.maxlength+"' ":"")+(a.placeholder?"placeholder='"+a.placeholder+"' ":"")+" class='dhx_inp_"+b+"' style='width: "+j+"px; text-align: "+e+";' />";h+="</div>";return"<div class='dhx_el_"+this.name+"'>"+h+"</div>"},Rb:function(a,
b){if(!a.label)return"";var c=a.labelAlign||"left";return"<div class='dhx_inp_"+b+"_label' style='width: "+a.labelWidth+"px; text-align: "+c+";'>"+a.label+"</div>"},defaults:{template:function(a,b){return b.Qb(a,"text")},labelWidth:80,G:28,Nb:0},type_setter:function(a){return a},ja:function(){if(this.g.inputWidth)this.Y().style.width=this.g.inputWidth-this.g.labelWidth-this.g.G+"px";else this.Y().style.width=this.q-this.g.labelWidth-this.g.G-this.g.Nb+"px"},focus:function(){var a=this.i.getElementsByTagName("input")[0];
a&&a.focus()},V:function(a){this.getInput().value=a},getValue:function(){return this.getInput().value}},dhx.ui.button);
dhx.protoUI({name:"toggle",defaults:{template:function(a,b){var c=a.options;b.Ta(c);var d=b.g.inputWidth/2||"auto",e=[c[0].width||d,c[1].width||d],f=b.Rb(a,"toggle"),g="<input type='button' style='width: "+e[0]+"px;' value='"+a.options[0].label+"' />";g+="<input type='button' style='width: "+e[1]+"px;' value='"+a.options[1].label+"'  />";return b.Ic(f,g,a)},label:"",labelWidth:0,G:20},ja:function(){},Sa:function(a){this.setValue(a.value)},Cb:function(){return this.i.getElementsByTagName("input")},
V:function(a){var b=this.Cb(),c=this.g.options;if(a==c[1].value){b[0].className="dhx_inp_toggle_left_off";b[1].className="dhx_inp_toggle_right_on"}else{b[0].className="dhx_inp_toggle_left_on";b[1].className="dhx_inp_toggle_right_off"}},getValue:function(){var a=this.Cb(),b=this.g.options;return a[0].className=="dhx_inp_toggle_left_on"?b[0].value:b[1].value}},dhx.ui.text);
dhx.protoUI({name:"input",defaults:{template:function(a){for(var b="<input",c=["maxlength","disabled","placeholder"],d=0;d<c.length;d++)if(a[c[d]])b+=" "+c[d]+"='"+a[c[d]]+"'";b+=" type='"+(a.type||"text")+"'";b+="/>";return"<div class='dhx_el_input'>"+b+"</div>"},G:18,labelWidth:0}},dhx.ui.text);
dhx.protoUI({name:"select",defaults:{template:function(a,b){var c=a.options;b.Ta(c);b="<select";if(a.disabled)b+=" disabled='true'";b+=">";for(a=0;a<c.length;a++)b+="<option"+(c[a].selected?" selected='true'":"")+(c[a].value?" value='"+c[a].value+"'":"")+">"+c[a].label+"</option>";b+="</select>";return"<div class='dhx_el_select'>"+b+"</div>"},labelWidth:0,Nb:0,G:0},getInput:function(){return this.i.firstChild.firstChild}},dhx.ui.text);
dhx.protoUI({name:"textarea",defaults:{template:function(a){return"<div class='dhx_el_textarea'><textarea class='dhx_inp_textarea' placeholder='"+(a.label||"")+"' style=''>"+(a.value||"")+"</textarea></div>"},cssContant:28},ja:function(){if(this.g.inputWidth)this.Y().style.width=this.g.inputWidth-this.g.cssContant+"px";else this.Y().style.width=this.q-this.g.Nb-this.g.cssContant+"px";if(this.g.inputHeight)this.Y().style.height=this.g.inputHeight+"px";else this.Y().style.height=this.w-9+"px"},getInput:function(){return this.i.firstChild.firstChild},
V:function(a){this.getInput().value=a},getValue:function(){return this.getInput().value}},dhx.ui.text);
dhx.protoUI({name:"counter",defaults:{template:function(a,b){var c=a.value||0,d=b.Rb(a,"counter"),e="<input type='button' class='dhx_inp_counter_prev' value='\u25ac' />";e+="<div class='dhx_inp_counter_value' >"+c+"</div>";e+="<input type='button' class='dhx_inp_counter_next' value='+' />";return b.Ic(d,e,a)},min:1,step:1,labelWidth:0,label:"",G:145},Y:function(){return this.getInput().parentNode},getLabel:function(){return this.getInput().previousSibling||this.getInput().parentNode.lastChild},ja:function(){if(this.g.label&&
!this.g.labelWidth){var a=this.getLabel();if(a)a.style.width=(this.g.inputWidth||this.q)-this.g.G+"px"}},V:function(a){this.getInput().nextSibling.innerHTML=a},getValue:function(){return(this.g.value||0)*1},next:function(a,b,c){a=a||1;this.ge(a,b,c)},prev:function(a,b,c){a=-1*(a||1);this.ge(a,b,c)},ge:function(a,b,c){b=typeof b=="undefined"?-Infinity:b;c=typeof c=="undefined"?Infinity:c;var d=this.getValue()+a;d>=b&&d<=c&&this.setValue(d)}},dhx.ui.text);
dhx.protoUI({name:"checkbox",defaults:{template:function(a,b){var c=a.value?"dhx_inp_checkbox_on":"dhx_inp_checkbox_on hidden",d="<div class='dhx_inp_checkbox_border'><input type='button' class='"+c+"' value='' /></div>",e=b.Rb(a,"checkbox");return b.Ic(e,d,a)}},V:function(a){var b=this.getInput();b.className=a?"dhx_inp_checkbox_on":"dhx_inp_checkbox_on hidden"},toggle:function(){this.setValue(!this.getValue())},getLabel:function(){var a=this.getInput().parentNode;return a.nextSibling||a.previousSibling},
getValue:function(){return this.g.value?1:0},Y:function(){return this.getInput().parentNode.parentNode}},dhx.ui.counter);
dhx.protoUI({name:"radio",defaults:{template:function(a,b){b.Ta(a.options);for(var c=[],d=0;d<a.options.length;d++){a.options[d].newline&&c.push("<div style='clear:both;'></div>");var e="<div radio_id='"+a.options[d].value+"' class='dhx_inp_radio_border'><input type='button' class='"+(a.options[d].value==a.value?"dhx_inp_radio_on":"dhx_inp_radio_on hidden")+"' value='' /></div>";a.label=a.options[d].label;var f=b.Rb(a,"radio");a.labelPosition=="left"?c.push(f+e):c.push(e+f)}return"<div class='dhx_el_radio'><div>"+
c.join("</div><div>")+"</div></div>"}},n:function(){var a=dhx.ui.button.prototype.n.call(this);if(this.g.options){for(var b=1,c=0;c<this.g.options.length;c++)this.g.options[c].newline&&b++;a[3]=Math.max(a[3],this.defaults.height*b)}return a},Cb:function(){return this.i.getElementsByTagName("input")},V:function(a){for(var b=this.Cb(),c=0;c<b.length;c++)b[c].className=b[c].parentNode.getAttribute("radio_id")==a?"dhx_inp_radio_on":"dhx_inp_radio_on hidden"},getValue:function(){return this.g.value}},
dhx.ui.text);
dhx.protoUI({name:"richselect",defaults:{template:function(a,b){return b.Qb(a,"list",true,true)}},pa:function(a){a.popup||this.hc("list",a);this.Lc();this.pa=function(){}},options_setter:function(a){for(var b=this.g.data=[],c=0;c<a.length;c++){var d=a[c].value||a[c].label||a[c],e=a[c].label||a[c].value||a[c];b.push({id:d,value:e})}return a},Sa:function(a){this.pa(a);if(!dhx.isNotDefined(a.value)){this.setValue(a.value,{},a);var b=dhx.ui.get(a.popup.toString());b=b.o;b.attachEvent("onXLE",dhx.bind(function(){this.setValue(this.g.value,
{},a)},this))}},hc:function(a,b){var c=dhx.extend({},b);delete c.align;delete c.height;delete c.width;delete c.template;c.view=a;c.id=(b.id||b.name)+"_"+a;c.width=c.popupWidth||290;a=dhx.uid();var d={id:a,view:"popup",body:c};dhx.ui(d).hide();b.popup=a;this.Lc()},Lc:function(){var a=dhx.ui.get(this.g.popup);a.o.attachEvent("onItemClick",function(b){var c=dhx.ui.get(this.getParent().g.master);this.getParent().hide();c.setValue(b)})},getInput:function(){return this.i.firstChild.childNodes[0].childNodes[1]},
V:function(a){var b=dhx.ui.get(this.g.popup).o;b=b.type?b.type.template(b.item(a)||a,b.type):a;this.g.value=a;this.g.text=b;if(this.name=="combo")this.getInput().value=b.replace(/<[^>]*>/g,"");else this.getInput().innerHTML=b},getValue:function(){return this.g.value}},dhx.ui.text);
dhx.protoUI({name:"combo",defaults:{template:function(a,b){return b.Qb(a,"combo")}},pa:function(a){a.popup||this.hc("list",a);this.Lc();dhx.event(this.i,"keydown",function(b){b=b||event;var c=b.target||b.srcElement,d=dhx.ui.get(a.popup);window.clearTimeout(d.key_timer);d.key_timer=window.setTimeout(function(){d.o.filter(function(f){if(f.value.toString().toLowerCase().indexOf(c.value.toLowerCase())===0)return true;return false});var e=dhx.ui.get(d.g.master);e.g.value=d.o.dataCount()==1&&d.o.type.template(d.o.item(d.o.first()))==
c.value?d.o.first():""},200);d.show(c,d.o.g.align||"bottom",true)},this);this.pa=function(){}},Sa:function(a){this.pa(a);dhx.isNotDefined(a.value)||this.setValue(a.value)}},dhx.ui.richselect);
dhx.protoUI({name:"datepicker",defaults:{template:function(a,b){return b.Qb(a,"list",true,true)}},pa:function(a){a.popup||this.hc("calendar",a);a=dhx.ui.get(a.popup);a.o.attachEvent("onDateSelect",function(b){var c=dhx.ui.get(this.getParent().g.master);this.getParent().hide();c.setValue(b)});this.pa=function(){}},Sa:function(a){this.pa(a);dhx.isNotDefined(a.value)||this.setValue(a.value)},V:function(a){var b=dhx.ui.get(this.g.popup.toString()),c=b.o;c.selectDate(a);this.g.value=a?c.config.date:"";
this.getInput().innerHTML=a?(this.g.dateFormatStr||dhx.i18n.dateFormatStr)(this.g.value):""},dateFormat_setter:function(a){this.g.dateFormatStr=dhx.Date.dateToStr(a);return dhx.Date.strToDate(a)},getValue:function(){return this.g.value||null}},dhx.ui.richselect);
dhx.protoUI({name:"toolbar",defaults:{type:"MainBar"},Uf:true,ic:44,m:function(a){this.k.style.border="1px solid #AEAEAE";this.Rd(a)},Rd:function(a){this.k.className+=" dhx_toolbar";if(a.elements){this.W=a.elements;this.s=false}delete a.elements;dhx.Ja=this},n:function(){var a=dhx.ui.baselayout.prototype.n.call(this);if(a[3]>0&&(!this.s||!this.g.scroll))this.g.height=a[3];if(a[1]>0&&(this.s||!this.g.scroll))this.g.width=a[1];a=dhx.ui.view.prototype.n.call(this);if(a[3]<=0&&this.ic>0){a[3]=this.ic;
a[2]=0}return a},l:function(){dhx.ui.view.prototype.l.apply(this,arguments);dhx.ui.baselayout.prototype.l.call(this,this.q,this.w)},render:function(){if(this.isVisible(this.g.id))if(this.Oc){this.setValues(this.Oc);this.Oc=null}},refresh:function(){this.render()},type_setter:function(a){this.k.className+=" dhx_"+a.toLowerCase()}},dhx.Scrollable,dhx.AtomDataLoader,dhx.Values,dhx.ui.baselayout,dhx.EventSystem,dhx.ValidateData);
dhx.protoUI({name:"form",defaults:{scroll:true},ic:-1,Rd:function(a){this.k.className+=" dhx_form";if(a.elements){this.W=a.elements;this.s=true}delete a.elements;dhx.Ja=this},type_setter:function(){}},dhx.ui.toolbar);
dhx.protoUI({name:"multiview",defaults:{animate:{}},m:function(){this.v=0;this.s=1;this.h.style.position="relative";this.h.className+=" dhx_multiview";this.aa=[]},ve:function(a,b){var c=dhx.ui.get(a);if(!c.ib){c.Sb=[];c.ib={}}if(!c.ib[b]){c.ib[b]=true;c.Sb.push(b)}},Gc:function(a){var b=dhx.ui.get(a);if(this.aa[this.aa.length-2]!=a){this.aa.length==10&&this.aa.splice(0,1);this.aa.push(a)}else this.aa.splice(this.aa.length-1,1);if(b.ib){for(a=0;a<b.Sb.length;a++)dhx.ui.get(b.Sb[a]).render();b.Sb=[];
b.ib={}}},T:function(a){a=a||this.W;for(var b=0;b<a.length;b++)a[b].p=this.g.p||{top:1,bottom:1,left:1,right:1};dhx.ui.baselayout.prototype.T.call(this,a);for(b=1;b<this.j.length;b++)dhx.html.remove(this.j[b].h);for(b=0;b<a.length;b++){var c=this.j[b];if(!(c.j&&!c.Uf)){var d=c.g.p;if(d.top)c.h.style.borderTopWidth="0px";if(d.left)c.h.style.borderLeftWidth="0px";if(d.right)c.h.style.borderRightWidth="0px";if(d.bottom)c.h.style.borderBottomWidth="0px"}}this.Gc(this.getActive())},cells_setter:function(a){this.W=
a},ff:function(a,b){return a<b?"right":"left"},La:function(a,b){if(this.Ga)return dhx.delay(this.La,this,[a],100);for(var c=-1,d=0;d<this.j.length;d++)if(this.j[d]==a){c=d;break}if(!(c<0||c==this.v))if((b||typeof b=="undefined")&&dhx.animate.isSupported()&&this.g.animate){var e=dhx.extend({},this.g.animate);e.direction=this.ff(c,this.v);e=dhx.Settings.H(b||{},e);var f=dhx.animate.formLine(this.j[c].h,this.j[this.v].h,e);this.j[c].n();this.j[c].l(this.q,this.w);e.callback=function(){dhx.animate.breakLine(f);
this.Ga=false;e.master=e.callback=null};e.master=this;this.v=c;this.Gc(this.getActive());dhx.animate(f,e);this.Ga=true}else{dhx.html.remove(this.j[this.v].h);this.v=c;this.j[this.v].n();this.j[this.v].l(this.q,this.w);this.Gc(this.getActive());this.h.appendChild(this.j[d].h)}},n:function(){var a=this.j[this.v].n();if(this.g.height>-1){a[3]=this.g.height;a[2]=0}if(this.g.width>-1){a[1]=this.g.width;a[0]=0}if(a[0])a[1]=0;if(a[2])a[3]=0;return a},l:function(a,b){dhx.ui.baseview.prototype.l.call(this,
a,b);this.j[this.v].l(a,b)},isVisible:function(a,b){if(b&&b!=this.getActive()){a&&this.ve(b,a);return false}return dhx.ui.view.prototype.isVisible.call(this,a,this.g.id)},getActive:function(){return this.j.length?this.j[this.v].g.id:null},back:function(a){a=a||1;if(this.aa.length>a){var b=this.aa[this.aa.length-a-1];dhx.ui.get(b).show();return b}return null}},dhx.ui.baselayout);
dhx.TreeStore={m:function(){this.branch={0:[]}},clearAll:function(){this.branch={0:[]};dhx.DataStore.prototype.clearAll.call(this)},prevSibling:function(a){var b=this.branch[this.item(a).$parent];a=dhx.PowerArray.find.call(b,a)-1;if(a>=0)return b[a];return null},nextSibling:function(a){var b=this.branch[this.item(a).$parent];a=dhx.PowerArray.find.call(b,a)+1;if(a<b.length)return b[a];return null},parent:function(a){return this.item(a).$parent},firstChild:function(a){if((a=this.branch[a])&&a.length)return a[0];
return null},hasChild:function(a,b){if((a=this.branch[a])&&a.length)for(var c=0;c<a.length;c++){if(a[c]==b)return true;if(this.hasChild(a[c],b))return true}return false},branchIndex:function(a,b){a=this.branch[a];return dhx.PowerArray.find.call(a,b)},extraParser:function(a,b,c){a.$parent=b||0;a.$level=c||1;this.branch[a.$parent]||(this.branch[a.$parent]=[]);this.branch[a.$parent].push(a.id);if(!a.item)return a.$count=0;if(a.item instanceof Array)a.$count=a.item.length;else{a.item=[a.item];a.$count=
1}for(b=0;b<a.item.length;b++){var d=a.item[b];this.pull[this.id(d)]=d;this.extraParser(d,a.id,a.$level+1)}delete a.item},provideApi:function(a,b){for(var c=["prevSibling","nextSibling","parent","firstChild","hasChild","branchIndex"],d=0;d<c.length;d++)a[c[d]]=dhx.methodPush(this,c[d]);dhx.DataStore.prototype.provideApi.call(this,a,b)},getTopRange:function(){return dhx.toArray([].concat(this.branch[0])).map(function(a){return this.item(a)},this)},eachChild:function(a,b){if(this.branch[a])return dhx.PowerArray.each.call(this.branch[a],
b)},add:function(a,b,c){this.branch[c||0]=this.order=dhx.toArray(this.branch[c||0]);(c=this.item(c||0))&&c.$count++;a.$count=0;a.$level=c?c.$level+1:1;a.$parent=c?c.id:0;return dhx.DataStore.prototype.add.call(this,a,b)},remove:function(a){var b=this.item(a),c=b.$parent||0;this.branch[c]=this.order=dhx.toArray(this.branch[c]);c&&this.item(c).$count--;return dhx.DataStore.prototype.remove.call(this,a)},serialize:function(a){a=this.branch[a||0];for(var b=[],c=0;c<a.length;c++){var d=this.pull[a[c]];
b.push(d);if(d.$count)d.item=this.serialize(a[c])}return b}};
dhx.protoUI({name:"list",m:function(){this.data.provideApi(this,true)},defaults:{select:false,scroll:true},J:"dhx_l_id",on_click:{dhx_list_item:function(a,b){if(this.g.select){this.Ia=true;this.g.select=="multiselect"?this.select(b,a.ctrlKey,a.shiftKey):this.select(b);this.Ia=false}}},n:function(){if(this.type.width!="auto")this.g.width=this.type.width+(this.type.padding+this.type.margin)*2;if(this.g.yCount)this.g.height=(this.type.height+(this.type.padding+this.type.margin)*2+1)*(this.g.yCount==
"auto"?this.dataCount():this.g.yCount);return dhx.ui.view.prototype.n.call(this)},l:function(){dhx.ui.view.prototype.l.apply(this,arguments)},type:{css:"",widthSize:function(a,b){return b.width+(b.width>-1?"px":"")},heightSize:function(a,b){return b.height+(b.height>-1?"px":"")},template:dhx.Template("#value#"),width:"auto",height:22,margin:0,padding:10,border:1,templateStart:dhx.Template("<div dhx_l_id='#id#' class='dhx_list_item dhx_list_{common.css}_item{obj.$selected?_selected:}' style='width:{common.widthSize()}; height:{common.heightSize()}; padding:{common.padding}px; margin:{common.margin}px; overflow:hidden;'>"),
templateEnd:dhx.Template("</div>")}},dhx.MouseEvents,dhx.SelectionModel,dhx.Scrollable,dhx.ui.proto);
dhx.protoUI({name:"grouplist",defaults:{animate:{}},m:function(){dhx.extend(this.data,dhx.TreeStore,true);this.data.provideApi(this,true);this.data.attachEvent("onClearAll",dhx.bind(this.Md,this));this.h.className+=" dhx_grouplist";this.Md()},Md:function(){this.ta=[];this.K=[]},on_click:{dhx_list_item:function(a,b){if(this.Ga)return false;for(var c=0;c<this.K.length;c++)if(this.K[c]==b){for(a=c;a<this.K.length;a++)this.data.item(this.K[a]).$template="";if(c){this.ta=this.data.branch[this.K[c-1]];
this.K.splice(c)}else{this.ta=this.data.branch[0];this.K=[]}this.Bd=false;return this.render()}c=this.item(b);if(c.$count){this.Bd=true;this.K.push(b);c.$template="Back";this.ta=this.data.branch[c.id];return this.render()}else if(this.g.select){this.Ia=true;this.g.select=="multiselect"?this.select(b,a.ctrlKey,a.shiftKey):this.select(b);this.Ia=false}}},render:function(){if(this.Ga)return dhx.delay(this.render,this,arguments,100);for(var a=0;a<this.ta.length;a++)this.data.item(this.ta[a]).$template=
"";this.data.order=this.K.length?dhx.toArray([].concat(this.K).concat(this.ta)):dhx.toArray([].concat(this.data.branch[0]));if(this.callEvent("onBeforeRender",[this.data])){if(this.Ia||!this.i.innerHTML||!(dhx.animate.isSupported()&&this.g.animate)||this.Of==this.K.length)dhx.RenderStack.render.apply(this,arguments);else{var b=this.i.cloneNode(false);b.innerHTML=this.data.getRange().map(this.ya,this).join("");var c=dhx.extend({},this.g.animate);c.direction=this.Bd?"left":"right";var d=dhx.animate.formLine(b,
this.i,c);c.master=this;c.callback=function(){this.i=b;dhx.animate.breakLine(d);this.u=c.master=c.callback=null;this.Ga=false;this.callEvent("onAfterRender",[])};this.Ga=true;dhx.animate(d,c)}this.Of=this.K.length}},templateBack_setter:function(a){this.type.templateBack=dhx.Template(a)},templateItem_setter:function(a){this.type.templateItem=dhx.Template(a)},templateGroup_setter:function(a){this.type.templateGroup=dhx.Template(a)},type:{template:function(a,b){if(a.$count)return b.templateGroup(a,b);
return b.templateItem(a,b)},css:"group",templateStart:dhx.Template("<div dhx_l_id='#id#' class='dhx_list_item dhx_list{obj.$count?_group:_item}{obj.$template?_back:}{obj.$selected?_selected:}' style='width:{common.width}px; height:{common.height}px; padding:{common.padding}px; margin:{common.margin}px; overflow:hidden;'>"),templateBack:dhx.Template("&lt; #value#"),templateItem:dhx.Template("#value#"),templateGroup:dhx.Template("#value#"),templateEnd:function(a){var b="";if(a.$count)b+="<div class='dhx_arrow_icon'></div>";
b+="</div>";return b}},showItem:function(a){var b,c;if(a){b=this.item(a);c=b.$parent;if(b.$count)c=b.id}this.ta=this.data.branch[c||0];for(this.K=[];c;){this.item(c).$template="Back";this.K.unshift(c);c=this.item(c).$parent}this.Ia=true;this.render();this.Ia=false;dhx.RenderStack.showItem.call(this,a)}},dhx.ui.list);dhx.Type(dhx.ui.grouplist,{});
dhx.protoUI({name:"pagelist",defaults:{scroll:"x",panel:false,scrollOffset:0},nf:true,m:function(a){this.h.className+=" dhx_pagelist";a.scroll=a.scroll=="y"?"y":"x";this.type.layout=a.scroll;this.attachEvent("onAfterRender",this.ag);this.F.push(this.la);this.v=0},la:function(){if(this.g.scroll=="x")this.i.style.height="100%";this.type.layout=this.g.scroll;this.attachEvent("onAfterScroll",this.fc)},ag:function(){if(this.g.scroll=="x")this.i.style.width=(this.type.width+(this.type.padding+this.type.margin)*
2+this.type.border)*this.dataCount()+"px";this.g.panel&&this.hb()},panel_setter:function(a){if(a){this.h.className+=" hidden_scroll";if(a===true)a={};this.H(a,{size:16,itemSize:16,align:"bottom"})}return a},Zd:function(a){a=this.indexById(a);if(typeof a!="undefined"&&this.g.panel){this.v=a;this.Pb()}},getActive:function(){return this.v?this.data.order[this.v]:this.first()},fc:function(a){var b=(this.g.scroll=="y"?this.type.height:this.type.width)+(this.type.padding+this.type.margin)*2+this.type.border,
c=this.g.scroll=="y"?this.i.scrollHeight-this.w:this.i.scrollWidth-this.q,d;if(this.g.scroll=="y"){d=Math.round(a.f/b);a.f=d*b;a.f=this.cd(a.f,c)}else{d=Math.round(a.e/b);a.e=d*b;a.e=this.cd(a.e,c)}this.v=-d;this.g.panel&&this.Pb();return true},cd:function(a,b){var c=this.g.scrollOffset;if(c&&Math.abs(a)>c)a+=a>0?-c:1-c;if(Math.abs(a)>b)a=-b;return a},n:function(){if(this.g.scroll=="y"){if(this.type.width!="auto")this.g.width=this.type.width+(this.type.padding+this.type.margin)*2+this.type.border;
if(this.g.yCount)this.g.height=(this.type.height+(this.type.padding+this.type.margin)*2+this.type.border)*(this.g.yCount=="auto"?this.dataCount():this.g.yCount)}else if(this.type.height!="auto")this.g.height=this.type.height+(this.type.padding+this.type.margin)*2+this.type.border;return dhx.ui.view.prototype.n.call(this)},l:function(){if(dhx.ui.view.prototype.l.apply(this,arguments)){if(this.type.fullScreen){this.type.width=this.q;this.type.height=this.w;this.type.padding=0;this.render()}this.g.panel&&
this.hb()}},type:{templateStart:function(a,b){var c="dhx_list_item dhx_list_"+b.css+"_item"+(a.$selected?"_selected":"");b="width:"+b.width+"px; height:"+b.height+"px; padding:"+b.padding+"px; margin:"+b.margin+"px; overflow:hidden;"+(b.layout&&b.layout=="x"?"float:left;":"");return"<div dhx_l_id='"+a.id+"' class='"+c+"' style='"+b+"'>"}}},dhx.ui.list,dhx.CarouselPanel);
dhx.protoUI({name:"accordionitem",m:function(a){this.h.innerHTML="<div dhx_ai_id='"+a.id+"'  class='dhx_accordionitem_header'><div class='dhx_accordionitem_button' ></div><div class='dhx_accordionitem_label' ></div></div><div class='dhx_accordionitem_body'></div>";this.k=this.h;this.A=this.k.childNodes[0];if(!a.header)this.A.style.display="none";this.vd=this.k.childNodes[0].childNodes[1];this.ud=this.k.childNodes[0].childNodes[0];this.Q=this.k.childNodes[1];this.h.className+=" dhx_accordionitem";
this.ea=this.o=null;this.j=true;this.g.p=a.p||{top:1,bottom:1,left:1,right:1};this.F.push(this.Be)},Be:function(){var a=this.g.p;if(a){this.ub(a.top,"borderTopWidth");this.ub(a.left,"borderLeftWidth");this.ub(a.right,"borderRightWidth");this.ub(a.bottom,"borderBottomWidth")}this.Kf=this.g.width;this.Jf=this.g.height},ub:function(a,b){if(a){this.A.style[b]="0px";this.o.j||(this.o.h.style[b]="0px")}},J:"dhx_ai_id",body_setter:function(a){if(typeof a!="object")a={template:a};a.p=dhx.copy(this.g.p);this.o=
dhx.ui.Pa(a);this.o.L=this;this.Q.appendChild(this.o.h);return a},header_setter:function(a){if(a)a=dhx.Template(a);return a},headerAlt_setter:function(a){if(a)a=dhx.Template(a);return a},n:function(){var a=this.o.n(),b=0;if(this.getParent().s)if(this.g.collapsed){a[3]=this.Bb();a[2]=0}else b=this.g.headerHeight;else if(this.g.collapsed){a[1]=this.Bb();a[0]=0}else b=this.g.headerHeight;this.g.width=a[1]||this.Kf;this.g.height=a[3]?a[3]+b:this.Jf;if(a[0]||a[2])this.g.gravity=Math.max(a[0],a[2]);return dhx.ui.baseview.prototype.n.call(this)},
on_click:{dhx_accordionitem_header:function(a){this.he(a)},dhx_accordionitem_header_v:function(a){this.he(a)}},he:function(a){this.define("collapsed",!this.g.collapsed);dhx.callEvent("onClick",[this.g.id]);return dhx.html.preventEvent(a)},collapsed_setter:function(a){if(this.g.header!==false){var b=this.getParent();if(a)if(!b||b.Fe(this))this.Ke();else return false;else this.af();(this.g.collapsed=a)||this.getParent().te(this);this.refresh();if(this.getParent()){b.Xf();b.callEvent("onAfter"+(a?"Collapse":
"Expand"),[this.g.id])}return a}},collapse:function(){this.define("collapsed",true)},expand:function(){this.define("collapsed",false)},af:function(){this.Q.style.display="";dhx.html.removeCss(this.ud,"collapsed");this.Z=null},Ke:function(){this.getParent();if(this.g.headerAlt)this.vd.innerHTML=this.g.headerAlt();this.Q.style.display="none";dhx.html.addCss(this.ud,"collapsed");this.Z=null},refresh:function(){var a=this.g[this.g.collapsed?"headerAlt":"header"]||this.g.header;if(a)this.vd.innerHTML=
a()},Bb:function(){return this.g.collapsed?this.g.headerAltHeight:this.g.headerHeight},l:function(a,b){if(dhx.ui.baseview.prototype.l.call(this,a,b)){a=this.q;b=this.w;var c=this.Bb()-(this.g.p.top?0:1);if(this.g.header){this.A.style.height=c+"px";this.A.style.lineHeight=c+"px";this.A.style.width="auto";this.A.style[dhx.env.transform]="";if(this.g.p.left)this.A.style.borderLeftWidth="0px";if(this.g.p.right)this.A.style.borderRightWidth="0px";if(this.getParent().s||!this.g.collapsed)b-=this.Bb();else if(this.g.collapsed){this.A.style.width=
b-2+"px";this.A.style.borderLeftWidth=this.A.style.borderRightWidth="1px";var d=Math.floor(-b/2+a/2)-(a-this.g.headerAltHeight)/2;this.A.style[dhx.env.transform]="rotate(-90deg) translate("+d+"px, "+d+"px)"}}this.g.collapsed||this.o.l(a,b)}},defaults:{header:"",headerAlt:false,body:"",headerHeight:42,headerAltHeight:42,collapsed:true}},dhx.MouseEvents,dhx.EventSystem,dhx.ui.baseview);
dhx.protoUI({name:"accordion",m:function(){},T:function(){for(var a=0;a<this.W.length;a++)this.W[a].view="accordionitem";dhx.ui.layout.prototype.T.call(this);for(a=0;a<this.j.length;a++)this.j[a].refresh()},te:function(a){if(this.g.multi===false)for(var b=0;b<this.j.length;b++)a!=this.j[b]&&!this.j[b].g.collapsed&&this.j[b].collapse()},Fe:function(a){if(this.g.multi===true)return true;for(var b=0;b<this.j.length;b++)if(a!=this.j[b]&&!this.j[b].g.collapsed)return true;return false},Xf:function(){this.n();
this.l.apply(this,this.Z)},defaults:{multi:false}},dhx.ui.layout,dhx.EventSystem);dhx.i18n={dateFormat:"%d.%m.%Y",timeFormat:"%H:%i",longDateFormat:"%l, %d %F %Y",fullDateFormat:"%d-%m-%Y %H:%i",setLocale:function(){for(var a in dhx.i18n)if(typeof dhx.i18n[a]=="string"){dhx.i18n[a+"Str"]=dhx.Date.dateToStr(dhx.i18n[a]);dhx.i18n[a+"Date"]=dhx.Date.strToDate(dhx.i18n[a])}}};
dhx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},weekStart:function(a){var b=a.getDay();if(this.config.start_on_monday)if(b===0)b=6;else b--;return this.date_part(this.add(a,-1*b,"day"))},
monthStart:function(a){a.setDate(1);return this.date_part(a)},yearStart:function(a){a.setMonth(0);return this.month_start(a)},dayStart:function(a){return this.date_part(a)},dateToStr:function(a,b){a=a.replace(/%[a-zA-Z]/g,function(c){switch(c){case "%d":return'"+dhx.math.toFixed(date.getDate())+"';case "%m":return'"+dhx.math.toFixed((date.getMonth()+1))+"';case "%j":return'"+date.getDate()+"';case "%n":return'"+(date.getMonth()+1)+"';case "%y":return'"+dhx.math.toFixed(date.getFullYear()%100)+"';
case "%Y":return'"+date.getFullYear()+"';case "%D":return'"+dhx.Date.Locale.day_short[date.getDay()]+"';case "%l":return'"+dhx.Date.Locale.day_full[date.getDay()]+"';case "%M":return'"+dhx.Date.Locale.month_short[date.getMonth()]+"';case "%F":return'"+dhx.Date.Locale.month_full[date.getMonth()]+"';case "%h":return'"+dhx.math.toFixed((date.getHours()+11)%12+1)+"';case "%g":return'"+((date.getHours()+11)%12+1)+"';case "%G":return'"+date.getHours()+"';case "%H":return'"+dhx.math.toFixed(date.getHours())+"';
case "%i":return'"+dhx.math.toFixed(date.getMinutes())+"';case "%a":return'"+(date.getHours()>11?"pm":"am")+"';case "%A":return'"+(date.getHours()>11?"PM":"AM")+"';case "%s":return'"+dhx.math.toFixed(date.getSeconds())+"';case "%W":return'"+dhx.math.toFixed(dhx.Date.getISOWeek(date))+"';default:return c}});if(b===true)a=a.replace(/date\.get/g,"date.getUTC");return new Function("date",'return "'+a+'";')},strToDate:function(a,b){var c="var temp=date.split(/[^0-9a-zA-Z]+/g);",d=a.match(/%[a-zA-Z]/g);
for(a=0;a<d.length;a++)switch(d[a]){case "%j":case "%d":c+="set[2]=temp["+a+"]||1;";break;case "%n":case "%m":c+="set[1]=(temp["+a+"]||1)-1;";break;case "%y":c+="set[0]=temp["+a+"]*1+(temp["+a+"]>50?1900:2000);";break;case "%g":case "%G":case "%h":case "%H":c+="set[3]=temp["+a+"]||0;";break;case "%i":c+="set[4]=temp["+a+"]||0;";break;case "%Y":c+="set[0]=temp["+a+"]||0;";break;case "%a":case "%A":c+="set[3]=set[3]%12+((temp["+a+"]||'').toLowerCase()=='am'?0:12);";break;case "%s":c+="set[5]=temp["+
a+"]||0;";break;default:break}a="set[0],set[1],set[2],set[3],set[4],set[5]";if(b)a=" Date.UTC("+a+")";return new Function("date","var set=[0,0,1,0,0,0]; "+c+" return new Date("+a+");")},getISOWeek:function(a){if(!a)return false;var b=a.getDay();if(b===0)b=7;var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.floor((c.getTime()-(new Date(d,0,1)).getTime())/864E5),f=1+Math.floor(e/7);return f},getUTCISOWeek:function(a){return this.getISOWeek(a)},add:function(a,b,c){a=
new Date(a.valueOf());switch(c){case "day":a.setDate(a.getDate()+b);break;case "week":a.setDate(a.getDate()+7*b);break;case "month":a.setMonth(a.getMonth()+b);break;case "year":a.setYear(a.getFullYear()+b);break;case "hour":a.setHours(a.getHours()+b);break;case "minute":a.setMinutes(a.getMinutes()+b);break;default:break}return a},datePart:function(a){a=this.copy(a);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},timePart:function(a){a=this.copy(a);return(a.valueOf()/1E3-
a.getTimezoneOffset()*60)%86400},copy:function(a){return new Date(a.valueOf())}};dhx.i18n.setLocale("en");dhx.format=function(a){a=a||{};this.m(a)};
dhx.format.prototype={m:function(a){this.g={};this.g.groupDelimiter=a.groupDelimiter||" ";this.g.groupNumber=a.groupNumber||3;this.g.decimalPoint=a.decimalPoint||",";this.g.fractNumber=a.fractNumber||5;this.g.dateFormat=a.dateFormat||"%Y/%m/%d";this.g.stringTemplate=a.stringTemplate||"{value}";this.yg=dhx.Date.str_to_date(this.g.dateFormat);this.Qe=dhx.Date.date_to_str(this.g.dateFormat)},define:function(a,b){this.g[a]=b},format:function(a,b){b=b||this.formatAutoDefine(a);if(this["format__"+b])return this["format__"+
b](a);return a},formatAutoDefine:function(a){if(typeof a=="number"||a instanceof Number)return"number";if(a instanceof Date)return"date";if(typeof a=="string"||a instanceof String)return isNaN(parseFloat(a))?"string":"number";return false},format__number:function(a){var b="";typeof a=="number"||a instanceof Number||(a=parseFloat(a));a=a.toFixed(this.g.fractNumber).toString();a=a.split(".");var c=this.add_delimiter_to_int(a[0]),d=this.str_reverse(this.add_delimiter_to_int(this.str_reverse(a[1])));
return b=c+this.g.decimalPoint+d},add_delimiter_to_int:function(a){for(var b=0,c="",d=a.length-1;d>=0;d--){c=a[d]+c;b++;if(b==this.g.groupNumber){c=this.g.groupDelimiter+c;b=0}}return c},str_reverse:function(a){for(var b="",c=a.length-1;c>=0;c--)b+=a[c];return b},format__date:function(a){return a=this.Qe(a)},attachFormat:function(a,b){this["format__"+a]=b},format__string:function(a){return a=this.g.stringTemplate.replace("{value}",a)},format__bold:function(a){if(typeof a=="string"||a instanceof String)return a.bold();
return a}};dhx.i18n.setLocale();
dhx.protoUI({name:"calendar",defaults:{date:null,startOnMonday:true,navigation:true,weekHeader:false,weekNumber:false,timeSelect:false,skipEmptyWeeks:true,cellHeight:36,minuteStep:15,hourStart:6,hourEnd:24,hourFormat:"%H",calendarHeader:"%F %Y",calendarDay:"%d",calendarWeekHeader:"W#",calendarWeek:"%W",width:300,height:300,selectedCss:"dhx_cal_selected_day"},skin:{monthHeaderHeight:40,weekHeaderHeight:20,timeSelectHeight:32},hourFormat_setter:dhx.Date.dateToStr,calendarHeader_setter:dhx.Date.dateToStr,calendarDay_setter:dhx.Date.dateToStr,
calendarHeader_setter:dhx.Date.dateToStr,calendarWeekHeader_setter:dhx.Date.dateToStr,calendarWeek_setter:dhx.Date.dateToStr,date_setter:function(a){if(typeof a=="string")a=dhx.i18n.fullDateFormatDate(a);this.$=this.$||a;return a},m:function(){this.za={};this.$c=dhx.Date.dateToStr("%Y-%m-%d");this.Ce=dhx.Date.strToDate("%Y-%m-%d")},n:function(){if(this.g.cellHeight>0)this.g.height=this.mf();return dhx.ui.view.prototype.n.call(this)},cellHeight_setter:function(a){if(a=="auto")return 0;return a},l:function(a,
b){dhx.ui.view.prototype.l.call(this,a,b)&&this.render()},qd:function(){if(!this.$)this.$=new Date;var a=new Date(this.$);a.setDate(1);var b=a.getDay();this.zf=new Date(a);this.re=this.g.startOnMonday?1:0;this.Lb=(b-this.re+7)%7;this.yc=32-(new Date(a.getFullYear(),a.getMonth(),32)).getDate();var c=42-this.Lb-this.yc;this.vg=new Date(a.setDate(this.yc));this.U=this.g.skipEmptyWeeks?6-Math.floor(c/7):6;this.zc=this.U*7-this.Lb-this.yc;this.ug=new Date(a.setDate(a.getDate()+c));this.wd=this.skin.monthHeaderHeight+
(this.g.weekHeader?this.skin.weekHeaderHeight:0)+(this.g.timeSelect?this.skin.timeSelectHeight:0)},mf:function(){this.qd();return this.wd+this.U*this.g.cellHeight},ef:function(){this.qd();this.Va=[];this.ma=[];var a=this.q;a+=1;for(var b=this.w,c=this.g.weekNumber?8:7,d=0;d<c;d++){this.ma[d]=Math.ceil(a/(c-d));a-=this.ma[d]}if(this.g.cellHeight<=0)for(d=0;d<this.U;d++){this.Va[d]=Math.ceil((b-this.wd)/(this.U-d));b-=this.Va[d]}else for(d=0;d<this.U;d++)this.Va[d]=this.g.cellHeight},selectDate:function(a,
b){this.define("date",a);b&&this.showCalendar(this.g.date);a=this.g.selectedCss;if(this.za[this.r]){dhx.html.removeCss(this.za[this.r],a);this.r=null}var c=this.$c(this.g.date);if(this.za[c]){dhx.html.addCss(this.za[c],a);this.r=c}},getSelectedDate:function(){return this.g.date?new Date(this.g.date):null},getVisibleDate:function(){return new Date(this.$)},setValue:function(a){this.selectDate(a,true)},getValue:function(){return this.getSelectedDate()},showCalendar:function(a){if(typeof a=="string")a=
dhx.i18m.fullDateFormatDate(a);if(!(a&&a.getFullYear()==this.$.getFullYear()&&a.getMonth()==this.$.getMonth())){this.$=a||this.$;this.render();(a=this.getParent())&&a.resize()}},refresh:function(){this.render()},render:function(){if(this.isVisible(this.g.id)){this.callEvent("onBeforeRender",[]);this.ef();var a="<div class='dhx_mini_calendar'><div class='dhx_cal_month'>"+this.g.calendarHeader(this.$);if(this.g.navigation)a+=this.Af();a+="</div>";if(this.g.weekHeader)a+="<div class='dhx_cal_header' style='height:"+
this.skin.weekHeaderHeight+"px'>"+this.rg()+"</div>";a+="<div class='dhx_cal_body'>"+this.Ae()+"</div>";if(this.g.timeSelect)a+="<div class='dhx_cal_time_select'>"+this.og()+"</div>";a+="</div></div>";this.k.innerHTML=a;this.za={};a=this.k.getElementsByTagName("table");var b=a[a.length-1].getElementsByTagName("div");for(a=0;a<b.length;a++)this.za[b[a].getAttribute("date")]=b[a];this.g.date&&this.selectDate(this.g.date,false);this.callEvent("onAfterRender",[])}},rg:function(){var a="",b=this.g.startOnMonday?
1:0,c=0,d=0;if(this.g.weekNumber){d=1;var e=this.g.calendarWeekHeader();a+="<div class='dhx_cal_week_header' style='width: "+(this.ma[0]-1)+"px; left: "+c+"px;' >"+e+"</div>";c+=this.ma[0]}for(e=0;e<7;e++){var f=(b+e)%7,g=dhx.Date.Locale.day_short[f],h="dhx_cal_day_name",j=this.ma[e+d]-1;if(e==6){h+=" dhx_cal_day_name_last";j+=1}if(f===0)h+=" dhx_sunday";if(f==6)h+=" dhx_saturday";a+="<div class='"+h+"' style='width: "+j+"px; left: "+c+"px;' >"+g+"</div>";c+=this.ma[e+d]}return a},Ae:function(){var a=
0,b=dhx.Date.add(this.zf,-this.Lb,"day");b=dhx.Date.datePart(b);var c=0,d="";if(this.g.weekNumber){c=1;var e=dhx.Date.add(b,(this.re+1)%2,"day");d+='<table class="dhx_week_numbers" cellspacing="0" cellpadding="0" style="float: left;"><tbody>';for(var f=0;f<this.U;f++){var g=this.Va[f]-2,h=this.ma[0]-2,j=this.g.calendarWeek(e),k="dhx_cal_week_num";if(!this.g.skipEmptyWeeks&&(f==this.U-1&&this.zc>=7||f==this.U-2&&this.zc==14)){k="dhx_next_month";j=""}if(f==this.U-1){k+=" dhx_cal_day_num_bborder";g+=
1}d+="<tr><td>";d+="<div class='"+k+"' style='width:"+h+"px; height:"+g+"px; line-height:"+g+"px;' >"+j+"</div>";d+="</td></tr>";e=dhx.Date.add(e,7,"day")}d+="</tbody></table>"}var i=dhx.Date.datePart(new Date);d+='<table cellspacing="0" cellpadding="0"><tbody>';var m=this.U*7-1;for(f=0;f<this.U;f++){d+="<tr>";for(j=0;j<7;j++){var l=this.g.calendarDay(b),n=this.$c(b);k="dhx_cal_day_num";if(a<this.Lb){k="dhx_prev_month";n=l=""}if(a>m-this.zc){k="dhx_next_month";n=l=""}g=this.Va[f]-2;h=this.ma[j+c]-
2;if(j==6){k+=" dhx_cal_day_num_rborder";h+=1}if(f==this.U-1){k+=" dhx_cal_day_num_bborder";g+=1}d+="<td>";if(i.valueOf()==b.valueOf())k+=" dhx_cal_current_day";d+="<div class='"+k+"' style='width:"+h+"px; height:"+g+"px; line-height:"+g+"px;' date='"+n+"'>"+l+"</div>";d+="</td>";b=dhx.Date.add(b,1,"day");a++}d+="</tr>"}d+="</tbody></table>";return d},og:function(){for(var a="<select class='dhx_hour_select' onclick=''>",b=this.g.hourStart,c=this.g.hourEnd,d=dhx.Date.datePart(new Date),e=b;e<c;e++){d.setHours(e);
a+="<option value='"+e+"'>"+this.g.hourFormat(d)+"</option>"}a+="</select>";a+="<select class='dhx_minute_select' onclick=''>";for(var f=0;f<60;f+=this.g.minuteStep)a+="<option value='"+f+"'>"+dhx.math.toFixed(f)+"</option>";a+="</select>";return a},Af:function(){var a="<div class='dhx_cal_arrow dhx_cal_",b="_button'><div></div></div>";return a+"prev"+b+a+"next"+b},on_click:{dhx_cal_arrow:function(a,b,c){a=c.className.match(/prev/i)?-1:1;var d=new Date(this.$),e=new Date(d);e.setDate(1);e=dhx.Date.add(e,
a,"month");if(this.callEvent("onBeforeMonthChange",[d,e])){this.showCalendar(e);this.callEvent("onAfterMonthChange",[e,d])}},dhx_cal_day_num:function(a,b,c){a=c.getAttribute("date");a=this.Ce(a);if(this.g.timeSelect){var d=this.h.getElementsByTagName("select");a.setMinutes(d[0].value*60+d[1].value*1)}this.selectDate(a);this.callEvent("onDateSelect",[a]);this.callEvent("onChange",[a])}}},dhx.MouseEvents,dhx.Settings,dhx.EventSystem,dhx.Movable,dhx.ui.view);
dhx.html.addMeta=function(a,b){document.getElementsByTagName("head").item(0).appendChild(dhx.html.create("meta",{name:a,content:b}))};
(function(){var a=function(){var b=!!(window.orientation%180);if(dhx.ui.orientation!==b){dhx.ui.orientation=b;dhx.callEvent("onRotate",[b])}};dhx.ui.orientation=!!((dhx.isNotDefined(window.orientation)?90:window.orientation)%180);dhx.event(window,"onorientationchange"in window?"orientationchange":"resize",a);dhx.ui.fullScreen=function(){dhx.html.addMeta("apple-mobile-web-app-capable","yes");dhx.html.addMeta("viewport","initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no");if(dhx.env.touch){var b=
document.body.offsetHeight,c=navigator.userAgent.indexOf("iPhone")!=-1,d=c&&(b==356||b==208||b==306||b==158),e=function(){if(c)if(dhx.ui.orientation){h=480;j=d?268:300}else{h=320;j=d?416:460}else{document.body.style.width=document.body.style.height="1px";document.body.style.overflow="hidden";var g=window.outerWidth/window.innerWidth,h=window.outerWidth/g,j=window.outerHeight/g}document.body.style.height=j+"px";document.body.style.width=h+"px";dhx.ui.od=false;dhx.ui.resize();dhx.delay(function(){window.scrollTo(0,
1)})},f=function(){dhx.ui.od=true;dhx.env.isSafari?e():dhx.delay(e,null,[],500)};dhx.attachEvent("onClick",function(){if(d&&window.innerHeight<416||!d&&window.innerHeight<window.outerHeight)window.scrollTo(0,1)});dhx.attachEvent("onRotate",f);a();dhx.delay(f)}}})();
